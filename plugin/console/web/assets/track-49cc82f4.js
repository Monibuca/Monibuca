import{l as be}from"./vendor-ec30964e.js";import{B as xe,f as we}from"./TableAction-b6863a0a.js";import{_ as Se}from"./index-f89cf332.js";import{_ as _e,i as Ce}from"./index-93e74700.js";import{h as Ve}from"./index-c7d04dfb.js";import{_ as E,Y as oe,o as le,J as ue,Z as Pe,P as ce,$ as U,a0 as De,y as he,w as de,a1 as Ie,a2 as ke,a3 as z,u as O,a4 as Le,a5 as Te,a6 as q,G as Me,a7 as Oe,h as X,C as Ee,a8 as ve,v as pe,a9 as Re,aa as Ne,ab as Be,ac as Fe,ad as ze,l as $e,ae as We,af as ge,ag as fe,ah as Ge,q as Ye,ai as Xe,aj as He,K as Ue,L as Z,N as qe,O as Ze,Q as je,U as Je,V as Ke,W as Qe,X as et}from"./installCanvasRenderer-cb1ba546.js";import{d as tt,i as rt,a as at}from"./install-c0cf116b.js";import{i as it}from"./install-40c3b04b.js";var me=function(i){E(r,i);function r(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,t){return oe(null,this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(e,t,a){var n=this.coordinateSystem;if(n&&n.clampData){var l=n.clampData(e),u=n.dataToPoint(l);if(a)le(n.getAxes(),function(m,g){if(m.type==="category"&&t!=null){var y=m.getTicksCoords(),v=l[g],S=t[g]==="x1"||t[g]==="y1";if(S&&(v+=1),y.length<2)return;if(y.length===2){u[g]=m.toGlobalCoord(m.getExtent()[S?1:0]);return}for(var b=void 0,x=void 0,d=1,f=0;f<y.length;f++){var _=y[f].coord,w=f===y.length-1?y[f-1].tickValue+d:y[f].tickValue;if(w===v){x=_;break}else if(w<v)b=_;else if(b!=null&&w>v){x=(_+b)/2;break}f===1&&(d=w-y[0].tickValue)}x==null&&(b?b&&(x=y[y.length-1].coord):x=y[0].coord),u[g]=m.toGlobalCoord(x)}});else{var c=this.getData(),s=c.getLayout("offset"),o=c.getLayout("size"),h=n.getBaseAxis().isHorizontal()?0:1;u[h]+=s+o/2}return u}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},r}(ue);ue.registerClass(me);const j=me;var nt=function(i){E(r,i);function r(){var e=i!==null&&i.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(){return oe(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},r.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},r.prototype.brushSelector=function(e,t,a){return a.rect(t.getItemLayout(e))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=Pe(j.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),r}(j);const st=nt;var ot=function(){function i(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return i}(),lt=function(i){E(r,i);function r(e){var t=i.call(this,e)||this;return t.type="sausage",t}return r.prototype.getDefaultShape=function(){return new ot},r.prototype.buildPath=function(e,t){var a=t.cx,n=t.cy,l=Math.max(t.r0||0,0),u=Math.max(t.r,0),c=(u-l)*.5,s=l+c,o=t.startAngle,h=t.endAngle,m=t.clockwise,g=Math.PI*2,y=m?h-o<g:o-h<g;y||(o=h-(m?g:-g));var v=Math.cos(o),S=Math.sin(o),b=Math.cos(h),x=Math.sin(h);y?(e.moveTo(v*l+a,S*l+n),e.arc(v*s+a,S*s+n,c,-Math.PI+o,o,!m)):e.moveTo(v*u+a,S*u+n),e.arc(a,n,u,o,h,!m),e.arc(b*s+a,x*s+n,c,h-Math.PI*2,h-Math.PI,!m),l!==0&&e.arc(a,n,l,h,o,m)},r}(ce);const J=lt;function ut(i,r){r=r||{};var e=r.isRoundCap;return function(t,a,n){var l=a.position;if(!l||l instanceof Array)return U(t,a,n);var u=i(l),c=a.distance!=null?a.distance:5,s=this.shape,o=s.cx,h=s.cy,m=s.r,g=s.r0,y=(m+g)/2,v=s.startAngle,S=s.endAngle,b=(v+S)/2,x=e?Math.abs(m-g)/2:0,d=Math.cos,f=Math.sin,_=o+m*d(v),w=h+m*f(v),P="left",D="top";switch(u){case"startArc":_=o+(g-c)*d(b),w=h+(g-c)*f(b),P="center",D="top";break;case"insideStartArc":_=o+(g+c)*d(b),w=h+(g+c)*f(b),P="center",D="bottom";break;case"startAngle":_=o+y*d(v)+N(v,c+x,!1),w=h+y*f(v)+B(v,c+x,!1),P="right",D="middle";break;case"insideStartAngle":_=o+y*d(v)+N(v,-c+x,!1),w=h+y*f(v)+B(v,-c+x,!1),P="left",D="middle";break;case"middle":_=o+y*d(b),w=h+y*f(b),P="center",D="middle";break;case"endArc":_=o+(m+c)*d(b),w=h+(m+c)*f(b),P="center",D="bottom";break;case"insideEndArc":_=o+(m-c)*d(b),w=h+(m-c)*f(b),P="center",D="top";break;case"endAngle":_=o+y*d(S)+N(S,c+x,!0),w=h+y*f(S)+B(S,c+x,!0),P="left",D="middle";break;case"insideEndAngle":_=o+y*d(S)+N(S,-c+x,!0),w=h+y*f(S)+B(S,-c+x,!0),P="right",D="middle";break;default:return U(t,a,n)}return t=t||{},t.x=_,t.y=w,t.align=P,t.verticalAlign=D,t}}function ct(i,r,e,t){if(De(t)){i.setTextConfig({rotation:t});return}else if(he(r)){i.setTextConfig({rotation:0});return}var a=i.shape,n=a.clockwise?a.startAngle:a.endAngle,l=a.clockwise?a.endAngle:a.startAngle,u=(n+l)/2,c,s=e(r);switch(s){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":c=u;break;case"startAngle":case"insideStartAngle":c=n;break;case"endAngle":case"insideEndAngle":c=l;break;default:i.setTextConfig({rotation:0});return}var o=Math.PI*1.5-c;s==="middle"&&o>Math.PI/2&&o<Math.PI*1.5&&(o-=Math.PI),i.setTextConfig({rotation:o})}function N(i,r,e){return r*Math.sin(i)*(e?-1:1)}function B(i,r,e){return r*Math.cos(i)*(e?1:-1)}function ht(i,r,e){var t=i.get("borderRadius");if(t==null)return e?{cornerRadius:0}:null;he(t)||(t=[t,t,t,t]);var a=Math.abs(r.r||0-r.r0||0);return{cornerRadius:de(t,function(n){return Ie(n,a)})}}var G=Math.max,Y=Math.min;function dt(i,r){var e=i.getArea&&i.getArea();if(ge(i,"cartesian2d")){var t=i.getBaseAxis();if(t.type!=="category"||!t.onBand){var a=r.getLayout("bandWidth");t.isHorizontal()?(e.x-=a,e.width+=a*2):(e.y-=a,e.height+=a*2)}}return e}var vt=function(i){E(r,i);function r(){var e=i.call(this)||this;return e.type=r.type,e._isFirstFrame=!0,e}return r.prototype.render=function(e,t,a,n){this._model=e,this._removeOnRenderedListener(a),this._updateDrawMode(e);var l=e.get("coordinateSystem");(l==="cartesian2d"||l==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,a):this._renderNormal(e,t,a,n))},r.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},r.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},r.prototype.eachRendered=function(e){ke(this._progressiveEls||this.group,e)},r.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;(this._isLargeDraw==null||t!==this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},r.prototype._renderNormal=function(e,t,a,n){var l=this.group,u=e.getData(),c=this._data,s=e.coordinateSystem,o=s.getBaseAxis(),h;s.type==="cartesian2d"?h=o.isHorizontal():s.type==="polar"&&(h=o.dim==="angle");var m=e.isAnimationEnabled()?e:null,g=pt(e,s);g&&this._enableRealtimeSort(g,u,a);var y=e.get("clip",!0)||g,v=dt(s,u);l.removeClipPath();var S=e.get("roundCap",!0),b=e.get("showBackground",!0),x=e.getModel("backgroundStyle"),d=x.get("borderRadius")||0,f=[],_=this._backgroundEls,w=n&&n.isInitSort,P=n&&n.type==="changeAxisOrder";function D(A){var L=F[s.type](u,A),p=xt(s,h,L);return p.useStyle(x.getItemStyle()),s.type==="cartesian2d"?p.setShape("r",d):p.setShape("cornerRadius",d),f[A]=p,p}u.diff(c).add(function(A){var L=u.getItemModel(A),p=F[s.type](u,A,L);if(b&&D(A),!(!u.hasValue(A)||!re[s.type](p))){var V=!1;y&&(V=K[s.type](v,p));var C=Q[s.type](e,u,A,p,h,m,o.model,!1,S);g&&(C.forceLabelAnimation=!0),ae(C,u,A,L,p,e,h,s.type==="polar"),w?C.attr({shape:p}):g?ee(g,m,C,p,A,h,!1,!1):z(C,{shape:p},e,A),u.setItemGraphicEl(A,C),l.add(C),C.ignore=V}}).update(function(A,L){var p=u.getItemModel(A),V=F[s.type](u,A,p);if(b){var C=void 0;_.length===0?C=D(L):(C=_[L],C.useStyle(x.getItemStyle()),s.type==="cartesian2d"?C.setShape("r",d):C.setShape("cornerRadius",d),f[A]=C);var T=F[s.type](u,A),R=Ae(h,T,s);O(C,{shape:R},m,A)}var k=c.getItemGraphicEl(L);if(!u.hasValue(A)||!re[s.type](V)){l.remove(k);return}var $=!1;if(y&&($=K[s.type](v,V),$&&l.remove(k)),k?Le(k):k=Q[s.type](e,u,A,V,h,m,o.model,!!k,S),g&&(k.forceLabelAnimation=!0),P){var H=k.getTextContent();if(H){var W=Te(H);W.prevValue!=null&&(W.prevValue=W.value)}}else ae(k,u,A,p,V,e,h,s.type==="polar");w?k.attr({shape:V}):g?ee(g,m,k,V,A,h,!0,P):O(k,{shape:V},e,A,null),u.setItemGraphicEl(A,k),k.ignore=$,l.add(k)}).remove(function(A){var L=c.getItemGraphicEl(A);L&&q(L,e,A)}).execute();var M=this._backgroundGroup||(this._backgroundGroup=new Me);M.removeAll();for(var I=0;I<f.length;++I)M.add(f[I]);l.add(M),this._backgroundEls=f,this._data=u},r.prototype._renderLarge=function(e,t,a){this._clear(),ne(e,this.group),this._updateLargeClip(e)},r.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),ne(t,this.group,this._progressiveEls,!0)},r.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&Oe(e.coordinateSystem,!1,e),a=this.group;t?a.setClipPath(t):a.removeClipPath()},r.prototype._enableRealtimeSort=function(e,t,a){var n=this;if(t.count()){var l=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,a),this._isFirstFrame=!1;else{var u=function(c){var s=t.getItemGraphicEl(c),o=s&&s.shape;return o&&Math.abs(l.isHorizontal()?o.height:o.width)||0};this._onRendered=function(){n._updateSortWithinSameData(t,u,l,a)},a.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(e,t,a){var n=[];return e.each(e.mapDimension(t.dim),function(l,u){var c=a(u);c=c??NaN,n.push({dataIndex:u,mappedValue:c,ordinalNumber:l})}),n.sort(function(l,u){return u.mappedValue-l.mappedValue}),{ordinalNumbers:de(n,function(l){return l.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(e,t,a){for(var n=a.scale,l=e.mapDimension(a.dim),u=Number.MAX_VALUE,c=0,s=n.getOrdinalMeta().categories.length;c<s;++c){var o=e.rawIndexOf(l,n.getRawOrdinalNumber(c)),h=o<0?Number.MIN_VALUE:t(e.indexOfRawIndex(o));if(h>u)return!0;u=h}return!1},r.prototype._isOrderDifferentInView=function(e,t){for(var a=t.scale,n=a.getExtent(),l=Math.max(0,n[0]),u=Math.min(n[1],a.getOrdinalMeta().categories.length-1);l<=u;++l)if(e.ordinalNumbers[l]!==a.getRawOrdinalNumber(l))return!0},r.prototype._updateSortWithinSameData=function(e,t,a,n){if(this._isOrderChangedWithinSameData(e,t,a)){var l=this._dataSort(e,a,t);this._isOrderDifferentInView(l,a)&&(this._removeOnRenderedListener(n),n.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:l}))}},r.prototype._dispatchInitSort=function(e,t,a){var n=t.baseAxis,l=this._dataSort(e,n,function(u){return e.get(e.mapDimension(t.otherAxis.dim),u)});a.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",isInitSort:!0,axisId:n.index,sortInfo:l})},r.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},r.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},r.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(e){var t=this.group,a=this._data;e&&e.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl(function(n){q(n,e,X(n).dataIndex)})):t.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r}(Ee),K={cartesian2d:function(i,r){var e=r.width<0?-1:1,t=r.height<0?-1:1;e<0&&(r.x+=r.width,r.width=-r.width),t<0&&(r.y+=r.height,r.height=-r.height);var a=i.x+i.width,n=i.y+i.height,l=G(r.x,i.x),u=Y(r.x+r.width,a),c=G(r.y,i.y),s=Y(r.y+r.height,n),o=u<l,h=s<c;return r.x=o&&l>a?u:l,r.y=h&&c>n?s:c,r.width=o?0:u-l,r.height=h?0:s-c,e<0&&(r.x+=r.width,r.width=-r.width),t<0&&(r.y+=r.height,r.height=-r.height),o||h},polar:function(i,r){var e=r.r0<=r.r?1:-1;if(e<0){var t=r.r;r.r=r.r0,r.r0=t}var a=Y(r.r,i.r),n=G(r.r0,i.r0);r.r=a,r.r0=n;var l=a-n<0;if(e<0){var t=r.r;r.r=r.r0,r.r0=t}return l}},Q={cartesian2d:function(i,r,e,t,a,n,l,u,c){var s=new ve({shape:pe({},t),z2:1});if(s.__dataIndex=e,s.name="item",n){var o=s.shape,h=a?"height":"width";o[h]=0}return s},polar:function(i,r,e,t,a,n,l,u,c){var s=!a&&c?J:fe,o=new s({shape:t,z2:1});o.name="item";var h=ye(a);if(o.calculateTextPosition=ut(h,{isRoundCap:s===J}),n){var m=o.shape,g=a?"r":"endAngle",y={};m[g]=a?t.r0:t.startAngle,y[g]=t[g],(u?O:z)(o,{shape:y},n)}return o}};function pt(i,r){var e=i.get("realtimeSort",!0),t=r.getBaseAxis();if(e&&t.type==="category"&&r.type==="cartesian2d")return{baseAxis:t,otherAxis:r.getOtherAxis(t)}}function ee(i,r,e,t,a,n,l,u){var c,s;n?(s={x:t.x,width:t.width},c={y:t.y,height:t.height}):(s={y:t.y,height:t.height},c={x:t.x,width:t.width}),u||(l?O:z)(e,{shape:c},r,a,null);var o=r?i.baseAxis.model:null;(l?O:z)(e,{shape:s},o,a)}function te(i,r){for(var e=0;e<r.length;e++)if(!isFinite(i[r[e]]))return!0;return!1}var gt=["x","y","width","height"],ft=["cx","cy","r","startAngle","endAngle"],re={cartesian2d:function(i){return!te(i,gt)},polar:function(i){return!te(i,ft)}},F={cartesian2d:function(i,r,e){var t=i.getItemLayout(r),a=e?yt(e,t):0,n=t.width>0?1:-1,l=t.height>0?1:-1;return{x:t.x+n*a/2,y:t.y+l*a/2,width:t.width-n*a,height:t.height-l*a}},polar:function(i,r,e){var t=i.getItemLayout(r);return{cx:t.cx,cy:t.cy,r0:t.r0,r:t.r,startAngle:t.startAngle,endAngle:t.endAngle,clockwise:t.clockwise}}};function mt(i){return i.startAngle!=null&&i.endAngle!=null&&i.startAngle===i.endAngle}function ye(i){return function(r){var e=r?"Arc":"Angle";return function(t){switch(t){case"start":case"insideStart":case"end":case"insideEnd":return t+e;default:return t}}}(i)}function ae(i,r,e,t,a,n,l,u){var c=r.getItemVisual(e,"style");if(u){if(!n.get("roundCap")){var o=i.shape,h=ht(t.getModel("itemStyle"),o,!0);pe(o,h),i.setShape(o)}}else{var s=t.get(["itemStyle","borderRadius"])||0;i.setShape("r",s)}i.useStyle(c);var m=t.getShallow("cursor");m&&i.attr("cursor",m);var g=u?l?a.r>=a.r0?"endArc":"startArc":a.endAngle>=a.startAngle?"endAngle":"startAngle":l?a.height>=0?"bottom":"top":a.width>=0?"right":"left",y=Re(t);Ne(i,y,{labelFetcher:n,labelDataIndex:e,defaultText:Be(n.getData(),e),inheritColor:c.fill,defaultOpacity:c.opacity,defaultOutsidePosition:g});var v=i.getTextContent();if(u&&v){var S=t.get(["label","position"]);i.textConfig.inside=S==="middle"?!0:null,ct(i,S==="outside"?g:S,ye(l),t.get(["label","rotate"]))}Fe(v,y,n.getRawValue(e),function(x){return Ge(r,x)});var b=t.getModel(["emphasis"]);ze(i,b.get("focus"),b.get("blurScope"),b.get("disabled")),$e(i,t),mt(a)&&(i.style.fill="none",i.style.stroke="none",le(i.states,function(x){x.style&&(x.style.fill=x.style.stroke="none")}))}function yt(i,r){var e=i.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var t=i.get(["itemStyle","borderWidth"])||0,a=isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),n=isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height);return Math.min(t,a,n)}var At=function(){function i(){}return i}(),ie=function(i){E(r,i);function r(e){var t=i.call(this,e)||this;return t.type="largeBar",t}return r.prototype.getDefaultShape=function(){return new At},r.prototype.buildPath=function(e,t){for(var a=t.points,n=this.baseDimIdx,l=1-this.baseDimIdx,u=[],c=[],s=this.barWidth,o=0;o<a.length;o+=3)c[n]=s,c[l]=a[o+2],u[n]=a[o+n],u[l]=a[o+l],e.rect(u[0],u[1],c[0],c[1])},r}(ce);function ne(i,r,e,t){var a=i.getData(),n=a.getLayout("valueAxisHorizontal")?1:0,l=a.getLayout("largeDataIndices"),u=a.getLayout("size"),c=i.getModel("backgroundStyle"),s=a.getLayout("largeBackgroundPoints");if(s){var o=new ie({shape:{points:s},incremental:!!t,silent:!0,z2:0});o.baseDimIdx=n,o.largeDataIndices=l,o.barWidth=u,o.useStyle(c.getItemStyle()),r.add(o),e&&e.push(o)}var h=new ie({shape:{points:a.getLayout("largePoints")},incremental:!!t,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=n,h.largeDataIndices=l,h.barWidth=u,r.add(h),h.useStyle(a.getVisual("style")),X(h).seriesIndex=i.seriesIndex,i.get("silent")||(h.on("mousedown",se),h.on("mousemove",se)),e&&e.push(h)}var se=We(function(i){var r=this,e=bt(r,i.offsetX,i.offsetY);X(r).dataIndex=e>=0?e:null},30,!1);function bt(i,r,e){for(var t=i.baseDimIdx,a=1-t,n=i.shape.points,l=i.largeDataIndices,u=[],c=[],s=i.barWidth,o=0,h=n.length/3;o<h;o++){var m=o*3;if(c[t]=s,c[a]=n[m+2],u[t]=n[m+t],u[a]=n[m+a],c[a]<0&&(u[a]+=c[a],c[a]=-c[a]),r>=u[0]&&r<=u[0]+c[0]&&e>=u[1]&&e<=u[1]+c[1])return l[o]}return-1}function Ae(i,r,e){if(ge(e,"cartesian2d")){var t=r,a=e.getArea();return{x:i?t.x:a.x,y:i?a.y:t.y,width:i?t.width:a.width,height:i?a.height:t.height}}else{var a=e.getArea(),n=r;return{cx:a.cx,cy:a.cy,r0:i?a.r0:n.r0,r:i?a.r:n.r,startAngle:i?n.startAngle:0,endAngle:i?n.endAngle:Math.PI*2}}}function xt(i,r,e){var t=i.type==="polar"?fe:ve;return new t({shape:Ae(r,e,i),silent:!0,z2:0})}const wt=vt;function St(i){i.registerChartView(wt),i.registerSeriesModel(st),i.registerLayout(i.PRIORITY.VISUAL.LAYOUT,Ye(He,"bar")),i.registerLayout(i.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Xe("bar")),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,tt("bar")),i.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(r,e){var t=r.componentType||"series";e.eachComponent({mainType:t,query:r},function(a){r.sortInfo&&a.axis.setCategorySortInfo(r.sortInfo)})})}const _t={class:"events"},Ct={key:0,class:"memorys"},Vt=Vue.defineComponent({setup(i){Ue([St,it,qe,rt,at,Ze,je,Je,Ke,Qe,et]);const{t:r}=Ce.global,e=be(),{params:t,name:a}=e,n=a.split("_").pop(),l=t.id,u=t.streamPath,c=naive.useMessage(),s=naive.useThemeVars(),o=Vue.ref([{title:r("序号"),key:"sequence",width:100},{title:r("时间戳"),key:"timestamp",width:150},{title:r("写入时间"),key:"writeTime",width:150,render:d=>Vue.h(naive.NTime,{time:new Date(d.writeTime),format:"HH:mm:ss.SSS"})},{title:r("帧大小"),key:"wrap",width:100,render:d=>{var f;return Vue.h("span",d.wrap?(f=d.wrap[0])==null?void 0:f.size:"")}},{title:r("封装数据1"),key:"wrap",width:300,render:d=>{var f;return Vue.h("pre",d.wrap?(f=d.wrap[0])==null?void 0:f.data:"")}}]),h=Vue.ref([]),m=Vue.ref(0),g=Vue.ref(0),y={trigger:"axis",axisPointer:{type:"line",animation:!1,axis:"x",label:{show:!0,formatter:({value:d})=>we(new Date(d),"HH:mm:ss.SSS"),backgroundColor:"rgba(50,50,50,0.7)"}}},v=Vue.reactive({title:{},dataZoom:[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter"}],tooltip:y,xAxis:[{type:"time",splitLine:{show:!1}},{type:"category",axisPointer:{type:"shadow",label:{show:!0,formatter:({value:d})=>String(d),backgroundColor:"rgba(50,50,50,0.7)"}},splitLine:{show:!1},data:[]}],yAxis:[{name:"帧大小",type:"value"},{name:"时间戳",type:"value",min:"dataMin"},{name:"event",type:"value",min:0,max:100,show:!1,splitNumber:2,splitLine:{show:!1}}],series:[{yAxisIndex:0,name:"帧大小",type:"bar",lineStyle:{width:1},data:[]},{yAxisIndex:1,name:"时间戳",showSymbol:!1,type:"line",lineStyle:{width:2},encode:{tooltip:[1,2],x:0,y:2},data:[]},{xAxisIndex:1,yAxisIndex:2,type:"scatter",labelLayout:{moveOverlap:"shiftY"},markLine:{lineStyle:{type:"dashed"}}}]});function S(d,f){const _=f.coord([f.value(0),0]),w=f.coord([f.value(1),0]);return{transition:[],type:"rect",shape:{x:_[0],y:30,width:w[0]-_[0],height:30},style:f.style()}}const b=Vue.reactive({title:{text:"MemoryAllocator"},dataZoom:[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter"}],tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},xAxis:{min:0,scale:!0,type:"value"},yAxis:{type:"category"},series:[{type:"custom",renderItem:S,tooltip:{trigger:"item",formatter:({value:d})=>`${d[0]}-${d[1]}`},encode:{x:[0,1],y:-1}}]});Vue.watchEffect(()=>{g.value===1&&(h.value=[],v.series[0].data=[],v.series[1].data=[],v.xAxis[1].data=[]),v.animation=g.value===0});async function x(d){var f,_,w,P,D,M;try{if(g.value===1)for(d.writeTime=d.writeTime.seconds*1e3+d.writeTime.nanos/1e6,h.value.push(d),v.series[0].data.push(d.keyFrame?{value:[d.writeTime,(_=(f=d.wrap)==null?void 0:f[0])==null?void 0:_.size],itemStyle:{color:"#a90000"}}:{value:[d.writeTime,(P=(w=d.wrap)==null?void 0:w[0])==null?void 0:P.size]}),v.series[1].data.push({value:[d.writeTime,d.sequence,d.timestamp]}),v.xAxis[1].data.push(String(d.sequence));h.value.length>10;)h.value.shift(),v.series[0].data.shift(),v.series[1].data.shift(),v.xAxis[1].data.shift();else{const I=await Ve(l,u.join("/"),n);h.value=I.ring,m.value=I.ringDataSize;let A=0;b.title.text="MemoryAllocator",b.series[0].data=I.memory.flatMap((p,V)=>{const C=p.list.map(T=>({value:[A+T.s,A+T.e],itemStyle:{color:[s.value.primaryColor,s.value.infoColor,s.value.successColor,s.value.warningColor,s.value.errorColor,s.value.primaryColorHover,s.value.infoColorHover,s.value.successColorHover,s.value.warningColorHover,s.value.errorColorHover,s.value.primaryColorPressed,s.value.infoColorPressed,s.value.successColorPressed,s.value.warningColorPressed,s.value.errorColorPressed,s.value.buttonColor2,s.value.buttonColor2Hover,s.value.buttonColor2Pressed,s.value.textColor1,s.value.textColor2,s.value.textColor3][V]}}));return A+=p.size,C}),b.xAxis.max=A,v.series[0].data=I.ring.map(p=>{var V,C,T,R;return p.keyFrame?{value:[p.writeTime,(C=(V=p.wrap)==null?void 0:V[0])==null?void 0:C.size],itemStyle:{color:"#a90000"}}:{value:[p.writeTime,(R=(T=p.wrap)==null?void 0:T[0])==null?void 0:R.size]}}),v.series[1].data=I.ring.map(p=>({value:[p.writeTime,p.sequence,p.timestamp]})),v.xAxis[1].data=I.ring.map(p=>String(p.sequence));const L=Object.entries(I.reader);v.series[2].data=L.map(([p,V])=>[String(V),100,p]),v.series[2].markLine.data=L.map(p=>[{coord:[String(p[1]),0],symbol:"none"},{coord:[String(p[1]),90],symbol:"circle",name:p[0]}]),o.value.length==5&&((D=I.ring[0].wrap)==null?void 0:D.length)>1?o.value.push({title:r("封装数据2"),key:"wrap",width:300,render:p=>Vue.h("span",p.wrap[1].data)}):o.value.length==6&&((M=I.ring[0].wrap)==null?void 0:M.length)>2&&o.value.push({title:r("封装数据3"),key:"wrap",width:300,render:p=>Vue.h("span",p.wrap[2].data)})}}catch(I){c.error(I.message)}}return(d,f)=>{const _=Vue.resolveComponent("n-card");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createVNode(Vue.unref(Se),{onTick:x}),Vue.createElementVNode("div",_t,[Vue.createVNode(Vue.unref(Z),{class:"chart",option:Vue.unref(v),autoresize:""},null,8,["option"])]),g.value===0?(Vue.openBlock(),Vue.createElementBlock("div",Ct,[Vue.createVNode(Vue.unref(Z),{class:"chart",option:Vue.unref(b),autoresize:""},null,8,["option"])])):Vue.createCommentVNode("",!0),Vue.createVNode(_,{bordered:!1,class:"proCard"},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(xe),{title:g.value?"":`ring buffer size: ${h.value.length},total data size: ${m.value}`,columns:o.value,dataSource:h.value,"row-class-name":w=>w.keyFrame?"red":"",pagination:!1,"row-key":w=>w.sequence,"scroll-x":1090},null,8,["title","columns","dataSource","row-class-name","row-key"])]),_:1})])}}}),Et=_e(Vt,[["__scopeId","data-v-b65839ec"]]);export{Et as default};
