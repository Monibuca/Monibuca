import{l as x}from"./vendor-ec30964e.js";import{l as y,n as b}from"./index-cc631905.js";import{K as g,L as c,N as $,O as L,Q as w,U as A,V as N,W as E,X as S}from"./installCanvasRenderer-cb1ba546.js";import{Y as d}from"./index-01aec832.js";import{_ as k}from"./index-c14b60e2.js";import{i as I,a as T}from"./install-c0cf116b.js";const z={class:"events"},B={class:"events"},C={class:"events"},F=Vue.defineComponent({setup(M){g([$,I,T,L,w,A,N,E,S]);const f=x(),n=f.params.id,o=f.params.stream,i={trigger:"axis",axisPointer:{type:"line",animation:!1,axis:"x",label:{show:!0,formatter:({value:s})=>new Date(s).toLocaleTimeString(),backgroundColor:"rgba(50,50,50,0.7)"}}},r={showSymbol:!1,smooth:!0,type:"line",lineStyle:{width:1}},_=Vue.ref(0),l={type:"time",min:_,splitLine:{show:!1}},u=[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter"}],m=Vue.reactive({title:{text:o,left:"1%"},dataZoom:u,tooltip:i,xAxis:l,yAxis:[{name:"码率kbps",type:"value"},{name:"event",type:"value",min:0,max:100,show:!1,splitNumber:2,splitLine:{show:!1}}],series:[]}),v=Vue.reactive({tooltip:i,xAxis:l,dataZoom:u,yAxis:{name:"帧率fps",type:"value"},series:[]}),V=Vue.reactive({tooltip:i,xAxis:l,dataZoom:u,yAxis:{name:"缓冲大小",type:"value"},series:[]});return y(n,o+"/stream.yaml").then(s=>{const a=d.parse(s);_.value=a[0].time,m.series.push({yAxisIndex:1,type:"scatter",data:a.map(e=>[e.time,100]),labelLayout:{moveOverlap:"shiftY"},tooltip:{trigger:"item",formatter:({data:e})=>`${e.event}<br/>${new Date(e.time).toLocaleTimeString()}`},markLine:{lineStyle:{type:"dashed"},data:a.map(e=>[{coord:[e.time,0],symbol:"none"},{coord:[e.time,90],symbol:"circle",name:e.event}])}})}),b(n,o).then(s=>{d.parse(s).forEach((e,O)=>{y(n,o+`/track/${e}.yaml`).then(h=>{const p=d.parse(h);m.series.push({yAxisIndex:0,name:e,...r,data:p.map(t=>({value:[t.time,t.bps>>10]}))}),v.series.push({name:e,...r,data:p.map(t=>({value:[t.time,t.fps]}))}),V.series.push({name:e,...r,data:p.map(t=>({value:[t.time,t.rb]}))})})})}),(s,a)=>(Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createElementVNode("div",z,[Vue.createVNode(Vue.unref(c),{class:"chart",option:Vue.unref(m),autoresize:""},null,8,["option"])]),Vue.createElementVNode("div",B,[Vue.createVNode(Vue.unref(c),{class:"chart",option:Vue.unref(v),autoresize:""},null,8,["option"])]),Vue.createElementVNode("div",C,[Vue.createVNode(Vue.unref(c),{class:"chart",option:Vue.unref(V),autoresize:""},null,8,["option"])])]))}}),Q=k(F,[["__scopeId","data-v-8e73e23e"]]);export{Q as default};
