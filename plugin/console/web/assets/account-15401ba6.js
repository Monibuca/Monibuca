import{q as k,t as F,_ as w,u as y}from"./index-c14b60e2.js";import{m as v,l as B}from"./vendor-ec30964e.js";const N=Vue.createTextVNode("绑定"),A=Vue.defineComponent({setup(g){const f=v(),o=B(),l={mail:{required:!0,message:"请输入邮箱",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"}},c=Vue.ref(null),i=naive.useMessage(),t=Vue.reactive({mail:"",password:""});function C(){c.value.validate(V=>{V?i.error("绑定失败，请联系管理员"):k().then(u=>{const n=u.data.openid,{mail:e,password:m}=t;F({mail:e,password:m,openid:n}).then(()=>{var r;i.info("绑定成功");const a=decodeURIComponent(((r=o.query)==null?void 0:r.redirect)||"/");f.replace(a)})})})}return(V,u)=>{const n=Vue.resolveComponent("n-input"),e=Vue.resolveComponent("n-form-item"),m=Vue.resolveComponent("n-button"),p=Vue.resolveComponent("n-space"),a=Vue.resolveComponent("n-form"),r=Vue.resolveComponent("n-grid-item"),_=Vue.resolveComponent("n-grid");return Vue.openBlock(),Vue.createBlock(_,{cols:"2 s:2 m:2 l:3 xl:3 2xl:3",responsive:"screen"},{default:Vue.withCtx(()=>[Vue.createVNode(r,null,{default:Vue.withCtx(()=>[Vue.createVNode(a,{"label-width":80,model:Vue.unref(t),rules:l,ref_key:"formRef",ref:c},{default:Vue.withCtx(()=>[Vue.createVNode(e,{label:"邮箱",path:"mail"},{default:Vue.withCtx(()=>[Vue.createVNode(n,{value:Vue.unref(t).mail,"onUpdate:value":u[0]||(u[0]=s=>Vue.unref(t).mail=s),placeholder:"请输入邮箱"},null,8,["value"])]),_:1}),Vue.createVNode(e,{label:"密码",path:"password"},{default:Vue.withCtx(()=>[Vue.createVNode(n,{placeholder:"请输入密码",value:Vue.unref(t).password,"onUpdate:value":u[1]||(u[1]=s=>Vue.unref(t).password=s)},null,8,["value"])]),_:1}),Vue.createElementVNode("div",null,[Vue.createVNode(p,null,{default:Vue.withCtx(()=>[Vue.createVNode(m,{type:"primary",onClick:C},{default:Vue.withCtx(()=>[N]),_:1})]),_:1})])]),_:1},8,["model"])]),_:1})]),_:1})}}});const E=Vue.defineComponent({setup(g){const f=[{name:"绑定旧账号",key:1},{name:"退出登录",key:3}],o=Vue.ref(1),l=Vue.ref("绑定旧账号"),c=naive.useMessage(),i=y(),t=naive.useDialog(),C=v(),V=B();function u(){t.info({title:"提示",content:"您确定要退出登录吗",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{i.logout().then(()=>{c.success("成功退出登录"),localStorage.removeItem("TABS-ROUTES"),C.replace({name:"Login",query:{redirect:V.fullPath}})})},onNegativeClick:()=>{}})}function n(e){e.key==3?u():(o.value=e.key,l.value=e.name)}return(e,m)=>{const p=Vue.resolveComponent("n-thing"),a=Vue.resolveComponent("n-list-item"),r=Vue.resolveComponent("n-list"),_=Vue.resolveComponent("n-grid-item"),s=Vue.resolveComponent("PM2"),h=Vue.resolveComponent("n-card"),x=Vue.resolveComponent("n-grid");return Vue.openBlock(),Vue.createBlock(x,{"x-gap":24},{default:Vue.withCtx(()=>[Vue.createVNode(_,{span:"6"},{default:Vue.withCtx(()=>[Vue.createVNode(r,null,{default:Vue.withCtx(()=>[Vue.createVNode(a,null,{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(f,d=>Vue.createVNode(p,{class:Vue.normalizeClass(["thing-cell",{"thing-cell-on":o.value===d.key}]),key:d.key,onClick:D=>n(d)},{header:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(d.name),1)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1})]),_:1}),Vue.createVNode(_,{span:"18"},{default:Vue.withCtx(()=>[Vue.createVNode(h,{bordered:!1,size:"small",title:l.value,class:"proCard"},{default:Vue.withCtx(()=>[o.value===1?(Vue.openBlock(),Vue.createBlock(A,{key:0})):Vue.createCommentVNode("",!0),o.value===2?(Vue.openBlock(),Vue.createBlock(s,{key:1})):Vue.createCommentVNode("",!0)]),_:1},8,["title"])]),_:1})]),_:1})}}}),S=w(E,[["__scopeId","data-v-21fc9a7e"]]);export{S as default};
