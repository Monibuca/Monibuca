import{l as x}from"./vendor-ec30964e.js";import{k as y,l as b}from"./index-60c113a0.js";import{ac as g,ad as c,ae as $,af as w,ag as A,ah as L,ai as N,aj as k,ak as E,al as S,am as I}from"./index.esm.min-024473c8.js";import{Y as d}from"./index-01aec832.js";import{_ as T}from"./index-747e11ee.js";const z={class:"events"},B={class:"events"},C={class:"events"},F=Vue.defineComponent({setup(M){g([$,w,A,L,N,k,E,S,I]);const f=x(),n=f.params.id,o=f.params.stream,i={trigger:"axis",axisPointer:{type:"line",animation:!1,axis:"x",label:{show:!0,formatter:({value:a})=>new Date(a).toLocaleTimeString(),backgroundColor:"rgba(50,50,50,0.7)"}}},r={showSymbol:!1,smooth:!0,type:"line",lineStyle:{width:1}},_=Vue.ref(0),l={type:"time",min:_,splitLine:{show:!1}},u=[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter"}],m=Vue.reactive({title:{text:o,left:"1%"},dataZoom:u,tooltip:i,xAxis:l,yAxis:[{name:"码率kbps",type:"value"},{name:"event",type:"value",min:0,max:100,show:!1,splitNumber:2,splitLine:{show:!1}}],series:[]}),v=Vue.reactive({tooltip:i,xAxis:l,dataZoom:u,yAxis:{name:"帧率fps",type:"value"},series:[]}),h=Vue.reactive({tooltip:i,xAxis:l,dataZoom:u,yAxis:{name:"缓冲大小",type:"value"},series:[]});return y(n,o+"/stream.yaml").then(a=>{const s=d.parse(a);_.value=s[0].time,m.series.push({yAxisIndex:1,type:"scatter",data:s.map(e=>[e.time,100]),labelLayout:{moveOverlap:"shiftY"},tooltip:{trigger:"item",formatter:({data:e})=>`${e.event}<br/>${new Date(e.time).toLocaleTimeString()}`},markLine:{lineStyle:{type:"dashed"},data:s.map(e=>[{coord:[e.time,0],symbol:"none"},{coord:[e.time,90],symbol:"circle",name:e.event}])}})}),b(n,o).then(a=>{d.parse(a).forEach((e,Y)=>{y(n,o+`/track/${e}.yaml`).then(V=>{const p=d.parse(V);m.series.push({yAxisIndex:0,name:e,...r,data:p.map(t=>({value:[t.time,t.bps>>10]}))}),v.series.push({name:e,...r,data:p.map(t=>({value:[t.time,t.fps]}))}),h.series.push({name:e,...r,data:p.map(t=>({value:[t.time,t.rb]}))})})})}),(a,s)=>(Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createElementVNode("div",z,[Vue.createVNode(Vue.unref(c),{class:"chart",option:Vue.unref(m),autoresize:""},null,8,["option"])]),Vue.createElementVNode("div",B,[Vue.createVNode(Vue.unref(c),{class:"chart",option:Vue.unref(v),autoresize:""},null,8,["option"])]),Vue.createElementVNode("div",C,[Vue.createVNode(Vue.unref(c),{class:"chart",option:Vue.unref(h),autoresize:""},null,8,["option"])])]))}}),R=T(F,[["__scopeId","data-v-8e73e23e"]]);export{R as default};
