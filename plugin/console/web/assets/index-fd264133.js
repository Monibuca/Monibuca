import{l as R,O as U}from"./vendor-ec30964e.js";import{g as I,a as L}from"./index-cc631905.js";import{s as z}from"./index-de28ae1e.js";import{_ as M,c as H}from"./index-c14b60e2.js";const w=Vue.defineComponent({props:{value:null},setup(S){const m=S,t=Vue.ref(),r=[],f=["red","blue","green","yellow"],v=Vue.ref(null);return Vue.onMounted(()=>{const V=t.value,i=window.devicePixelRatio||1,N=v.value.clientWidth,C=v.value.clientHeight;V.width=N*i,V.height=C*i;const g=V.getContext("2d");g.scale(i,i),g.imageSmoothingEnabled=!0;const p=new z.TimelineGraphView(t.value);let y=0;Vue.watchEffect(()=>{const s=Date.now();s!=y&&(m.value.forEach((n,d)=>{r[d]||(r[d]=new z.TimelineDataSeries,r[d].setColor(f[d]),p.addDataSeries(r[d])),r[d].addPoint(s,n)}),p.updateEndDate(),y=s)})}),(V,i)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"canvas-container",ref_key:"canvasContainer",ref:v},[Vue.createElementVNode("canvas",{ref_key:"canvas",ref:t,class:"canvas"},null,512)],512))}});const O={class:"console"},q={class:"flex"},J={class:"flex",style:{"margin-top":"10px"}},K={class:"1",style:{"margin-top":"10px"}},Q={class:"py-1 px-1 flex justify-between"},X={class:"py-1 px-1 flex justify-between"},Y={class:"py-1 px-1 flex justify-between"},Z={class:"py-1 px-1 flex justify-between"},ee={class:"py-1 px-1 flex justify-between"},te={class:"mt-4"},ue={style:{width:"20%"}},le={style:{width:"20%"}},oe={style:{width:"20%"}},ne={style:{width:"20%"}},ae={style:{width:"20%"}},re={style:{display:"flex","margin-top":"10px"}},se=Vue.defineComponent({setup(S){const m=Vue.ref(!0),t=Vue.ref({}),r=1024*1024,f=1024*r,v=1024*f,V=Vue.ref(new Date),i=Vue.ref([]),N=Vue.ref([]),C=Vue.ref([]),g=Vue.ref([]);function p(e){return e>v?(e/v).toFixed(2)+" pb":e>f?(e/f).toFixed(2)+" gb":e>r?(e/r).toFixed(2)+" mb":e>1024?(e/1024).toFixed(2)+" kb":e.toString()+" b"}const y=R().params.id;let s;const n=Vue.ref({});Vue.onMounted(async()=>{n.value=await I(),console.log(n.value),V.value=new Date(n.value.startTime),s=L(y),s.onmessage=W}),U(()=>{s==null||s.close()});function d(e){H.push({name:"instance_config",params:{id:y},query:{name:e}})}async function W(e){var u,b;const o=JSON.parse(e.data);i.value=[o.cpuUsage||0,((u=o.hardDisk)==null?void 0:u.usage)||0,((b=o.memory)==null?void 0:b.usage)||0],N.value=[o.streamCount||0,o.subscribeCount||0,o.pullCount||0,o.pushCount||0],o.netWork=(o.netWork||[]).filter(c=>c.receive>0&&c.sent>0),t.value=o,g.value=o.netWork.map(c=>c.receiveSpeed||0),C.value=o.netWork.map(c=>c.sentSpeed||0),m.value=!1}return(e,o)=>{const u=Vue.resolveComponent("n-statistic"),b=Vue.resolveComponent("n-time"),c=Vue.resolveComponent("n-button"),A=Vue.resolveComponent("n-scrollbar"),h=Vue.resolveComponent("NCard"),_=Vue.resolveComponent("n-grid-item"),E=Vue.resolveComponent("n-space"),x=Vue.resolveComponent("n-skeleton"),k=Vue.resolveComponent("n-progress"),T=Vue.resolveComponent("n-grid"),j=Vue.resolveComponent("n-table"),F=Vue.resolveComponent("n-card"),P=Vue.resolveComponent("n-tab-pane"),G=Vue.resolveComponent("n-tabs");return Vue.openBlock(),Vue.createElementBlock("div",O,[Vue.createVNode(T,{cols:"1 s:2 m:3 l:3 xl:3 2xl:3",responsive:"screen","x-gap":12,"y-gap":8},{default:Vue.withCtx(()=>[Vue.createVNode(_,null,{default:Vue.withCtx(()=>[Vue.createVNode(h,{title:e.$t("基本信息"),segmented:{content:!0,footer:!0},size:"small",bordered:!1},{default:Vue.withCtx(()=>[Vue.createVNode(A,{style:{height:"253px"}},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",q,[Vue.createVNode(u,{style:{width:"33%"},value:n.value.version,label:e.$t("版本号"),"theme-overrides":{valueFontSize:"18px"}},null,8,["value","label"]),Vue.createVNode(u,{style:{width:"33%"},label:e.$t("启动时间"),"theme-overrides":{valueFontSize:"18px"}},{default:Vue.withCtx(()=>[Vue.createVNode(b,{time:V.value,type:"relative"},null,8,["time"])]),_:1},8,["label"]),Vue.createVNode(u,{style:{width:"33%"},value:n.value.goVersion,label:"Go"+e.$t("版本"),"theme-overrides":{valueFontSize:"18px"}},null,8,["value","label"])]),Vue.createElementVNode("div",J,[Vue.createVNode(u,{style:{width:"33%"},value:n.value.os,label:e.$t("操作系统"),"theme-overrides":{valueFontSize:"18px"}},null,8,["value","label"]),Vue.createVNode(u,{style:{width:"33%"},value:n.value.arch,label:e.$t("架构"),"theme-overrides":{valueFontSize:"18px"}},null,8,["value","label"]),Vue.createVNode(u,{style:{width:"33%"},value:n.value.cpus,label:e.$t("核心数"),"theme-overrides":{valueFontSize:"18px"}},null,8,["value","label"])]),Vue.createElementVNode("div",K,[Vue.createVNode(u,{label:e.$t("插件"),"theme-overrides":{valueFontSize:"18px"}},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(n.value.plugins,l=>(Vue.openBlock(),Vue.createBlock(c,{style:{"margin-right":"10px","margin-bottom":"10px"},secondary:"",round:"",size:"small",onClick:a=>d(l.name),key:l.name,type:"tertiary",disabled:l.disabled},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(l.name),1)]),_:2},1032,["onClick","disabled"]))),128))]),_:1},8,["label"])])]),_:1})]),_:1},8,["title"])]),_:1}),Vue.createVNode(_,null,{default:Vue.withCtx(()=>[Vue.createVNode(h,{title:e.$t("资源使用"),segmented:{content:!0,footer:!0},size:"small",bordered:!1},{default:Vue.withCtx(()=>[Vue.createVNode(E,null,{default:Vue.withCtx(()=>{var l,a,B,D,$;return[Vue.createVNode(u,{value:(((l=t.value.cpuUsage)==null?void 0:l.toFixed(2))||0)+"%",label:e.$t("cpu"),"theme-overrides":{valueFontSize:"18px"}},null,8,["value","label"]),Vue.createVNode(u,{value:((B=(a=t.value.hardDisk)==null?void 0:a.usage)==null?void 0:B.toFixed(2))+"%",label:e.$t("硬盘"),"theme-overrides":{valueFontSize:"18px"}},null,8,["value","label"]),Vue.createVNode(u,{value:(($=(D=t.value.memory)==null?void 0:D.usage)==null?void 0:$.toFixed(2))+"%",label:e.$t("内存"),"theme-overrides":{valueFontSize:"18px"}},null,8,["value","label"])]}),_:1}),Vue.createElementVNode("div",Q,[Vue.createVNode(w,{value:i.value},null,8,["value"])])]),_:1},8,["title"])]),_:1}),Vue.createVNode(_,null,{default:Vue.withCtx(()=>[Vue.createVNode(h,{title:e.$t("流数量")+(t.value.streamCount||0),segmented:{content:!0,footer:!0},size:"small",bordered:!1},{default:Vue.withCtx(()=>[Vue.createVNode(E,{justify:"space-between"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{value:t.value.subscribeCount||0,label:e.$t("订阅数"),"theme-overrides":{valueFontSize:"18px"}},null,8,["value","label"]),Vue.createVNode(u,{value:t.value.pushCount||0,label:e.$t("推送数"),"theme-overrides":{valueFontSize:"18px"}},null,8,["value","label"]),Vue.createVNode(u,{value:t.value.pullCount||0,label:e.$t("拉取数"),"theme-overrides":{valueFontSize:"18px"}},null,8,["value","label"])]),_:1}),Vue.createElementVNode("div",X,[Vue.createVNode(w,{value:N.value},null,8,["value"])])]),_:1},8,["title"])]),_:1}),Vue.createVNode(_,null,{default:Vue.withCtx(()=>[Vue.createVNode(h,{title:"CPU "+e.$t("使用"),segmented:{content:!0,footer:!0},size:"small",bordered:!1},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",Y,[m.value?(Vue.openBlock(),Vue.createBlock(x,{key:0,width:100,size:"medium"})):(Vue.openBlock(),Vue.createBlock(k,{key:1,type:"dashboard",color:"red","gap-position":"bottom",percentage:(t.value.cpuUsage||0)>>0},null,8,["percentage"]))])]),_:1},8,["title"])]),_:1}),Vue.createVNode(_,null,{default:Vue.withCtx(()=>[Vue.createVNode(h,{title:e.$t("内存使用"),segmented:{content:!0,footer:!0},size:"small",bordered:!1},{default:Vue.withCtx(()=>{var l;return[Vue.createElementVNode("div",Z,[m.value?(Vue.openBlock(),Vue.createBlock(x,{key:0,width:100,size:"medium"})):(Vue.openBlock(),Vue.createBlock(k,{key:1,type:"dashboard","gap-position":"bottom",percentage:(((l=t.value.memory)==null?void 0:l.usage)||0)>>0},null,8,["percentage"]))])]}),_:1},8,["title"])]),_:1}),Vue.createVNode(_,null,{default:Vue.withCtx(()=>[Vue.createVNode(h,{title:e.$t("硬盘使用"),segmented:{content:!0,footer:!0},size:"small",bordered:!1},{default:Vue.withCtx(()=>{var l;return[Vue.createElementVNode("div",ee,[m.value?(Vue.openBlock(),Vue.createBlock(x,{key:0,width:100,size:"medium"})):(Vue.openBlock(),Vue.createBlock(k,{key:1,color:"green",type:"dashboard","gap-position":"bottom",percentage:(((l=t.value.hardDisk)==null?void 0:l.usage)||0)>>0},null,8,["percentage"]))])]}),_:1},8,["title"])]),_:1})]),_:1}),Vue.createElementVNode("div",te,[Vue.createVNode(F,{"content-style":"padding: 0;",bordered:!1},{default:Vue.withCtx(()=>[Vue.createVNode(G,{type:"line",size:"large","tabs-padding":20,"pane-style":"padding: 20px;"},{default:Vue.withCtx(()=>[Vue.createVNode(P,{name:e.$t("网络"),class:"pane"},{default:Vue.withCtx(()=>{var l;return[Vue.createElementVNode("div",null,[Vue.createVNode(j,{"single-line":!1,bordered:!0,style:Vue.normalizeStyle({height:`${((l=t.value.netWork)==null?void 0:l.length)*50}px`})},{default:Vue.withCtx(()=>[Vue.createElementVNode("thead",null,[Vue.createElementVNode("tr",null,[Vue.createElementVNode("th",ue,Vue.toDisplayString(e.$t("网卡")),1),Vue.createElementVNode("th",le,Vue.toDisplayString(e.$t("接收总"))+" bits",1),Vue.createElementVNode("th",oe,Vue.toDisplayString(e.$t("发送总"))+" bits",1),Vue.createElementVNode("th",ne,Vue.toDisplayString(e.$t("接收速率")),1),Vue.createElementVNode("th",ae,Vue.toDisplayString(e.$t("发送速率")),1)])]),Vue.createElementVNode("tbody",null,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(t.value.netWork,a=>(Vue.openBlock(),Vue.createElementBlock("tr",{key:a.name},[Vue.createElementVNode("td",null,Vue.toDisplayString(a.name),1),Vue.createElementVNode("td",null,Vue.toDisplayString(p(a.receive||0)),1),Vue.createElementVNode("td",null,Vue.toDisplayString(p(a.sent||0)),1),Vue.createElementVNode("td",null,Vue.toDisplayString(p(a.receiveSpeed||0))+"/s",1),Vue.createElementVNode("td",null,Vue.toDisplayString(p(a.sentSpeed||0))+"/s",1)]))),128))])]),_:1},8,["style"])]),Vue.createElementVNode("div",re,[Vue.createVNode(F,{style:{"margin-right":"10px"},title:e.$t("接收速率"),size:"small",segmented:{content:!0,footer:!0}},{default:Vue.withCtx(()=>[Vue.createVNode(w,{value:g.value,style:{height:"250px"}},null,8,["value"])]),_:1},8,["title"]),Vue.createVNode(F,{title:e.$t("发送速率"),size:"small",segmented:{content:!0,footer:!0}},{default:Vue.withCtx(()=>[Vue.createVNode(w,{value:C.value,style:{height:"250px"}},null,8,["value"])]),_:1},8,["title"])])]}),_:1},8,["name"])]),_:1})]),_:1})])])}}}),pe=M(se,[["__scopeId","data-v-4ab69993"]]);export{pe as default};
