import{i as B,q as w,_ as k,u as N,P as x}from"./index-747e11ee.js";import{m as y,l as E}from"./vendor-ec30964e.js";const b=Vue.defineComponent({setup(v){const{t:e}=B.global,V={oldpassword:{required:!0,message:e("请输入旧密码"),trigger:"blur"},password:{required:!0,message:e("请输入新密码"),trigger:"blur"}},n=Vue.ref(null),l=naive.useMessage(),t=Vue.reactive({oldpassword:"",password:""});function d(){n.value.validate(u=>{if(u)l.error(e("验证失败，请填写完整信息"));else{const{oldpassword:o,password:r}=t;w({oldpassword:o,password:r}).then(()=>{l.info(e("修改密码成功，下次登录请使用新密码！"))})}})}return(u,o)=>{const r=Vue.resolveComponent("n-input"),a=Vue.resolveComponent("n-form-item"),p=Vue.resolveComponent("n-button"),s=Vue.resolveComponent("n-space"),C=Vue.resolveComponent("n-form"),_=Vue.resolveComponent("n-grid-item"),m=Vue.resolveComponent("n-grid");return Vue.openBlock(),Vue.createBlock(m,{cols:"2 s:2 m:2 l:3 xl:3 2xl:3",responsive:"screen"},{default:Vue.withCtx(()=>[Vue.createVNode(_,null,{default:Vue.withCtx(()=>[Vue.createVNode(C,{"label-width":80,model:Vue.unref(t),rules:V,ref_key:"formRef",ref:n},{default:Vue.withCtx(()=>[Vue.createVNode(a,{label:u.$t("旧密码"),path:"oldpassword"},{default:Vue.withCtx(()=>[Vue.createVNode(r,{value:Vue.unref(t).oldpassword,"onUpdate:value":o[0]||(o[0]=c=>Vue.unref(t).oldpassword=c),placeholder:u.$t("请输入旧密码")},null,8,["value","placeholder"])]),_:1},8,["label"]),Vue.createVNode(a,{label:u.$t("新密码"),path:"password"},{default:Vue.withCtx(()=>[Vue.createVNode(r,{placeholder:u.$t("请输入新密码"),value:Vue.unref(t).password,"onUpdate:value":o[1]||(o[1]=c=>Vue.unref(t).password=c)},null,8,["placeholder","value"])]),_:1},8,["label"]),Vue.createElementVNode("div",null,[Vue.createVNode(s,null,{default:Vue.withCtx(()=>[Vue.createVNode(p,{type:"primary",onClick:d},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(u.$t("确定")),1)]),_:1})]),_:1})])]),_:1},8,["model"])]),_:1})]),_:1})}}});const A=Vue.defineComponent({setup(v){const{t:e}=B.global,V=[{name:e("修改密码"),key:1},{name:e("退出登录"),key:3}],n=Vue.ref(1),l=Vue.ref(e("修改密码")),t=naive.useMessage(),d=N(),u=naive.useDialog(),o=y(),r=E();function a(){u.info({title:e("提示"),content:e("您确定要退出登录吗"),positiveText:e("确定"),negativeText:e("取消"),onPositiveClick:()=>{d.logout().then(()=>{t.success("成功退出登录"),localStorage.removeItem("TABS-ROUTES"),o.replace({name:x.BASE_LOGIN_NAME,query:{redirect:r.fullPath}})})},onNegativeClick:()=>{}})}function p(s){s.key==3?a():(n.value=s.key,l.value=s.name)}return(s,C)=>{const _=Vue.resolveComponent("n-thing"),m=Vue.resolveComponent("n-list-item"),c=Vue.resolveComponent("n-list"),f=Vue.resolveComponent("n-grid-item"),g=Vue.resolveComponent("PM2"),F=Vue.resolveComponent("n-card"),h=Vue.resolveComponent("n-grid");return Vue.openBlock(),Vue.createBlock(h,{"x-gap":24},{default:Vue.withCtx(()=>[Vue.createVNode(f,{span:"6"},{default:Vue.withCtx(()=>[Vue.createVNode(c,null,{default:Vue.withCtx(()=>[Vue.createVNode(m,null,{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(V,i=>Vue.createVNode(_,{class:Vue.normalizeClass(["thing-cell",{"thing-cell-on":n.value===i.key}]),key:i.key,onClick:S=>p(i)},{header:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(i.name),1)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1})]),_:1}),Vue.createVNode(f,{span:"18"},{default:Vue.withCtx(()=>[Vue.createVNode(F,{bordered:!1,size:"small",title:l.value,class:"proCard"},{default:Vue.withCtx(()=>[n.value===1?(Vue.openBlock(),Vue.createBlock(b,{key:0})):Vue.createCommentVNode("",!0),n.value===2?(Vue.openBlock(),Vue.createBlock(g,{key:1})):Vue.createCommentVNode("",!0)]),_:1},8,["title"])]),_:1})]),_:1})}}}),P=k(A,[["__scopeId","data-v-f158d1de"]]);export{P as default};
