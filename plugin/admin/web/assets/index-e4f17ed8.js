import{d as p,al as S,U as _,_ as g,$ as r,f as i,u as e,E as m}from"./vue-14860272.js";import{ah as w,V as y,ag as x,a9 as n,aj as C}from"./index-6940427b.js";import{u as k}from"./index-79686afe.js";import"./dayjs-4778c158.js";import{_ as P}from"./scroll-tip.vue_vue_type_script_setup_true_lang-06a0e4f7.js";import{c as b}from"./global-3f00abc7.js";import{c as D}from"./utils-bc030ba0.js";import{s as v}from"./state-66ea399e.js";import{u as B}from"./usePlay-80bdb306.js";import{S as O}from"./index-3a962de2.js";import{C as T}from"./Card-8c66b56c.js";import"./mockjs-890b569b.js";import"./useModal-231cd172.js";import"./index-00d3628b.js";import"./index-e0c9a531.js";import"./index-54416d51.js";import"./index-8bf1b192.js";import"./useFlexGapSupport-d0720122.js";import"./jb4-6f943bfa.js";import"./gb28281-bee701fe.js";import"./index-8d59d51b.js";const $=p({name:"StreamPush"}),tt=p({...$,setup(E){w.renderer.add("State",{renderDefault(t,o){const{row:a}=o;return v[a.State]}});const l=k(),d=t=>{t.length>1&&(t=t.sort((o,a)=>Date.parse(o.StartTime)-Date.parse(a.StartTime))),l.tableRef.reloadData(t)};let s;function f(){s=b(t=>{d(t.Streams||[])})}f(),S(t=>{const{path:o}=t;o!=="/overview/detail"&&(s==null||s())});const u={maxHeight:"100%",rowConfig:{keyField:"Path",useKey:!0},columnConfig:{useKey:!0},columns:[{field:"Path",title:"StreamPath",showOverflow:"tooltip",minWidth:"340px"},{field:"State",title:"状态",showOverflow:"tooltip",cellRender:{name:"State"}},{field:"Type",title:"类型",showOverflow:"tooltip"},{field:"Subscribers",title:"订阅数量",showOverflow:"tooltip",width:"100px"},{field:"StartTime",title:"创建时间",minWidth:"100px",formatter:({cellValue:t})=>C.toDateString(new Date(t),"yyyy-MM-dd HH:ss:mm")},{field:"BPS",title:"BPS",formatter:({cellValue:t})=>`${D(t)}/s`},{field:"operate",title:"操作",width:"120px",align:"center",slots:{default:"operate"}}],data:[]},c=y(),h=t=>{c(`/stream-push/detail/${encodeURIComponent(t)}`)};return(t,o)=>(_(),g(e(T),{bordered:!1,bodyStyle:{padding:"10px",height:"100%"},style:{height:"100% - 100px)"}},{default:r(()=>[i(e(P),{windowWidth:1716}),i(e(x),{uid:e(l).uid,gridOptions:e(u)},{operate:r(({row:a})=>[i(e(O),null,{default:r(()=>[i(e(n),{size:"small",type:"link",onClick:()=>e(B)({path:a.Path})},{default:r(()=>[m(" 播放 ")]),_:2},1032,["onClick"]),i(e(n),{size:"small",type:"link",onClick:()=>h(a.Path)},{default:r(()=>[m(" 详情 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["uid","gridOptions"])]),_:1}))}});export{tt as default};
