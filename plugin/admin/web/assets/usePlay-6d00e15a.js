import{d as N,k as m,w as I,U as b,V as g,f as a,$ as n,a8 as i,a4 as d,_ as S,u as e,E as p,a3 as V}from"./vue-14860272.js";import{bm as P,af as x}from"./index-9471e750.js";import"./dayjs-4778c158.js";import{u as B}from"./useModal-7947e4f5.js";import{D as z,p as U}from"./index-9d94a5eb.js";import{V as $}from"./jb4-8ec36186.js";import{i as E,a as _}from"./gb28281-7f973980.js";import{a as T,D as f}from"./index-744a466c.js";import{C as w}from"./Card-16e79183.js";import{I as F}from"./index-e5b3ef59.js";const M={class:"h-full w-full flex flex-items-center"},O={class:"text-center"},W={class:"flex flex-items-center"},j=i("span",null,"播放速度",-1),q={class:"flex flex-items-center"},A=i("span",null,"暂停",-1),G=N({__name:"play",props:{path:null,id:null,deviceName:null,deviceID:null,channelName:null,type:null},setup(s){const l=s,h=m(1),v=m(!1),r={fontWeight:"bold"},k=m("ws-flv"),c=m("");I([()=>l.id,()=>l.path],([o,t])=>{t?c.value=t:o&&E({id:l.id,channel:l.deviceID}).finally(()=>{c.value=`${l.id}/${l.deviceID}`})},{immediate:!0});const u=()=>{const o=c.value.split("/");return{id:o[0],channel:o[1]}},C=async o=>{x.destroy(),await _({id:u().id,channel:u().channel,ptzcmd:o}).then(async t=>{x.success("指令发送成功"),D()}).catch(t=>{x.success("指令发送失败")})},D=()=>{setTimeout(async()=>{await _({id:u().id,channel:u().channel,ptzcmd:U()})})};return(o,t)=>(b(),g("div",M,[a($,{videoShadow:!0,streamPath:c.value,format:k.value,speed:h.value,pause:v.value,class:"flex-1 m-r-10px"},{default:n(()=>[i("div",O,d(c.value),1)]),_:1},8,["streamPath","format","speed","pause"]),s.id?(b(),S(e(w),{key:0,bordered:!1,class:"dark:bg-transparent",bodyStyle:{height:"100%",width:"280px"}},{default:n(()=>[a(z,{hanldeClick:C,allowed:""}),a(e(T),{column:1,class:"mt-20px",layout:"vertical"},{default:n(()=>[a(e(f),{class:"!pb-8px",labelStyle:e(r),label:"设备名称"},{default:n(()=>[p(d(s.deviceName||"--"),1)]),_:1},8,["labelStyle"]),a(e(f),{class:"!pb-8px",labelStyle:e(r),label:"设备编号"},{default:n(()=>[p(d(s.id||"--"),1)]),_:1},8,["labelStyle"]),a(e(f),{class:"!pb-8px",labelStyle:e(r),label:"通道名称"},{default:n(()=>[p(d(s.channelName||"--"),1)]),_:1},8,["labelStyle"]),a(e(f),{class:"!pb-8px",labelStyle:e(r),label:"通道编号"},{default:n(()=>[p(d(s.deviceID||"--"),1)]),_:1},8,["labelStyle"])]),_:1})]),_:1})):l.type==="vod"?(b(),S(e(w),{key:1},{default:n(()=>[i("div",W,[j,a(e(F),{value:h.value,"onUpdate:value":t[0]||(t[0]=y=>h.value=y),step:"0.5",max:"4",min:"0.5"},null,8,["value"])]),i("div",q,[A,a(e(P),{checked:v.value,"onUpdate:checked":t[1]||(t[1]=y=>v.value=y)},null,8,["checked"])])]),_:1})):V("",!0)]))}}),ae=(s,l)=>{B({content:()=>a(G,s,null),modalConfig:{width:"100%",wrapClassName:"full-antdv-modal",destroyOnClose:!0,footer:null,...l}})};export{ae as u};
