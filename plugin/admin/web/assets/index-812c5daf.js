import{d as _,r as A,U as f,V as v,f as o,W as h,a8 as S,u as m,$ as T,E as I,Y as U,o as P,w as C,k as x,F as B,a7 as E,_ as K,al as L}from"./vue-14860272.js";import{b as M,c as N}from"./global-1c872f23.js";import"./dayjs-4778c158.js";import{aj as R,q as W,az as O}from"./index-6c19eff1.js";import{S as F}from"./index-10cac5b2.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-cbe31c72.js";import{_ as H,S as y,l as Z,d as j,a as Y,b as q}from"./hard-disk.vue_vue_type_script_setup_true_lang-4ef142e0.js";import{g,a as z,b,c as k}from"./utils-69111216.js";import"./mockjs-890b569b.js";const J={class:"flex"},Q=_({__name:"top-info",props:{data:null,hardDisk:null},setup(u){const t=A({version:"",startTime:"",localIP:""});M().then(s=>{t.localIP=s.localIP,t.version=s.version,t.startTime=R.toDateString(new Date(s.startTime),"yyyy-MM-dd HH:ss:mm")}).catch(s=>{console.error(`getSysInfo-err: ${s}`)});const e="p-14px rounded-16px bg-#fff dark:bg-#100C2A flex-center flex-1 mr-10px";return(s,n)=>(f(),v("div",J,[o(H,{class:h([e,"min-w-320px"]),hardDisk:u.hardDisk},null,8,["hardDisk"]),S("div",{class:h([e,"min-w-140px"])},[o(m(F),{icon:"streams",size:"70",class:"text-#bb86fc"}),o(m(y),{title:"当前流数",value:u.data},null,8,["value"])]),S("div",{class:h([e,"min-w-210px flex-col flex-items-start"])},[o(m(y),{title:"本地IP",value:t.localIP,valueStyle:{fontSize:"18px",textAlign:"left"}},null,8,["value"]),o(m(y),{title:"启动时间",value:t.startTime,valueStyle:{fontSize:"18px"}},{suffix:T(()=>[I(" ["),o(m(G),{value:t.startTime,class:"text-primary"},null,8,["value"]),I("] ")]),_:1},8,["value"])]),S("div",{class:h([e,"min-w-180px !mr-0px"])},[o(m(y),{class:"overflow-auto",title:"当前版本",value:t.version,valueStyle:{fontSize:"18px"}},null,8,["value"])])]))}}),V=["id"],X=_({__name:"network-item",props:{network:null},setup(u){const t=u,e={text:t.network.name||"",receiveData:[g(t.network.receiveSpeed)],sentData:[g(t.network.sentSpeed)],timeData:[z()],sent:t.network.sent,receive:t.network.receive},s={backgroundColor:"",title:{text:e.text,top:-5},tooltip:{trigger:"axis",formatter:function(a){var c;var l=a[0].name+"<br>";for(let p of a)l+=((c=p.seriesName)==null?void 0:c.split(":")[0])+" : "+p.value+" KB/s <br>";return l}},legend:{data:[`发送: ${k(e.sent)}`,`接收: ${k(e.receive)}`],right:10},axisPointer:{link:{xAxisIndex:"all"}},grid:[{left:50,right:50,height:"35%"},{left:50,right:50,top:"55%",height:"35%"}],xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!0},data:e.timeData},{gridIndex:1,type:"category",boundaryGap:!1,axisLine:{onZero:!0},data:e.timeData,position:"top"}],yAxis:[{name:"发送 (KB/s)",type:"value"},{name:"接收 (KB/s)",gridIndex:1,type:"value",inverse:!0}],series:[{name:`发送: ${k(e.sent)}`,type:"line",smooth:!0,showSymbol:!0,data:e.sentData,label:{show:!0},lineStyle:{color:"#bb86fc"},itemStyle:{color:"#bb86fc"}},{name:`接收: ${k(e.receive)}`,type:"line",xAxisIndex:1,yAxisIndex:1,showSymbol:!0,data:e.receiveData,label:{show:!0},lineStyle:{color:"#5a00ff"},itemStyle:{color:"#5a00ff"}}]},{getDarkMode:n}=U(W());let r,i;P(()=>{d(!0)});const d=(a=!1)=>{a||(i==null||i.stop(),r&&j(r)),r=Z(t.network.name,s,m(n)),i=O(document.body,()=>{r&&(r==null||r.resize())})};return C(()=>t.network,a=>{e.text=a.name,e.timeData=b(e.timeData,z()),e.sentData=b(e.sentData,g(a.SentSpeed)),e.receiveData=b(e.receiveData,g(a.ReceiveSpeed)),e.sent=a.Sent,e.receive=a.Receive,r.setOption(s)},{immediate:!1}),C(()=>m(n),()=>d(!1)),(a,l)=>(f(),v("div",{id:u.network.name,class:"rounded-16px bg-#fff dark:bg-#100C2A h-328px p-14px"},null,8,V))}}),ee={class:"flex flex-wrap mt-8px"},te=_({__name:"network",setup(u,{expose:t}){const e=x([]);return t({handleUpdate:n=>{e.value=n}}),(n,r)=>(f(),v("div",ee,[(f(!0),v(B,null,E(e.value,i=>(f(),K(X,{key:i.name,network:i,class:"flex-1 min-w-380px mr-8px mb-8px"},null,8,["network"]))),128))]))}}),ae={class:"mt-8px flex"},se=_({name:"Overview"}),fe=_({...se,setup(u){const t=x(),e=x(),s=x(),n=x();let r;return(()=>{r=N(d=>{var a,l,c,p,w,D,$;t.value=d,(c=e==null?void 0:e.value)==null||c.handleUpdate((l=(a=t.value)==null?void 0:a.memory)==null?void 0:l.usage),(w=s==null?void 0:s.value)==null||w.handleUpdate(((p=t.value)==null?void 0:p.cpuUsage)||0),($=n==null?void 0:n.value)==null||$.handleUpdate((D=t.value)==null?void 0:D.netWork)})})(),L(d=>{const{path:a}=d;a!=="/stream-push/list"&&(r==null||r())}),(d,a)=>{var l,c;return f(),v(B,null,[o(Q,{hardDisk:(l=t.value)==null?void 0:l.hardDisk,data:((c=t.value)==null?void 0:c.streamCount)||0},null,8,["hardDisk","data"]),S("div",ae,[o(Y,{ref_key:"memoryRef",ref:e,class:"flex-1 mr-10px"},null,512),o(q,{ref_key:"cpuRef",ref:s,class:"flex-1"},null,512)]),o(te,{ref_key:"networkRef",ref:n},null,512)],64)}}});export{fe as default};
