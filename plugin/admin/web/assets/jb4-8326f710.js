import{d as Di,k as ci,r as Fi,b as Ri,s as yi,w as li,o as Oi,x as Ui,U as Mi,V as ji,t as Ii,A as Hi,f as Li,u as Wi,a8 as zi,W as Ni,af as xi}from"./vue-14860272.js";import"./dayjs-4778c158.js";import{au as Jn,bF as Bi,ae as Vi,N as qi}from"./index-6c19eff1.js";var Ir=($=>($.VideoCodecInfo="videoCodecInfo",$.VideoFrame="videoFrame",$.Error="error",$))(Ir||{}),Et=($=>($.AudioCodecInfo="audioCodecInfo",$.AudioFrame="audioFrame",$.Error="error",$))(Et||{}),Wn={},Gi={get exports(){return Wn},set exports($){Wn=$}};(function($){var d=Object.prototype.hasOwnProperty,s="~";function m(){}Object.create&&(m.prototype=Object.create(null),new m().__proto__||(s=!1));function y(j,E,M){this.fn=j,this.context=E,this.once=M||!1}function O(j,E,M,I,se){if(typeof M!="function")throw new TypeError("The listener must be a function");var ae=new y(M,I||j,se),oe=s?s+E:E;return j._events[oe]?j._events[oe].fn?j._events[oe]=[j._events[oe],ae]:j._events[oe].push(ae):(j._events[oe]=ae,j._eventsCount++),j}function R(j,E){--j._eventsCount===0?j._events=new m:delete j._events[E]}function q(){this._events=new m,this._eventsCount=0}q.prototype.eventNames=function(){var E=[],M,I;if(this._eventsCount===0)return E;for(I in M=this._events)d.call(M,I)&&E.push(s?I.slice(1):I);return Object.getOwnPropertySymbols?E.concat(Object.getOwnPropertySymbols(M)):E},q.prototype.listeners=function(E){var M=s?s+E:E,I=this._events[M];if(!I)return[];if(I.fn)return[I.fn];for(var se=0,ae=I.length,oe=new Array(ae);se<ae;se++)oe[se]=I[se].fn;return oe},q.prototype.listenerCount=function(E){var M=s?s+E:E,I=this._events[M];return I?I.fn?1:I.length:0},q.prototype.emit=function(E,M,I,se,ae,oe){var B=s?s+E:E;if(!this._events[B])return!1;var V=this._events[B],G=arguments.length,N,re;if(V.fn){switch(V.once&&this.removeListener(E,V.fn,void 0,!0),G){case 1:return V.fn.call(V.context),!0;case 2:return V.fn.call(V.context,M),!0;case 3:return V.fn.call(V.context,M,I),!0;case 4:return V.fn.call(V.context,M,I,se),!0;case 5:return V.fn.call(V.context,M,I,se,ae),!0;case 6:return V.fn.call(V.context,M,I,se,ae,oe),!0}for(re=1,N=new Array(G-1);re<G;re++)N[re-1]=arguments[re];V.fn.apply(V.context,N)}else{var we=V.length,J;for(re=0;re<we;re++)switch(V[re].once&&this.removeListener(E,V[re].fn,void 0,!0),G){case 1:V[re].fn.call(V[re].context);break;case 2:V[re].fn.call(V[re].context,M);break;case 3:V[re].fn.call(V[re].context,M,I);break;case 4:V[re].fn.call(V[re].context,M,I,se);break;default:if(!N)for(J=1,N=new Array(G-1);J<G;J++)N[J-1]=arguments[J];V[re].fn.apply(V[re].context,N)}}return!0},q.prototype.on=function(E,M,I){return O(this,E,M,I,!1)},q.prototype.once=function(E,M,I){return O(this,E,M,I,!0)},q.prototype.removeListener=function(E,M,I,se){var ae=s?s+E:E;if(!this._events[ae])return this;if(!M)return R(this,ae),this;var oe=this._events[ae];if(oe.fn)oe.fn===M&&(!se||oe.once)&&(!I||oe.context===I)&&R(this,ae);else{for(var B=0,V=[],G=oe.length;B<G;B++)(oe[B].fn!==M||se&&!oe[B].once||I&&oe[B].context!==I)&&V.push(oe[B]);V.length?this._events[ae]=V.length===1?V[0]:V:R(this,ae)}return this},q.prototype.removeAllListeners=function(E){var M;return E?(M=s?s+E:E,this._events[M]&&R(this,M)):(this._events=new m,this._eventsCount=0),this},q.prototype.off=q.prototype.removeListener,q.prototype.addListener=q.prototype.on,q.prefixed=s,q.EventEmitter=q,$.exports=q})(Gi);const wi=Symbol("instance"),di=Symbol("cacheResult");class hi{constructor(d,s,m){this.oldState=d,this.newState=s,this.action=m,this.aborted=!1}abort(d){this.aborted=!0,Ln.call(d,this.oldState,new Error(`action '${this.action}' aborted`))}toString(){return`${this.action}ing`}}class Qn extends Error{constructor(d,s,m){super(s),this.state=d,this.message=s,this.cause=m}}function Xi($){return typeof $=="object"&&$&&"then"in $}const Hn=new Map;function $e($,d,s={}){return(m,y,O)=>{const R=s.action||y;if(!s.context){const j=Hn.get(m)||[];Hn.has(m)||Hn.set(m,j),j.push({from:$,to:d,action:R})}const q=O.value;O.value=function(...j){let E=this;if(s.context&&(E=le.get(typeof s.context=="function"?s.context.call(this,...j):s.context)),E.state===d)return E[di];E.state instanceof hi&&E.state.action==s.abortAction&&E.state.abort(E);let M=null;if(Array.isArray($)?$.length==0?E.state instanceof hi&&E.state.abort(E):(typeof E.state!="string"||!$.includes(E.state))&&(M=new Qn(E._state,`${E.name} ${R} to ${d} failed: current state ${E._state} not in from config`)):$!==E.state&&(M=new Qn(E._state,`${E.name} ${R} to ${d} failed: current state ${E._state} not from ${$}`)),M)if(s.fail)s.fail.call(this,M);else{if(s.ignoreError)return M;throw M}const I=E.state,se=new hi(I,d,R);Ln.call(E,se);const ae=B=>{var V;return E[di]=B,se.aborted||(Ln.call(E,d),(V=s.success)===null||V===void 0||V.call(this,E[di])),B},oe=B=>{const V=B instanceof Error?B.message:String(B);if(Ln.call(E,I,B),s.fail)s.fail.call(this,new Qn(E._state,`action '${R}' failed :${V}`,B instanceof Error?B:new Error(V)));else{if(s.ignoreError)return B;throw B}};try{const B=q.apply(this,j);return Xi(B)?B.then(ae).catch(oe):ae(B)}catch(B){oe(B)}}}}function zn(...$){return(d,s,m)=>{const y=m.value,O=s;m.value=function(...R){if(!$.includes(this.state.toString()))throw new Qn(this.state,`${this.name} ${O} failed: current state ${this.state} not in ${$}`);return y.apply(this,R)}}}const Ki=(()=>typeof window<"u"&&window.__AFSM__?(s,m)=>{window.dispatchEvent(new CustomEvent(s,{detail:m}))}:typeof importScripts<"u"?(s,m)=>{postMessage({type:s,payload:m})}:()=>{})();function Ln($,d){const s=this._state;this._state=$;const m=$.toString();$&&this.emit(m,s),this.emit(le.STATECHANGED,$,s,d),this.updateDevTools({value:$,old:s,err:d instanceof Error?d.message:String(d)})}class le extends Wn{constructor(d,s,m){super(),this.name=d,this.groupName=s,this._state=le.INIT,d||(d=Date.now().toString(36)),m?Object.setPrototypeOf(this,m):m=Object.getPrototypeOf(this),s||(this.groupName=this.constructor.name);const y=m[wi];y?this.name=y.name+"-"+y.count++:m[wi]={name:this.name,count:0},this.updateDevTools({diagram:this.stateDiagram})}get stateDiagram(){const d=Object.getPrototypeOf(this),s=Hn.get(d)||[];let m=new Set,y=[],O=[];const R=new Set,q=Object.getPrototypeOf(d);Hn.has(q)&&(q.stateDiagram.forEach(E=>m.add(E)),q.allStates.forEach(E=>R.add(E))),s.forEach(({from:E,to:M,action:I})=>{typeof E=="string"?y.push({from:E,to:M,action:I}):E.length?E.forEach(se=>{y.push({from:se,to:M,action:I})}):O.push({to:M,action:I})}),y.forEach(({from:E,to:M,action:I})=>{R.add(E),R.add(M),R.add(I+"ing"),m.add(`${E} --> ${I}ing : ${I}`),m.add(`${I}ing --> ${M} : ${I} ðŸŸ¢`),m.add(`${I}ing --> ${E} : ${I} ðŸ”´`)}),O.forEach(({to:E,action:M})=>{m.add(`${M}ing --> ${E} : ${M} ðŸŸ¢`),R.forEach(I=>{I!==E&&m.add(`${I} --> ${M}ing : ${M}`)})});const j=[...m];return Object.defineProperties(d,{stateDiagram:{value:j},allStates:{value:R}}),j}static get(d){let s;return typeof d=="string"?(s=le.instances.get(d),s||le.instances.set(d,s=new le(d,void 0,Object.create(le.prototype)))):(s=le.instances2.get(d),s||le.instances2.set(d,s=new le(d.constructor.name,void 0,Object.create(le.prototype)))),s}static getState(d){var s;return(s=le.get(d))===null||s===void 0?void 0:s.state}updateDevTools(d={}){Ki(le.UPDATEAFSM,Object.assign({name:this.name,group:this.groupName},d))}get state(){return this._state}set state(d){Ln.call(this,d)}}le.STATECHANGED="stateChanged";le.UPDATEAFSM="updateAFSM";le.INIT="[*]";le.ON="on";le.OFF="off";le.instances=new Map;le.instances2=new WeakMap;var Zr=($=>($.CONNECTED="connected",$.DISCONNECTED="disconnected",$.RECONNECTED="reconnected",$))(Zr||{}),Yi=globalThis&&globalThis.__awaiter||function($,d,s,m){function y(O){return O instanceof s?O:new s(function(R){R(O)})}return new(s||(s=Promise))(function(O,R){function q(M){try{E(m.next(M))}catch(I){R(I)}}function j(M){try{E(m.throw(M))}catch(I){R(I)}}function E(M){M.done?O(M.value):y(M.value).then(q,j)}E((m=m.apply($,d||[])).next())})};const vi=Symbol(32),mi=Symbol(16),gi=Symbol(8);class Nn{constructor(d){this.g=d,this.consumed=0,d&&(this.need=d.next().value)}setG(d){this.g=d,this.demand(d.next().value,!0)}consume(){this.buffer&&this.consumed&&(this.buffer.copyWithin(0,this.consumed),this.buffer=this.buffer.subarray(0,this.buffer.length-this.consumed),this.consumed=0)}demand(d,s){return s&&this.consume(),this.need=d,this.flush()}read(d){return Yi(this,void 0,void 0,function*(){return this.lastReadPromise&&(yield this.lastReadPromise),this.lastReadPromise=new Promise((s,m)=>{var y;this.reject=m,this.resolve=R=>{delete this.lastReadPromise,delete this.resolve,delete this.need,s(R)},this.demand(d,!0)||(y=this.pull)===null||y===void 0||y.call(this,d)})})}readU32(){return this.read(vi)}readU16(){return this.read(mi)}readU8(){return this.read(gi)}close(){var d;this.g&&this.g.return(),this.buffer&&this.buffer.subarray(0,0),(d=this.reject)===null||d===void 0||d.call(this,new Error("EOF")),delete this.lastReadPromise}flush(){if(!this.buffer||!this.need)return;let d=null;const s=this.buffer.subarray(this.consumed);let m=0;const y=O=>s.length<(m=O);if(typeof this.need=="number"){if(y(this.need))return;d=s.subarray(0,m)}else if(this.need===vi){if(y(4))return;d=s[0]<<24|s[1]<<16|s[2]<<8|s[3]}else if(this.need===mi){if(y(2))return;d=s[0]<<8|s[1]}else if(this.need===gi){if(y(1))return;d=s[0]}else if("buffer"in this.need){if("byteOffset"in this.need){if(y(this.need.byteLength-this.need.byteOffset))return;new Uint8Array(this.need.buffer,this.need.byteOffset).set(s.subarray(0,m)),d=this.need}else if(this.g){this.g.throw(new Error("Unsupported type"));return}}else{if(y(this.need.byteLength))return;new Uint8Array(this.need).set(s.subarray(0,m)),d=this.need}return this.consumed+=m,this.g?this.demand(this.g.next(d).value,!0):this.resolve&&this.resolve(d),d}write(d){if(d instanceof Uint8Array?this.malloc(d.length).set(d):"buffer"in d?this.malloc(d.byteLength).set(new Uint8Array(d.buffer,d.byteOffset,d.byteLength)):this.malloc(d.byteLength).set(new Uint8Array(d)),this.g||this.resolve)this.flush();else return new Promise(s=>this.pull=s)}writeU32(d){this.malloc(4).set([d>>24&255,d>>16&255,d>>8&255,d&255]),this.flush()}writeU16(d){this.malloc(2).set([d>>8&255,d&255]),this.flush()}writeU8(d){this.malloc(1)[0]=d,this.flush()}malloc(d){if(this.buffer){const s=this.buffer.length,m=s+d;if(m<=this.buffer.buffer.byteLength-this.buffer.byteOffset)this.buffer=new Uint8Array(this.buffer.buffer,this.buffer.byteOffset,m);else{const y=new Uint8Array(m);y.set(this.buffer),this.buffer=y}return this.buffer.subarray(s,m)}else return this.buffer=new Uint8Array(d),this.buffer}}Nn.U32=vi;Nn.U16=mi;Nn.U8=gi;var Ji=Object.defineProperty,Qi=Object.getOwnPropertyDescriptor,xn=($,d,s,m)=>{for(var y=m>1?void 0:m?Qi(d,s):d,O=$.length-1,R;O>=0;O--)(R=$[O])&&(y=(m?R(d,s,y):R(y))||y);return m&&y&&Ji(d,s,y),y};function ki($,d=1,s=1){return $<=1?s:ki($-1,s,d+s)}function Zi($){const d=Math.round($/2)+1;return d>6?13*1e3:ki(d)*1e3}class _i{constructor(){this.total=0,this._buffer=0,this.lastTime=0,this._bps=0}add(d){const s=Date.now();this._buffer+=d,this.lastTime===0?this.lastTime=s:s-this.lastTime>1e3&&(this._bps=this._buffer*1e3/(s-this.lastTime)>>0,this._buffer=0,this.lastTime=s),this.total+=d}get bps(){return Date.now()-this.lastTime>5e3?0:this._bps}}class Lr extends le{constructor(d,s={}){super(d||"conn","Connection"),this.url=d,this.options=s,this.up=new _i,this.down=new _i,this.underlyingSink={write:async m=>{var y;return this.down.add(m.length||m.byteLength),(y=this.oput)==null?void 0:y.write(m)}},this.options.reconnectTimeout||(this.options.reconnectTimeout=Zi)}read(d){return Promise.reject("not connected")}async connect(){this.abortCtrl=new AbortController,`${this.url}`,console.time(this.url),this.onConnected(await this._connect())}_close(){}_send(d){}async reconnect(){`${this.url}`,console.time(this.url),this.abortCtrl=new AbortController,this.onConnected(await this._connect())}onConnected(d){if(console.timeEnd(this.url),!!d)return this.oput||(this.oput=new Nn),this.read=this.oput.read.bind(this.oput),d.pipeTo(new WritableStream(this.underlyingSink),this.abortCtrl).catch(s=>{this.abortCtrl.signal.aborted||this.disconnect(s)})}disconnect(d){console.warn(`disconnect: ${this.url}`,d),this.options.reconnectCount&&this.reconnectAfter()}reconnectAfter(d=1e3,s=0){setTimeout(()=>{this.reconnect().catch(m=>{`${this.url}`,s<this.options.reconnectCount&&this.reconnectAfter(this.options.reconnectTimeout(s),s+1)})},d)}close(){var d;(d=this.abortCtrl)==null||d.abort(),this._close()}send(d){this.up.add(d.byteLength-("byteOffset"in d?d.byteOffset:0)),this._send(d)}}xn([zn(Zr.CONNECTED)],Lr.prototype,"read",1);xn([$e([Zr.DISCONNECTED,le.INIT],Zr.CONNECTED)],Lr.prototype,"connect",1);xn([$e(Zr.DISCONNECTED,Zr.RECONNECTED)],Lr.prototype,"reconnect",1);xn([$e(Zr.CONNECTED,Zr.DISCONNECTED)],Lr.prototype,"disconnect",1);xn([$e([],le.INIT)],Lr.prototype,"close",1);class bi extends Lr{async _connect(){const d=new WebSocket(this.url);return this.ws=d,d.binaryType="arraybuffer",new Promise((s,m)=>{d.onerror=m,d.onopen=()=>{s(new ReadableStream({start:y=>{d.onclose=O=>y.error(O),d.onmessage=O=>y.enqueue(O.data)}}))}})}_close(){var d;(d=this.ws)==null||d.close(1e3,"close")}_send(d){var s;(s=this.ws)==null||s.send(d)}}class eo extends Lr{async _connect(){const d=await fetch(this.url,{...this.options.requestInit,signal:this.abortCtrl.signal});if(!d.body)throw new Error("no body");return d.body}}class ro extends Lr{constructor(d){super(d.label),this.dc=d}async _connect(){return new ReadableStream({start:d=>{this.dc.onclose=()=>{d.close()},this.dc.onerror=s=>{d.error(s)},this.dc.onmessage=s=>{d.enqueue(s.data)}}})}_close(){this.dc.close()}_send(d){this.dc.send(d)}}class to extends Wn.EventEmitter{constructor(d,s="recvonly"){super(),this.id=d,this.direction=s}get mediaStream(){return this._mediaStream}set mediaStream(d){this._mediaStream=d,d&&this.emit("change",d)}set audioTrack(d){if(this._audioTrack=d,this._mediaStream){const s=this._mediaStream.getAudioTracks()[0];s&&this._mediaStream.removeTrack(s)}d&&(this._mediaStream?this._mediaStream.addTrack(d):this._mediaStream=new MediaStream([d])),this._mediaStream&&this.emit("change",this._mediaStream)}get audioTrack(){var d;return this._audioTrack||((d=this._mediaStream)==null?void 0:d.getAudioTracks()[0])}set videoTrack(d){if(this._videoTrack=d,this._mediaStream){const s=this._mediaStream.getVideoTracks()[0];s&&this._mediaStream.removeTrack(s)}d&&(this._mediaStream?this._mediaStream.addTrack(d):this._mediaStream=new MediaStream([d])),this._mediaStream&&this.emit("change",this._mediaStream)}get videoTrack(){var d;return this._videoTrack||((d=this._mediaStream)==null?void 0:d.getVideoTracks()[0])}close(){this.emit("close")}}class no extends Lr{constructor(){super(...arguments),this.webrtc=new RTCPeerConnection(this.options.rtcConfig),this.streams=new Map,this.videoTransceiver=new Array,this.audioTransceiver=new Array}async _connect(){const d=await this.webrtc.createOffer();await this.webrtc.setLocalDescription(d);const m=await(await fetch(this.url,{method:"POST",body:d.sdp,...this.options.requestInit||{}})).text();return await this.webrtc.setRemoteDescription({type:"answer",sdp:m}),this.webrtc.ontrack=({track:y,streams:O,transceiver:R})=>{if(O.length){const q=this.streams.get(O[0].id);q&&q.direction==="recvonly"&&(q.mediaStream=O[0])}},new Promise((y,O)=>{this.webrtc.onconnectionstatechange=R=>{switch(this.webrtc.connectionState){case"disconnected":this.disconnect(R);break;case"connected":y();break;case"failed":O(R)}}})}addStream(d){return this.audioTransceiver.length?(d.audioTransceiver=this.audioTransceiver.pop(),d.audioTransceiver.direction=d.direction):d.audioTransceiver=this.webrtc.addTransceiver(d.audioTrack||"audio",{direction:d.direction}),this.videoTransceiver.length?(d.videoTransceiver=this.videoTransceiver.pop(),d.videoTransceiver.direction=d.direction):d.videoTransceiver=this.webrtc.addTransceiver(d.videoTrack||"video",{direction:d.direction}),this.streams.set(d.id,d),d}deleteStream(d){const s=this.streams.get(d);s&&(delete s.mediaStream,s.audioTransceiver.direction="inactive",s.videoTransceiver.direction="inactive",this.audioTransceiver.push(s.audioTransceiver),this.videoTransceiver.push(s.videoTransceiver),this.streams.delete(d))}_close(){var d;(d=this.webrtc)==null||d.close()}}var io=Object.defineProperty,oo=Object.getOwnPropertyDescriptor,Bn=($,d,s,m)=>{for(var y=m>1?void 0:m?oo(d,s):d,O=$.length-1,R;O>=0;O--)(R=$[O])&&(y=(m?R(d,s,y):R(y))||y);return m&&y&&io(d,s,y),y};class Vn extends le{constructor(d){super(),this.module={},this.width=0,this.height=0,this.createModule=d}initialize(d){return new Promise(s=>{const m=this.module;m.print=y=>console.log(y),m.printErr=y=>console.log(`[JS] ERROR: ${y}`),m.onAbort=()=>console.log("[JS] FATAL: WASM ABORTED"),m.postRun=y=>{this.decoder=new this.module.VideoDecoder(this),s()},d&&Object.assign(m,d),this.createModule(m)})}configure(d){this.config=d,this.decoder.setCodec(this.config.codec,this.config.description?"avcc":"annexb",this.config.description??"")}decode(d){this.decoder.decode(d.data,d.type=="key",d.timestamp)}flush(){}reset(){this.config=void 0,this.decoder&&this.decoder.clear()}close(){this.removeAllListeners(),this.decoder&&(this.decoder.clear(),this.decoder.delete())}videoInfo(d,s){this.width=d,this.height=s;let m={width:d,height:s};this.emit(Ir.VideoCodecInfo,m)}yuvData(d,s){if(!this.module)return;const m=this.width*this.height,y=m>>2;let O=this.module.HEAPU32[d>>2],R=this.module.HEAPU32[(d>>2)+1],q=this.module.HEAPU32[(d>>2)+2],j=this.module.HEAPU8.subarray(O,O+m),E=this.module.HEAPU8.subarray(R,R+y),M=this.module.HEAPU8.subarray(q,q+y);const I=new Uint8Array(m+y+y);I.set(j),I.set(E,m),I.set(M,m+y),this.emit(Ir.VideoFrame,new VideoFrame(I,{codedWidth:this.width,codedHeight:this.height,format:"I420",timestamp:s}))}errorInfo(d){let s={errMsg:d};this.emit(Ir.Error,s)}}Bn([$e([le.INIT,"closed"],"initialized")],Vn.prototype,"initialize",1);Bn([$e("initialized","configured")],Vn.prototype,"configure",1);Bn([zn("configured")],Vn.prototype,"decode",1);Bn([$e([],le.INIT)],Vn.prototype,"reset",1);Bn([$e([],"closed")],Vn.prototype,"close",1);(()=>{var $=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(d={}){var s=d,m,y;s.ready=new Promise((e,r)=>{m=e,y=r});var O=Object.assign({},s),R="./this.program",q=typeof window=="object",j=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var E="";function M(e){return s.locateFile?s.locateFile(e,E):E+e}var I,se,ae;(q||j)&&(j?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),$&&(E=$),E.indexOf("blob:")!==0?E=E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1):E="",I=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},j&&(ae=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),se=(e,r,t)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{if(n.status==200||n.status==0&&n.response){r(n.response);return}t()},n.onerror=t,n.send(null)});var oe=s.print||console.log.bind(console),B=s.printErr||console.error.bind(console);Object.assign(s,O),O=null,s.arguments&&s.arguments,s.thisProgram&&(R=s.thisProgram),s.quit&&s.quit;var V;s.wasmBinary&&(V=s.wasmBinary),s.noExitRuntime,typeof WebAssembly!="object"&&Fe("no native wasm support detected");var G,N,re=!1;function we(e,r){e||Fe(r)}var J,X,Pe,er,H,x,Wr,zr;function Pt(){var e=G.buffer;s.HEAP8=J=new Int8Array(e),s.HEAP16=Pe=new Int16Array(e),s.HEAP32=H=new Int32Array(e),s.HEAPU8=X=new Uint8Array(e),s.HEAPU16=er=new Uint16Array(e),s.HEAPU32=x=new Uint32Array(e),s.HEAPF32=Wr=new Float32Array(e),s.HEAPF64=zr=new Float64Array(e)}var et,rt=[],tt=[],nt=[];function Nt(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)br(s.preRun.shift());mr(rt)}function xt(){!s.noFSInit&&!i.init.initialized&&i.init(),i.ignorePermissions=!1,mr(tt)}function or(){if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)Vt(s.postRun.shift());mr(nt)}function br(e){rt.unshift(e)}function Bt(e){tt.unshift(e)}function Vt(e){nt.unshift(e)}var Ce=0,Xe=null;function Yn(e){return e}function Be(e){Ce++,s.monitorRunDependencies&&s.monitorRunDependencies(Ce)}function rr(e){if(Ce--,s.monitorRunDependencies&&s.monitorRunDependencies(Ce),Ce==0&&Xe){var r=Xe;Xe=null,r()}}function Fe(e){s.onAbort&&s.onAbort(e),e="Aborted("+e+")",B(e),re=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw y(r),r}var Ct="data:application/octet-stream;base64,";function it(e){return e.startsWith(Ct)}var He;He="videodec.wasm",it(He)||(He=M(He));function Er(e){if(e==He&&V)return new Uint8Array(V);if(ae)return ae(e);throw"both async and sync fetching of the wasm failed"}function qt(e){return!V&&(q||j)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at '"+e+"'";return r.arrayBuffer()}).catch(()=>Er(e)):Promise.resolve().then(()=>Er(e))}function Nr(e,r,t){return qt(e).then(n=>WebAssembly.instantiate(n,r)).then(n=>n).then(t,n=>{B("failed to asynchronously prepare wasm: "+n),Fe(n)})}function Gt(e,r,t,n){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!it(r)&&typeof fetch=="function"?fetch(r,{credentials:"same-origin"}).then(o=>{var a=WebAssembly.instantiateStreaming(o,t);return a.then(n,function(f){return B("wasm streaming compile failed: "+f),B("falling back to ArrayBuffer instantiation"),Nr(r,t,n)})}):Nr(r,t,n)}function Xt(){var e={a:fi};function r(n,o){var a=n.exports;return N=a,G=N.E,Pt(),et=N.H,Bt(N.F),rr(),a}Be();function t(n){r(n.instance)}if(s.instantiateWasm)try{return s.instantiateWasm(e,r)}catch(n){B("Module.instantiateWasm callback failed with error: "+n),y(n)}return Gt(V,He,e,t).catch(y),{}}var k,K,mr=e=>{for(;e.length>0;)e.shift()(s)};function Re(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(r){x[this.ptr+4>>2]=r},this.get_type=function(){return x[this.ptr+4>>2]},this.set_destructor=function(r){x[this.ptr+8>>2]=r},this.get_destructor=function(){return x[this.ptr+8>>2]},this.set_caught=function(r){r=r?1:0,J[this.ptr+12>>0]=r},this.get_caught=function(){return J[this.ptr+12>>0]!=0},this.set_rethrown=function(r){r=r?1:0,J[this.ptr+13>>0]=r},this.get_rethrown=function(){return J[this.ptr+13>>0]!=0},this.init=function(r,t){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(t)},this.set_adjusted_ptr=function(r){x[this.ptr+16>>2]=r},this.get_adjusted_ptr=function(){return x[this.ptr+16>>2]},this.get_exception_ptr=function(){var r=jn(this.get_type());if(r)return x[this.excPtr>>2];var t=this.get_adjusted_ptr();return t!==0?t:this.excPtr}}var tr=0;function sr(e,r,t){var n=new Re(e);throw n.init(r,t),tr=e,tr}var xr=e=>(H[Un()>>2]=e,e),z={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return r.exec(e).slice(1)},normalizeArray:(e,r)=>{for(var t=0,n=e.length-1;n>=0;n--){var o=e[n];o==="."?e.splice(n,1):o===".."?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(r)for(;t;t--)e.unshift("..");return e},normalize:e=>{var r=z.isAbs(e),t=e.substr(-1)==="/";return e=z.normalizeArray(e.split("/").filter(n=>!!n),!r).join("/"),!e&&!r&&(e="."),e&&t&&(e+="/"),(r?"/":"")+e},dirname:e=>{var r=z.splitPath(e),t=r[0],n=r[1];return!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)},basename:e=>{if(e==="/")return"/";e=z.normalize(e),e=e.replace(/\/$/,"");var r=e.lastIndexOf("/");return r===-1?e:e.substr(r+1)},join:function(){var e=Array.prototype.slice.call(arguments);return z.normalize(e.join("/"))},join2:(e,r)=>z.normalize(e+"/"+r)},ce=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);Fe("initRandomDevice")},Br=e=>(Br=ce())(e),ge={resolve:function(){for(var e="",r=!1,t=arguments.length-1;t>=-1&&!r;t--){var n=t>=0?arguments[t]:i.cwd();if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,r=z.isAbs(n)}return e=z.normalizeArray(e.split("/").filter(o=>!!o),!r).join("/"),(r?"/":"")+e||"."},relative:(e,r)=>{e=ge.resolve(e).substr(1),r=ge.resolve(r).substr(1);function t(p){for(var _=0;_<p.length&&p[_]==="";_++);for(var P=p.length-1;P>=0&&p[P]==="";P--);return _>P?[]:p.slice(_,P-_+1)}for(var n=t(e.split("/")),o=t(r.split("/")),a=Math.min(n.length,o.length),f=a,u=0;u<a;u++)if(n[u]!==o[u]){f=u;break}for(var v=[],u=f;u<n.length;u++)v.push("..");return v=v.concat(o.slice(f)),v.join("/")}},ar=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Le=(e,r,t)=>{for(var n=r+t,o=r;e[o]&&!(o>=n);)++o;if(o-r>16&&e.buffer&&ar)return ar.decode(e.subarray(r,o));for(var a="";r<o;){var f=e[r++];if(!(f&128)){a+=String.fromCharCode(f);continue}var u=e[r++]&63;if((f&224)==192){a+=String.fromCharCode((f&31)<<6|u);continue}var v=e[r++]&63;if((f&240)==224?f=(f&15)<<12|u<<6|v:f=(f&7)<<18|u<<12|v<<6|e[r++]&63,f<65536)a+=String.fromCharCode(f);else{var p=f-65536;a+=String.fromCharCode(55296|p>>10,56320|p&1023)}}return a},Oe=[],Pr=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n<=127?r++:n<=2047?r+=2:n>=55296&&n<=57343?(r+=4,++t):r+=3}return r},Cr=(e,r,t,n)=>{if(!(n>0))return 0;for(var o=t,a=t+n-1,f=0;f<e.length;++f){var u=e.charCodeAt(f);if(u>=55296&&u<=57343){var v=e.charCodeAt(++f);u=65536+((u&1023)<<10)|v&1023}if(u<=127){if(t>=a)break;r[t++]=u}else if(u<=2047){if(t+1>=a)break;r[t++]=192|u>>6,r[t++]=128|u&63}else if(u<=65535){if(t+2>=a)break;r[t++]=224|u>>12,r[t++]=128|u>>6&63,r[t++]=128|u&63}else{if(t+3>=a)break;r[t++]=240|u>>18,r[t++]=128|u>>12&63,r[t++]=128|u>>6&63,r[t++]=128|u&63}}return r[t]=0,t-o};function Tr(e,r,t){var n=t>0?t:Pr(e)+1,o=new Array(n),a=Cr(e,o,0,o.length);return r&&(o.length=a),o}var ot=()=>{if(!Oe.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e)return null;Oe=Tr(e,!0)}return Oe.shift()},ke={ttys:[],init:function(){},shutdown:function(){},register:function(e,r){ke.ttys[e]={input:[],output:[],ops:r},i.registerDevice(e,ke.stream_ops)},stream_ops:{open:function(e){var r=ke.ttys[e.node.rdev];if(!r)throw new i.ErrnoError(43);e.tty=r,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,r,t,n,o){if(!e.tty||!e.tty.ops.get_char)throw new i.ErrnoError(60);for(var a=0,f=0;f<n;f++){var u;try{u=e.tty.ops.get_char(e.tty)}catch{throw new i.ErrnoError(29)}if(u===void 0&&a===0)throw new i.ErrnoError(6);if(u==null)break;a++,r[t+f]=u}return a&&(e.node.timestamp=Date.now()),a},write:function(e,r,t,n,o){if(!e.tty||!e.tty.ops.put_char)throw new i.ErrnoError(60);try{for(var a=0;a<n;a++)e.tty.ops.put_char(e.tty,r[t+a])}catch{throw new i.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){return ot()},put_char:function(e,r){r===null||r===10?(oe(Le(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},fsync:function(e){e.output&&e.output.length>0&&(oe(Le(e.output,0)),e.output=[])},ioctl_tcgets:function(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets:function(e,r,t){return 0},ioctl_tiocgwinsz:function(e){return[24,80]}},default_tty1_ops:{put_char:function(e,r){r===null||r===10?(B(Le(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},fsync:function(e){e.output&&e.output.length>0&&(B(Le(e.output,0)),e.output=[])}}},Vr=e=>{Fe()},U={ops_table:null,mount(e){return U.createNode(null,"/",16895,0)},createNode(e,r,t,n){if(i.isBlkdev(t)||i.isFIFO(t))throw new i.ErrnoError(63);U.ops_table||(U.ops_table={dir:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr,lookup:U.node_ops.lookup,mknod:U.node_ops.mknod,rename:U.node_ops.rename,unlink:U.node_ops.unlink,rmdir:U.node_ops.rmdir,readdir:U.node_ops.readdir,symlink:U.node_ops.symlink},stream:{llseek:U.stream_ops.llseek}},file:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr},stream:{llseek:U.stream_ops.llseek,read:U.stream_ops.read,write:U.stream_ops.write,allocate:U.stream_ops.allocate,mmap:U.stream_ops.mmap,msync:U.stream_ops.msync}},link:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr,readlink:U.node_ops.readlink},stream:{}},chrdev:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr},stream:i.chrdev_stream_ops}});var o=i.createNode(e,r,t,n);return i.isDir(o.mode)?(o.node_ops=U.ops_table.dir.node,o.stream_ops=U.ops_table.dir.stream,o.contents={}):i.isFile(o.mode)?(o.node_ops=U.ops_table.file.node,o.stream_ops=U.ops_table.file.stream,o.usedBytes=0,o.contents=null):i.isLink(o.mode)?(o.node_ops=U.ops_table.link.node,o.stream_ops=U.ops_table.link.stream):i.isChrdev(o.mode)&&(o.node_ops=U.ops_table.chrdev.node,o.stream_ops=U.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[r]=o,e.timestamp=o.timestamp),o},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,r){var t=e.contents?e.contents.length:0;if(!(t>=r)){var n=1024*1024;r=Math.max(r,t*(t<n?2:1.125)>>>0),t!=0&&(r=Math.max(r,256));var o=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(o.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,r){if(e.usedBytes!=r)if(r==0)e.contents=null,e.usedBytes=0;else{var t=e.contents;e.contents=new Uint8Array(r),t&&e.contents.set(t.subarray(0,Math.min(r,e.usedBytes))),e.usedBytes=r}},node_ops:{getattr(e){var r={};return r.dev=i.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,i.isDir(e.mode)?r.size=4096:i.isFile(e.mode)?r.size=e.usedBytes:i.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.timestamp),r.mtime=new Date(e.timestamp),r.ctime=new Date(e.timestamp),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr(e,r){r.mode!==void 0&&(e.mode=r.mode),r.timestamp!==void 0&&(e.timestamp=r.timestamp),r.size!==void 0&&U.resizeFileStorage(e,r.size)},lookup(e,r){throw i.genericErrors[44]},mknod(e,r,t,n){return U.createNode(e,r,t,n)},rename(e,r,t){if(i.isDir(e.mode)){var n;try{n=i.lookupNode(r,t)}catch{}if(n)for(var o in n.contents)throw new i.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=t,r.contents[t]=e,r.timestamp=e.parent.timestamp,e.parent=r},unlink(e,r){delete e.contents[r],e.timestamp=Date.now()},rmdir(e,r){var t=i.lookupNode(e,r);for(var n in t.contents)throw new i.ErrnoError(55);delete e.contents[r],e.timestamp=Date.now()},readdir(e){var r=[".",".."];for(var t in e.contents)e.contents.hasOwnProperty(t)&&r.push(t);return r},symlink(e,r,t){var n=U.createNode(e,r,41471,0);return n.link=t,n},readlink(e){if(!i.isLink(e.mode))throw new i.ErrnoError(28);return e.link}},stream_ops:{read(e,r,t,n,o){var a=e.node.contents;if(o>=e.node.usedBytes)return 0;var f=Math.min(e.node.usedBytes-o,n);if(f>8&&a.subarray)r.set(a.subarray(o,o+f),t);else for(var u=0;u<f;u++)r[t+u]=a[o+u];return f},write(e,r,t,n,o,a){if(!n)return 0;var f=e.node;if(f.timestamp=Date.now(),r.subarray&&(!f.contents||f.contents.subarray)){if(a)return f.contents=r.subarray(t,t+n),f.usedBytes=n,n;if(f.usedBytes===0&&o===0)return f.contents=r.slice(t,t+n),f.usedBytes=n,n;if(o+n<=f.usedBytes)return f.contents.set(r.subarray(t,t+n),o),n}if(U.expandFileStorage(f,o+n),f.contents.subarray&&r.subarray)f.contents.set(r.subarray(t,t+n),o);else for(var u=0;u<n;u++)f.contents[o+u]=r[t+u];return f.usedBytes=Math.max(f.usedBytes,o+n),n},llseek(e,r,t){var n=r;if(t===1?n+=e.position:t===2&&i.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new i.ErrnoError(28);return n},allocate(e,r,t){U.expandFileStorage(e.node,r+t),e.node.usedBytes=Math.max(e.node.usedBytes,r+t)},mmap(e,r,t,n,o){if(!i.isFile(e.node.mode))throw new i.ErrnoError(43);var a,f,u=e.node.contents;if(!(o&2)&&u.buffer===J.buffer)f=!1,a=u.byteOffset;else{if((t>0||t+r<u.length)&&(u.subarray?u=u.subarray(t,t+r):u=Array.prototype.slice.call(u,t,t+r)),f=!0,a=Vr(),!a)throw new i.ErrnoError(48);J.set(u,a)}return{ptr:a,allocated:f}},msync(e,r,t,n,o){return U.stream_ops.write(e,r,0,n,t,!1),0}}},Tt=(e,r,t,n)=>{var o=n?"":`al ${e}`;se(e,a=>{we(a,`Loading data file "${e}" failed (no arrayBuffer).`),r(new Uint8Array(a)),o&&rr()},a=>{if(t)t();else throw`Loading data file "${e}" failed.`}),o&&Be()},$t=s.preloadPlugins||[];function kt(e,r,t,n){typeof Browser<"u"&&Browser.init();var o=!1;return $t.forEach(function(a){o||a.canHandle(r)&&(a.handle(e,r,t,n),o=!0)}),o}function Kt(e,r,t,n,o,a,f,u,v,p){var _=r?ge.resolve(z.join2(e,r)):e;function P(b){function w(A){p&&p(),u||i.createDataFile(e,r,A,n,o,v),a&&a(),rr()}kt(b,_,w,()=>{f&&f(),rr()})||w(b)}Be(),typeof t=="string"?Tt(t,b=>P(b),f):P(t)}function Yt(e){var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},t=r[e];if(typeof t>"u")throw new Error(`Unknown file open mode: ${e}`);return t}function Ke(e,r){var t=0;return e&&(t|=365),r&&(t|=146),t}var i={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,r={})=>{if(e=ge.resolve(e),!e)return{path:"",node:null};var t={follow_mount:!0,recurse_count:0};if(r=Object.assign(t,r),r.recurse_count>8)throw new i.ErrnoError(32);for(var n=e.split("/").filter(P=>!!P),o=i.root,a="/",f=0;f<n.length;f++){var u=f===n.length-1;if(u&&r.parent)break;if(o=i.lookupNode(o,n[f]),a=z.join2(a,n[f]),i.isMountpoint(o)&&(!u||u&&r.follow_mount)&&(o=o.mounted.root),!u||r.follow)for(var v=0;i.isLink(o.mode);){var p=i.readlink(a);a=ge.resolve(z.dirname(a),p);var _=i.lookupPath(a,{recurse_count:r.recurse_count+1});if(o=_.node,v++>40)throw new i.ErrnoError(32)}}return{path:a,node:o}},getPath:e=>{for(var r;;){if(i.isRoot(e)){var t=e.mount.mountpoint;return r?t[t.length-1]!=="/"?`${t}/${r}`:t+r:t}r=r?`${e.name}/${r}`:e.name,e=e.parent}},hashName:(e,r)=>{for(var t=0,n=0;n<r.length;n++)t=(t<<5)-t+r.charCodeAt(n)|0;return(e+t>>>0)%i.nameTable.length},hashAddNode:e=>{var r=i.hashName(e.parent.id,e.name);e.name_next=i.nameTable[r],i.nameTable[r]=e},hashRemoveNode:e=>{var r=i.hashName(e.parent.id,e.name);if(i.nameTable[r]===e)i.nameTable[r]=e.name_next;else for(var t=i.nameTable[r];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode:(e,r)=>{var t=i.mayLookup(e);if(t)throw new i.ErrnoError(t,e);for(var n=i.hashName(e.id,r),o=i.nameTable[n];o;o=o.name_next){var a=o.name;if(o.parent.id===e.id&&a===r)return o}return i.lookup(e,r)},createNode:(e,r,t,n)=>{var o=new i.FSNode(e,r,t,n);return i.hashAddNode(o),o},destroyNode:e=>{i.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>(e&61440)===32768,isDir:e=>(e&61440)===16384,isLink:e=>(e&61440)===40960,isChrdev:e=>(e&61440)===8192,isBlkdev:e=>(e&61440)===24576,isFIFO:e=>(e&61440)===4096,isSocket:e=>(e&49152)===49152,flagsToPermissionString:e=>{var r=["r","w","rw"][e&3];return e&512&&(r+="w"),r},nodePermissions:(e,r)=>i.ignorePermissions?0:r.includes("r")&&!(e.mode&292)||r.includes("w")&&!(e.mode&146)||r.includes("x")&&!(e.mode&73)?2:0,mayLookup:e=>{var r=i.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:2)},mayCreate:(e,r)=>{try{var t=i.lookupNode(e,r);return 20}catch{}return i.nodePermissions(e,"wx")},mayDelete:(e,r,t)=>{var n;try{n=i.lookupNode(e,r)}catch(a){return a.errno}var o=i.nodePermissions(e,"wx");if(o)return o;if(t){if(!i.isDir(n.mode))return 54;if(i.isRoot(n)||i.getPath(n)===i.cwd())return 10}else if(i.isDir(n.mode))return 31;return 0},mayOpen:(e,r)=>e?i.isLink(e.mode)?32:i.isDir(e.mode)&&(i.flagsToPermissionString(r)!=="r"||r&512)?31:i.nodePermissions(e,i.flagsToPermissionString(r)):44,MAX_OPEN_FDS:4096,nextfd:()=>{for(var e=0;e<=i.MAX_OPEN_FDS;e++)if(!i.streams[e])return e;throw new i.ErrnoError(33)},getStreamChecked:e=>{var r=i.getStream(e);if(!r)throw new i.ErrnoError(8);return r},getStream:e=>i.streams[e],createStream:(e,r=-1)=>(i.FSStream||(i.FSStream=function(){this.shared={}},i.FSStream.prototype={},Object.defineProperties(i.FSStream.prototype,{object:{get(){return this.node},set(t){this.node=t}},isRead:{get(){return(this.flags&2097155)!==1}},isWrite:{get(){return(this.flags&2097155)!==0}},isAppend:{get(){return this.flags&1024}},flags:{get(){return this.shared.flags},set(t){this.shared.flags=t}},position:{get(){return this.shared.position},set(t){this.shared.position=t}}})),e=Object.assign(new i.FSStream,e),r==-1&&(r=i.nextfd()),e.fd=r,i.streams[r]=e,e),closeStream:e=>{i.streams[e]=null},chrdev_stream_ops:{open:e=>{var r=i.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new i.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,r)=>e<<8|r,registerDevice:(e,r)=>{i.devices[e]={stream_ops:r}},getDevice:e=>i.devices[e],getMounts:e=>{for(var r=[],t=[e];t.length;){var n=t.pop();r.push(n),t.push.apply(t,n.mounts)}return r},syncfs:(e,r)=>{typeof e=="function"&&(r=e,e=!1),i.syncFSRequests++,i.syncFSRequests>1&&B(`warning: ${i.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var t=i.getMounts(i.root.mount),n=0;function o(f){return i.syncFSRequests--,r(f)}function a(f){if(f)return a.errored?void 0:(a.errored=!0,o(f));++n>=t.length&&o(null)}t.forEach(f=>{if(!f.type.syncfs)return a(null);f.type.syncfs(f,e,a)})},mount:(e,r,t)=>{var n=t==="/",o=!t,a;if(n&&i.root)throw new i.ErrnoError(10);if(!n&&!o){var f=i.lookupPath(t,{follow_mount:!1});if(t=f.path,a=f.node,i.isMountpoint(a))throw new i.ErrnoError(10);if(!i.isDir(a.mode))throw new i.ErrnoError(54)}var u={type:e,opts:r,mountpoint:t,mounts:[]},v=e.mount(u);return v.mount=u,u.root=v,n?i.root=v:a&&(a.mounted=u,a.mount&&a.mount.mounts.push(u)),v},unmount:e=>{var r=i.lookupPath(e,{follow_mount:!1});if(!i.isMountpoint(r.node))throw new i.ErrnoError(28);var t=r.node,n=t.mounted,o=i.getMounts(n);Object.keys(i.nameTable).forEach(f=>{for(var u=i.nameTable[f];u;){var v=u.name_next;o.includes(u.mount)&&i.destroyNode(u),u=v}}),t.mounted=null;var a=t.mount.mounts.indexOf(n);t.mount.mounts.splice(a,1)},lookup:(e,r)=>e.node_ops.lookup(e,r),mknod:(e,r,t)=>{var n=i.lookupPath(e,{parent:!0}),o=n.node,a=z.basename(e);if(!a||a==="."||a==="..")throw new i.ErrnoError(28);var f=i.mayCreate(o,a);if(f)throw new i.ErrnoError(f);if(!o.node_ops.mknod)throw new i.ErrnoError(63);return o.node_ops.mknod(o,a,r,t)},create:(e,r)=>(r=r!==void 0?r:438,r&=4095,r|=32768,i.mknod(e,r,0)),mkdir:(e,r)=>(r=r!==void 0?r:511,r&=1023,r|=16384,i.mknod(e,r,0)),mkdirTree:(e,r)=>{for(var t=e.split("/"),n="",o=0;o<t.length;++o)if(t[o]){n+="/"+t[o];try{i.mkdir(n,r)}catch(a){if(a.errno!=20)throw a}}},mkdev:(e,r,t)=>(typeof t>"u"&&(t=r,r=438),r|=8192,i.mknod(e,r,t)),symlink:(e,r)=>{if(!ge.resolve(e))throw new i.ErrnoError(44);var t=i.lookupPath(r,{parent:!0}),n=t.node;if(!n)throw new i.ErrnoError(44);var o=z.basename(r),a=i.mayCreate(n,o);if(a)throw new i.ErrnoError(a);if(!n.node_ops.symlink)throw new i.ErrnoError(63);return n.node_ops.symlink(n,o,e)},rename:(e,r)=>{var t=z.dirname(e),n=z.dirname(r),o=z.basename(e),a=z.basename(r),f,u,v;if(f=i.lookupPath(e,{parent:!0}),u=f.node,f=i.lookupPath(r,{parent:!0}),v=f.node,!u||!v)throw new i.ErrnoError(44);if(u.mount!==v.mount)throw new i.ErrnoError(75);var p=i.lookupNode(u,o),_=ge.relative(e,n);if(_.charAt(0)!==".")throw new i.ErrnoError(28);if(_=ge.relative(r,t),_.charAt(0)!==".")throw new i.ErrnoError(55);var P;try{P=i.lookupNode(v,a)}catch{}if(p!==P){var b=i.isDir(p.mode),w=i.mayDelete(u,o,b);if(w)throw new i.ErrnoError(w);if(w=P?i.mayDelete(v,a,b):i.mayCreate(v,a),w)throw new i.ErrnoError(w);if(!u.node_ops.rename)throw new i.ErrnoError(63);if(i.isMountpoint(p)||P&&i.isMountpoint(P))throw new i.ErrnoError(10);if(v!==u&&(w=i.nodePermissions(u,"w"),w))throw new i.ErrnoError(w);i.hashRemoveNode(p);try{u.node_ops.rename(p,v,a)}catch(A){throw A}finally{i.hashAddNode(p)}}},rmdir:e=>{var r=i.lookupPath(e,{parent:!0}),t=r.node,n=z.basename(e),o=i.lookupNode(t,n),a=i.mayDelete(t,n,!0);if(a)throw new i.ErrnoError(a);if(!t.node_ops.rmdir)throw new i.ErrnoError(63);if(i.isMountpoint(o))throw new i.ErrnoError(10);t.node_ops.rmdir(t,n),i.destroyNode(o)},readdir:e=>{var r=i.lookupPath(e,{follow:!0}),t=r.node;if(!t.node_ops.readdir)throw new i.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var r=i.lookupPath(e,{parent:!0}),t=r.node;if(!t)throw new i.ErrnoError(44);var n=z.basename(e),o=i.lookupNode(t,n),a=i.mayDelete(t,n,!1);if(a)throw new i.ErrnoError(a);if(!t.node_ops.unlink)throw new i.ErrnoError(63);if(i.isMountpoint(o))throw new i.ErrnoError(10);t.node_ops.unlink(t,n),i.destroyNode(o)},readlink:e=>{var r=i.lookupPath(e),t=r.node;if(!t)throw new i.ErrnoError(44);if(!t.node_ops.readlink)throw new i.ErrnoError(28);return ge.resolve(i.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,r)=>{var t=i.lookupPath(e,{follow:!r}),n=t.node;if(!n)throw new i.ErrnoError(44);if(!n.node_ops.getattr)throw new i.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>i.stat(e,!0),chmod:(e,r,t)=>{var n;if(typeof e=="string"){var o=i.lookupPath(e,{follow:!t});n=o.node}else n=e;if(!n.node_ops.setattr)throw new i.ErrnoError(63);n.node_ops.setattr(n,{mode:r&4095|n.mode&-4096,timestamp:Date.now()})},lchmod:(e,r)=>{i.chmod(e,r,!0)},fchmod:(e,r)=>{var t=i.getStreamChecked(e);i.chmod(t.node,r)},chown:(e,r,t,n)=>{var o;if(typeof e=="string"){var a=i.lookupPath(e,{follow:!n});o=a.node}else o=e;if(!o.node_ops.setattr)throw new i.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:(e,r,t)=>{i.chown(e,r,t,!0)},fchown:(e,r,t)=>{var n=i.getStreamChecked(e);i.chown(n.node,r,t)},truncate:(e,r)=>{if(r<0)throw new i.ErrnoError(28);var t;if(typeof e=="string"){var n=i.lookupPath(e,{follow:!0});t=n.node}else t=e;if(!t.node_ops.setattr)throw new i.ErrnoError(63);if(i.isDir(t.mode))throw new i.ErrnoError(31);if(!i.isFile(t.mode))throw new i.ErrnoError(28);var o=i.nodePermissions(t,"w");if(o)throw new i.ErrnoError(o);t.node_ops.setattr(t,{size:r,timestamp:Date.now()})},ftruncate:(e,r)=>{var t=i.getStreamChecked(e);if(!(t.flags&2097155))throw new i.ErrnoError(28);i.truncate(t.node,r)},utime:(e,r,t)=>{var n=i.lookupPath(e,{follow:!0}),o=n.node;o.node_ops.setattr(o,{timestamp:Math.max(r,t)})},open:(e,r,t)=>{if(e==="")throw new i.ErrnoError(44);r=typeof r=="string"?Yt(r):r,t=typeof t>"u"?438:t,r&64?t=t&4095|32768:t=0;var n;if(typeof e=="object")n=e;else{e=z.normalize(e);try{var o=i.lookupPath(e,{follow:!(r&131072)});n=o.node}catch{}}var a=!1;if(r&64)if(n){if(r&128)throw new i.ErrnoError(20)}else n=i.mknod(e,t,0),a=!0;if(!n)throw new i.ErrnoError(44);if(i.isChrdev(n.mode)&&(r&=-513),r&65536&&!i.isDir(n.mode))throw new i.ErrnoError(54);if(!a){var f=i.mayOpen(n,r);if(f)throw new i.ErrnoError(f)}r&512&&!a&&i.truncate(n,0),r&=-131713;var u=i.createStream({node:n,path:i.getPath(n),flags:r,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return u.stream_ops.open&&u.stream_ops.open(u),s.logReadFiles&&!(r&1)&&(i.readFiles||(i.readFiles={}),e in i.readFiles||(i.readFiles[e]=1)),u},close:e=>{if(i.isClosed(e))throw new i.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(r){throw r}finally{i.closeStream(e.fd)}e.fd=null},isClosed:e=>e.fd===null,llseek:(e,r,t)=>{if(i.isClosed(e))throw new i.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new i.ErrnoError(70);if(t!=0&&t!=1&&t!=2)throw new i.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,t),e.ungotten=[],e.position},read:(e,r,t,n,o)=>{if(n<0||o<0)throw new i.ErrnoError(28);if(i.isClosed(e))throw new i.ErrnoError(8);if((e.flags&2097155)===1)throw new i.ErrnoError(8);if(i.isDir(e.node.mode))throw new i.ErrnoError(31);if(!e.stream_ops.read)throw new i.ErrnoError(28);var a=typeof o<"u";if(!a)o=e.position;else if(!e.seekable)throw new i.ErrnoError(70);var f=e.stream_ops.read(e,r,t,n,o);return a||(e.position+=f),f},write:(e,r,t,n,o,a)=>{if(n<0||o<0)throw new i.ErrnoError(28);if(i.isClosed(e))throw new i.ErrnoError(8);if(!(e.flags&2097155))throw new i.ErrnoError(8);if(i.isDir(e.node.mode))throw new i.ErrnoError(31);if(!e.stream_ops.write)throw new i.ErrnoError(28);e.seekable&&e.flags&1024&&i.llseek(e,0,2);var f=typeof o<"u";if(!f)o=e.position;else if(!e.seekable)throw new i.ErrnoError(70);var u=e.stream_ops.write(e,r,t,n,o,a);return f||(e.position+=u),u},allocate:(e,r,t)=>{if(i.isClosed(e))throw new i.ErrnoError(8);if(r<0||t<=0)throw new i.ErrnoError(28);if(!(e.flags&2097155))throw new i.ErrnoError(8);if(!i.isFile(e.node.mode)&&!i.isDir(e.node.mode))throw new i.ErrnoError(43);if(!e.stream_ops.allocate)throw new i.ErrnoError(138);e.stream_ops.allocate(e,r,t)},mmap:(e,r,t,n,o)=>{if(n&2&&!(o&2)&&(e.flags&2097155)!==2)throw new i.ErrnoError(2);if((e.flags&2097155)===1)throw new i.ErrnoError(2);if(!e.stream_ops.mmap)throw new i.ErrnoError(43);return e.stream_ops.mmap(e,r,t,n,o)},msync:(e,r,t,n,o)=>e.stream_ops.msync?e.stream_ops.msync(e,r,t,n,o):0,munmap:e=>0,ioctl:(e,r,t)=>{if(!e.stream_ops.ioctl)throw new i.ErrnoError(59);return e.stream_ops.ioctl(e,r,t)},readFile:(e,r={})=>{if(r.flags=r.flags||0,r.encoding=r.encoding||"binary",r.encoding!=="utf8"&&r.encoding!=="binary")throw new Error(`Invalid encoding type "${r.encoding}"`);var t,n=i.open(e,r.flags),o=i.stat(e),a=o.size,f=new Uint8Array(a);return i.read(n,f,0,a,0),r.encoding==="utf8"?t=Le(f,0):r.encoding==="binary"&&(t=f),i.close(n),t},writeFile:(e,r,t={})=>{t.flags=t.flags||577;var n=i.open(e,t.flags,t.mode);if(typeof r=="string"){var o=new Uint8Array(Pr(r)+1),a=Cr(r,o,0,o.length);i.write(n,o,0,a,void 0,t.canOwn)}else if(ArrayBuffer.isView(r))i.write(n,r,0,r.byteLength,void 0,t.canOwn);else throw new Error("Unsupported data type");i.close(n)},cwd:()=>i.currentPath,chdir:e=>{var r=i.lookupPath(e,{follow:!0});if(r.node===null)throw new i.ErrnoError(44);if(!i.isDir(r.node.mode))throw new i.ErrnoError(54);var t=i.nodePermissions(r.node,"x");if(t)throw new i.ErrnoError(t);i.currentPath=r.path},createDefaultDirectories:()=>{i.mkdir("/tmp"),i.mkdir("/home"),i.mkdir("/home/web_user")},createDefaultDevices:()=>{i.mkdir("/dev"),i.registerDevice(i.makedev(1,3),{read:()=>0,write:(n,o,a,f,u)=>f}),i.mkdev("/dev/null",i.makedev(1,3)),ke.register(i.makedev(5,0),ke.default_tty_ops),ke.register(i.makedev(6,0),ke.default_tty1_ops),i.mkdev("/dev/tty",i.makedev(5,0)),i.mkdev("/dev/tty1",i.makedev(6,0));var e=new Uint8Array(1024),r=0,t=()=>(r===0&&(r=Br(e).byteLength),e[--r]);i.createDevice("/dev","random",t),i.createDevice("/dev","urandom",t),i.mkdir("/dev/shm"),i.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{i.mkdir("/proc");var e=i.mkdir("/proc/self");i.mkdir("/proc/self/fd"),i.mount({mount:()=>{var r=i.createNode(e,"fd",16895,73);return r.node_ops={lookup:(t,n)=>{var o=+n,a=i.getStreamChecked(o),f={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>a.path}};return f.parent=f,f}},r}},{},"/proc/self/fd")},createStandardStreams:()=>{s.stdin?i.createDevice("/dev","stdin",s.stdin):i.symlink("/dev/tty","/dev/stdin"),s.stdout?i.createDevice("/dev","stdout",null,s.stdout):i.symlink("/dev/tty","/dev/stdout"),s.stderr?i.createDevice("/dev","stderr",null,s.stderr):i.symlink("/dev/tty1","/dev/stderr"),i.open("/dev/stdin",0),i.open("/dev/stdout",1),i.open("/dev/stderr",1)},ensureErrnoError:()=>{i.ErrnoError||(i.ErrnoError=function(r,t){this.name="ErrnoError",this.node=t,this.setErrno=function(n){this.errno=n},this.setErrno(r),this.message="FS error"},i.ErrnoError.prototype=new Error,i.ErrnoError.prototype.constructor=i.ErrnoError,[44].forEach(e=>{i.genericErrors[e]=new i.ErrnoError(e),i.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:()=>{i.ensureErrnoError(),i.nameTable=new Array(4096),i.mount(U,{},"/"),i.createDefaultDirectories(),i.createDefaultDevices(),i.createSpecialDirectories(),i.filesystems={MEMFS:U}},init:(e,r,t)=>{i.init.initialized=!0,i.ensureErrnoError(),s.stdin=e||s.stdin,s.stdout=r||s.stdout,s.stderr=t||s.stderr,i.createStandardStreams()},quit:()=>{i.init.initialized=!1;for(var e=0;e<i.streams.length;e++){var r=i.streams[e];r&&i.close(r)}},findObject:(e,r)=>{var t=i.analyzePath(e,r);return t.exists?t.object:null},analyzePath:(e,r)=>{try{var t=i.lookupPath(e,{follow:!r});e=t.path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var t=i.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=t.path,n.parentObject=t.node,n.name=z.basename(e),t=i.lookupPath(e,{follow:!r}),n.exists=!0,n.path=t.path,n.object=t.node,n.name=t.node.name,n.isRoot=t.path==="/"}catch(o){n.error=o.errno}return n},createPath:(e,r,t,n)=>{e=typeof e=="string"?e:i.getPath(e);for(var o=r.split("/").reverse();o.length;){var a=o.pop();if(a){var f=z.join2(e,a);try{i.mkdir(f)}catch{}e=f}}return f},createFile:(e,r,t,n,o)=>{var a=z.join2(typeof e=="string"?e:i.getPath(e),r),f=Ke(n,o);return i.create(a,f)},createDataFile:(e,r,t,n,o,a)=>{var f=r;e&&(e=typeof e=="string"?e:i.getPath(e),f=r?z.join2(e,r):e);var u=Ke(n,o),v=i.create(f,u);if(t){if(typeof t=="string"){for(var p=new Array(t.length),_=0,P=t.length;_<P;++_)p[_]=t.charCodeAt(_);t=p}i.chmod(v,u|146);var b=i.open(v,577);i.write(b,t,0,t.length,0,a),i.close(b),i.chmod(v,u)}return v},createDevice:(e,r,t,n)=>{var o=z.join2(typeof e=="string"?e:i.getPath(e),r),a=Ke(!!t,!!n);i.createDevice.major||(i.createDevice.major=64);var f=i.makedev(i.createDevice.major++,0);return i.registerDevice(f,{open:u=>{u.seekable=!1},close:u=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(u,v,p,_,P)=>{for(var b=0,w=0;w<_;w++){var A;try{A=t()}catch{throw new i.ErrnoError(29)}if(A===void 0&&b===0)throw new i.ErrnoError(6);if(A==null)break;b++,v[p+w]=A}return b&&(u.node.timestamp=Date.now()),b},write:(u,v,p,_,P)=>{for(var b=0;b<_;b++)try{n(v[p+b])}catch{throw new i.ErrnoError(29)}return _&&(u.node.timestamp=Date.now()),b}}),i.mkdev(o,a,f)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(I)try{e.contents=Tr(I(e.url),!0),e.usedBytes=e.contents.length}catch{throw new i.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(e,r,t,n,o)=>{function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(w){if(!(w>this.length-1||w<0)){var A=w%this.chunkSize,Y=w/this.chunkSize|0;return this.getter(Y)[A]}},a.prototype.setDataGetter=function(w){this.getter=w},a.prototype.cacheLength=function(){var w=new XMLHttpRequest;if(w.open("HEAD",t,!1),w.send(null),!(w.status>=200&&w.status<300||w.status===304))throw new Error("Couldn't load "+t+". Status: "+w.status);var A=Number(w.getResponseHeader("Content-length")),Y,Q=(Y=w.getResponseHeader("Accept-Ranges"))&&Y==="bytes",ne=(Y=w.getResponseHeader("Content-Encoding"))&&Y==="gzip",pe=1024*1024;Q||(pe=A);var Z=(ve,Ae)=>{if(ve>Ae)throw new Error("invalid range ("+ve+", "+Ae+") or no bytes requested!");if(Ae>A-1)throw new Error("only "+A+" bytes available! programmer error!");var ie=new XMLHttpRequest;if(ie.open("GET",t,!1),A!==pe&&ie.setRequestHeader("Range","bytes="+ve+"-"+Ae),ie.responseType="arraybuffer",ie.overrideMimeType&&ie.overrideMimeType("text/plain; charset=x-user-defined"),ie.send(null),!(ie.status>=200&&ie.status<300||ie.status===304))throw new Error("Couldn't load "+t+". Status: "+ie.status);return ie.response!==void 0?new Uint8Array(ie.response||[]):Tr(ie.responseText||"",!0)},xe=this;xe.setDataGetter(ve=>{var Ae=ve*pe,ie=(ve+1)*pe-1;if(ie=Math.min(ie,A-1),typeof xe.chunks[ve]>"u"&&(xe.chunks[ve]=Z(Ae,ie)),typeof xe.chunks[ve]>"u")throw new Error("doXHR failed!");return xe.chunks[ve]}),(ne||!A)&&(pe=A=1,A=this.getter(0).length,pe=A,oe("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=A,this._chunkSize=pe,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!j)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var f=new a;Object.defineProperties(f,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var u={isDevice:!1,contents:f}}else var u={isDevice:!1,url:t};var v=i.createFile(e,r,u,n,o);u.contents?v.contents=u.contents:u.url&&(v.contents=null,v.url=u.url),Object.defineProperties(v,{usedBytes:{get:function(){return this.contents.length}}});var p={},_=Object.keys(v.stream_ops);_.forEach(b=>{var w=v.stream_ops[b];p[b]=function(){return i.forceLoadFile(v),w.apply(null,arguments)}});function P(b,w,A,Y,Q){var ne=b.node.contents;if(Q>=ne.length)return 0;var pe=Math.min(ne.length-Q,Y);if(ne.slice)for(var Z=0;Z<pe;Z++)w[A+Z]=ne[Q+Z];else for(var Z=0;Z<pe;Z++)w[A+Z]=ne.get(Q+Z);return pe}return p.read=(b,w,A,Y,Q)=>(i.forceLoadFile(v),P(b,w,A,Y,Q)),p.mmap=(b,w,A,Y,Q)=>{i.forceLoadFile(v);var ne=Vr();if(!ne)throw new i.ErrnoError(48);return P(b,J,ne,w,A),{ptr:ne,allocated:!0}},v.stream_ops=p,v}},ur=(e,r)=>e?Le(X,e,r):"",ue={DEFAULT_POLLMASK:5,calculateAt:function(e,r,t){if(z.isAbs(r))return r;var n;if(e===-100)n=i.cwd();else{var o=ue.getStreamFromFD(e);n=o.path}if(r.length==0){if(!t)throw new i.ErrnoError(44);return n}return z.join2(n,r)},doStat:function(e,r,t){try{var n=e(r)}catch(u){if(u&&u.node&&z.normalize(r)!==z.normalize(i.getPath(u.node)))return-54;throw u}H[t>>2]=n.dev,H[t+4>>2]=n.mode,x[t+8>>2]=n.nlink,H[t+12>>2]=n.uid,H[t+16>>2]=n.gid,H[t+20>>2]=n.rdev,K=[n.size>>>0,(k=n.size,+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[t+24>>2]=K[0],H[t+28>>2]=K[1],H[t+32>>2]=4096,H[t+36>>2]=n.blocks;var o=n.atime.getTime(),a=n.mtime.getTime(),f=n.ctime.getTime();return K=[Math.floor(o/1e3)>>>0,(k=Math.floor(o/1e3),+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[t+40>>2]=K[0],H[t+44>>2]=K[1],x[t+48>>2]=o%1e3*1e3,K=[Math.floor(a/1e3)>>>0,(k=Math.floor(a/1e3),+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[t+56>>2]=K[0],H[t+60>>2]=K[1],x[t+64>>2]=a%1e3*1e3,K=[Math.floor(f/1e3)>>>0,(k=Math.floor(f/1e3),+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[t+72>>2]=K[0],H[t+76>>2]=K[1],x[t+80>>2]=f%1e3*1e3,K=[n.ino>>>0,(k=n.ino,+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[t+88>>2]=K[0],H[t+92>>2]=K[1],0},doMsync:function(e,r,t,n,o){if(!i.isFile(r.node.mode))throw new i.ErrnoError(43);if(n&2)return 0;var a=X.slice(e,e+t);i.msync(r,a,o,t,n)},varargs:void 0,get(){ue.varargs+=4;var e=H[ue.varargs-4>>2];return e},getStr(e){var r=ur(e);return r},getStreamFromFD:function(e){var r=i.getStreamChecked(e);return r}};function Jt(e,r,t){ue.varargs=t;try{var n=ue.getStreamFromFD(e);switch(r){case 0:{var o=ue.get();if(o<0)return-28;var a;return a=i.createStream(n,o),a.fd}case 1:case 2:return 0;case 3:return n.flags;case 4:{var o=ue.get();return n.flags|=o,0}case 5:{var o=ue.get(),f=0;return Pe[o+f>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return xr(28),-1;default:return-28}}catch(u){if(typeof i>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}function $r(e,r,t,n){ue.varargs=n;try{r=ue.getStr(r),r=ue.calculateAt(e,r);var o=n?ue.get():0;return i.open(r,t,o).fd}catch(a){if(typeof i>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function Qt(e,r,t,n,o){}function kr(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function qr(){for(var e=new Array(256),r=0;r<256;++r)e[r]=String.fromCharCode(r);st=e}var st=void 0;function de(e){for(var r="",t=e;X[t];)r+=st[X[t++]];return r}var We={},Ue={},fr={},ze=void 0;function L(e){throw new ze(e)}var Ve=void 0;function cr(e){throw new Ve(e)}function Ye(e,r,t){e.forEach(function(u){fr[u]=r});function n(u){var v=t(u);v.length!==e.length&&cr("Mismatched type converter count");for(var p=0;p<e.length;++p)ye(e[p],v[p])}var o=new Array(r.length),a=[],f=0;r.forEach((u,v)=>{Ue.hasOwnProperty(u)?o[v]=Ue[u]:(a.push(u),We.hasOwnProperty(u)||(We[u]=[]),We[u].push(()=>{o[v]=Ue[u],++f,f===a.length&&n(o)}))}),a.length===0&&n(o)}function Gr(e,r,t={}){var n=r.name;if(e||L(`type "${n}" must have a positive integer typeid pointer`),Ue.hasOwnProperty(e)){if(t.ignoreDuplicateRegistrations)return;L(`Cannot register type '${n}' twice`)}if(Ue[e]=r,delete fr[e],We.hasOwnProperty(e)){var o=We[e];delete We[e],o.forEach(a=>a())}}function ye(e,r,t={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Gr(e,r,t)}function St(e,r,t,n,o){var a=kr(t);r=de(r),ye(e,{name:r,fromWireType:function(f){return!!f},toWireType:function(f,u){return u?n:o},argPackAdvance:8,readValueFromPointer:function(f){var u;if(t===1)u=J;else if(t===2)u=Pe;else if(t===4)u=H;else throw new TypeError("Unknown boolean type size: "+r);return this.fromWireType(u[f>>a])},destructorFunction:null})}function Zt(e){if(!(this instanceof Te)||!(e instanceof Te))return!1;for(var r=this.$$.ptrType.registeredClass,t=this.$$.ptr,n=e.$$.ptrType.registeredClass,o=e.$$.ptr;r.baseClass;)t=r.upcast(t),r=r.baseClass;for(;n.baseClass;)o=n.upcast(o),n=n.baseClass;return r===n&&t===o}function en(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function lr(e){function r(t){return t.$$.ptrType.registeredClass.name}L(r(e)+" instance already deleted")}var Sr=!1;function at(e){}function rn(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function gr(e){e.count.value-=1;var r=e.count.value===0;r&&rn(e)}function ut(e,r,t){if(r===t)return e;if(t.baseClass===void 0)return null;var n=ut(e,r,t.baseClass);return n===null?null:t.downcast(n)}var ft={};function tn(){return Object.keys(Qe).length}function nn(){var e=[];for(var r in Qe)Qe.hasOwnProperty(r)&&e.push(Qe[r]);return e}var _e=[];function Ar(){for(;_e.length;){var e=_e.pop();e.$$.deleteScheduled=!1,e.delete()}}var Je=void 0;function Xr(e){Je=e,_e.length&&Je&&Je(Ar)}function At(){s.getInheritedInstanceCount=tn,s.getLiveInheritedInstances=nn,s.flushPendingDeletes=Ar,s.setDelayFunction=Xr}var Qe={};function on(e,r){for(r===void 0&&L("ptr should not be undefined");e.baseClass;)r=e.upcast(r),e=e.baseClass;return r}function yr(e,r){return r=on(e,r),Qe[r]}function dr(e,r){(!r.ptrType||!r.ptr)&&cr("makeClassHandle requires ptr and ptrType");var t=!!r.smartPtrType,n=!!r.smartPtr;return t!==n&&cr("Both smartPtrType and smartPtr must be specified"),r.count={value:1},qe(Object.create(e,{$$:{value:r}}))}function Dt(e){var r=this.getPointee(e);if(!r)return this.destructor(e),null;var t=yr(this.registeredClass,r);if(t!==void 0){if(t.$$.count.value===0)return t.$$.ptr=r,t.$$.smartPtr=e,t.clone();var n=t.clone();return this.destructor(e),n}function o(){return this.isSmartPointer?dr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:e}):dr(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var a=this.registeredClass.getActualType(r),f=ft[a];if(!f)return o.call(this);var u;this.isConst?u=f.constPointerType:u=f.pointerType;var v=ut(r,this.registeredClass,u.registeredClass);return v===null?o.call(this):this.isSmartPointer?dr(u.registeredClass.instancePrototype,{ptrType:u,ptr:v,smartPtrType:this,smartPtr:e}):dr(u.registeredClass.instancePrototype,{ptrType:u,ptr:v})}var qe=function(e){return typeof FinalizationRegistry>"u"?(qe=r=>r,e):(Sr=new FinalizationRegistry(r=>{gr(r.$$)}),qe=r=>{var t=r.$$,n=!!t.smartPtr;if(n){var o={$$:t};Sr.register(r,o,r)}return r},at=r=>Sr.unregister(r),qe(e))};function ct(){if(this.$$.ptr||lr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=qe(Object.create(Object.getPrototypeOf(this),{$$:{value:en(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function sn(){this.$$.ptr||lr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&L("Object already scheduled for deletion"),at(this),gr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Ft(){return!this.$$.ptr}function an(){return this.$$.ptr||lr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&L("Object already scheduled for deletion"),_e.push(this),_e.length===1&&Je&&Je(Ar),this.$$.deleteScheduled=!0,this}function Rt(){Te.prototype.isAliasOf=Zt,Te.prototype.clone=ct,Te.prototype.delete=sn,Te.prototype.isDeleted=Ft,Te.prototype.deleteLater=an}function Te(){}var un=48,fn=57;function hr(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return r>=un&&r<=fn?`_${e}`:e}function wr(e,r){return e=hr(e),{[e]:function(){return r.apply(this,arguments)}}[e]}function Me(e,r,t){if(e[r].overloadTable===void 0){var n=e[r];e[r]=function(){return e[r].overloadTable.hasOwnProperty(arguments.length)||L(`Function '${t}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[r].overloadTable})!`),e[r].overloadTable[arguments.length].apply(this,arguments)},e[r].overloadTable=[],e[r].overloadTable[n.argCount]=n}}function Ot(e,r,t){s.hasOwnProperty(e)?((t===void 0||s[e].overloadTable!==void 0&&s[e].overloadTable[t]!==void 0)&&L(`Cannot register public name '${e}' twice`),Me(s,e,e),s.hasOwnProperty(t)&&L(`Cannot register multiple overloads of a function with the same number of arguments (${t})!`),s[e].overloadTable[t]=r):(s[e]=r,t!==void 0&&(s[e].numArguments=t))}function cn(e,r,t,n,o,a,f,u){this.name=e,this.constructor=r,this.instancePrototype=t,this.rawDestructor=n,this.baseClass=o,this.getActualType=a,this.upcast=f,this.downcast=u,this.pureVirtualFunctions=[]}function Dr(e,r,t){for(;r!==t;)r.upcast||L(`Expected null or instance of ${t.name}, got an instance of ${r.name}`),e=r.upcast(e),r=r.baseClass;return e}function Kr(e,r){if(r===null)return this.isReference&&L(`null is not a valid ${this.name}`),0;r.$$||L(`Cannot pass "${Rr(r)}" as a ${this.name}`),r.$$.ptr||L(`Cannot pass deleted object as a pointer of type ${this.name}`);var t=r.$$.ptrType.registeredClass,n=Dr(r.$$.ptr,t,this.registeredClass);return n}function ln(e,r){var t;if(r===null)return this.isReference&&L(`null is not a valid ${this.name}`),this.isSmartPointer?(t=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,t),t):0;r.$$||L(`Cannot pass "${Rr(r)}" as a ${this.name}`),r.$$.ptr||L(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&L(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var n=r.$$.ptrType.registeredClass;if(t=Dr(r.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&L("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?t=r.$$.smartPtr:L(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:t=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)t=r.$$.smartPtr;else{var o=r.clone();t=this.rawShare(t,vr.toHandle(function(){o.delete()})),e!==null&&e.push(this.rawDestructor,t)}break;default:L("Unsupporting sharing policy")}return t}function lt(e,r){if(r===null)return this.isReference&&L(`null is not a valid ${this.name}`),0;r.$$||L(`Cannot pass "${Rr(r)}" as a ${this.name}`),r.$$.ptr||L(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&L(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var t=r.$$.ptrType.registeredClass,n=Dr(r.$$.ptr,t,this.registeredClass);return n}function pr(e){return this.fromWireType(H[e>>2])}function dn(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function hn(e){this.rawDestructor&&this.rawDestructor(e)}function pn(e){e!==null&&e.delete()}function vn(){be.prototype.getPointee=dn,be.prototype.destructor=hn,be.prototype.argPackAdvance=8,be.prototype.readValueFromPointer=pr,be.prototype.deleteObject=pn,be.prototype.fromWireType=Dt}function be(e,r,t,n,o,a,f,u,v,p,_){this.name=e,this.registeredClass=r,this.isReference=t,this.isConst=n,this.isSmartPointer=o,this.pointeeType=a,this.sharingPolicy=f,this.rawGetPointee=u,this.rawConstructor=v,this.rawShare=p,this.rawDestructor=_,!o&&r.baseClass===void 0?n?(this.toWireType=Kr,this.destructorFunction=null):(this.toWireType=lt,this.destructorFunction=null):this.toWireType=ln}function mn(e,r,t){s.hasOwnProperty(e)||cr("Replacing nonexistant public symbol"),s[e].overloadTable!==void 0&&t!==void 0?s[e].overloadTable[t]=r:(s[e]=r,s[e].argCount=t)}var gn=(e,r,t)=>{var n=s["dynCall_"+e];return t&&t.length?n.apply(null,[r].concat(t)):n.call(null,r)},nr=[],Yr=e=>{var r=nr[e];return r||(e>=nr.length&&(nr.length=e+1),nr[e]=r=et.get(e)),r},yn=(e,r,t)=>{if(e.includes("j"))return gn(e,r,t);var n=Yr(r).apply(null,t);return n},wn=(e,r)=>{var t=[];return function(){return t.length=0,Object.assign(t,arguments),yn(e,r,t)}};function je(e,r){e=de(e);function t(){return e.includes("j")?wn(e,r):Yr(r)}var n=t();return typeof n!="function"&&L(`unknown function pointer with signature ${e}: ${r}`),n}function _n(e,r){var t=wr(r,function(n){this.name=r,this.message=n;var o=new Error(n).stack;o!==void 0&&(this.stack=this.toString()+`
`+o.replace(/^Error(:[^\n]*)?\n/,""))});return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},t}var dt=void 0;function ht(e){var r=Mn(e),t=de(r);return Se(r),t}function Fr(e,r){var t=[],n={};function o(a){if(!n[a]&&!Ue[a]){if(fr[a]){fr[a].forEach(o);return}t.push(a),n[a]=!0}}throw r.forEach(o),new dt(`${e}: `+t.map(ht).join([", "]))}function bn(e,r,t,n,o,a,f,u,v,p,_,P,b){_=de(_),a=je(o,a),u&&(u=je(f,u)),p&&(p=je(v,p)),b=je(P,b);var w=hr(_);Ot(w,function(){Fr(`Cannot construct ${_} due to unbound types`,[n])}),Ye([e,r,t],n?[n]:[],function(A){A=A[0];var Y,Q;n?(Y=A.registeredClass,Q=Y.instancePrototype):Q=Te.prototype;var ne=wr(w,function(){if(Object.getPrototypeOf(this)!==pe)throw new ze("Use 'new' to construct "+_);if(Z.constructor_body===void 0)throw new ze(_+" has no accessible constructor");var ie=Z.constructor_body[arguments.length];if(ie===void 0)throw new ze(`Tried to invoke ctor of ${_} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(Z.constructor_body).toString()}) parameters instead!`);return ie.apply(this,arguments)}),pe=Object.create(Q,{constructor:{value:ne}});ne.prototype=pe;var Z=new cn(_,ne,pe,b,Y,a,u,p);Z.baseClass&&(Z.baseClass.__derivedClasses===void 0&&(Z.baseClass.__derivedClasses=[]),Z.baseClass.__derivedClasses.push(Z));var xe=new be(_,Z,!0,!1,!1),ve=new be(_+"*",Z,!1,!1,!1),Ae=new be(_+" const*",Z,!1,!0,!1);return ft[e]={pointerType:ve,constPointerType:Ae},mn(w,ne),[xe,ve,Ae]})}function pt(e,r){for(var t=[],n=0;n<e;n++)t.push(x[r+n*4>>2]);return t}function En(e){for(;e.length;){var r=e.pop(),t=e.pop();t(r)}}function vt(e,r){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var t=wr(e.name||"unknownFunctionName",function(){});t.prototype=e.prototype;var n=new t,o=e.apply(n,r);return o instanceof Object?o:n}function mt(e,r,t,n,o,a){var f=r.length;f<2&&L("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var u=r[1]!==null&&t!==null,v=!1,p=1;p<r.length;++p)if(r[p]!==null&&r[p].destructorFunction===void 0){v=!0;break}for(var _=r[0].name!=="void",P="",b="",p=0;p<f-2;++p)P+=(p!==0?", ":"")+"arg"+p,b+=(p!==0?", ":"")+"arg"+p+"Wired";var w=`
        return function ${hr(e)}(${P}) {
        if (arguments.length !== ${f-2}) {
          throwBindingError('function ${e} called with ${arguments.length} arguments, expected ${f-2} args!');
        }`;v&&(w+=`var destructors = [];
`);var A=v?"destructors":"null",Y=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Q=[L,n,o,En,r[0],r[1]];u&&(w+="var thisWired = classParam.toWireType("+A+`, this);
`);for(var p=0;p<f-2;++p)w+="var arg"+p+"Wired = argType"+p+".toWireType("+A+", arg"+p+"); // "+r[p+2].name+`
`,Y.push("argType"+p),Q.push(r[p+2]);if(u&&(b="thisWired"+(b.length>0?", ":"")+b),w+=(_||a?"var rv = ":"")+"invoker(fn"+(b.length>0?", ":"")+b+`);
`,v)w+=`runDestructors(destructors);
`;else for(var p=u?1:2;p<r.length;++p){var ne=p===1?"thisWired":"arg"+(p-2)+"Wired";r[p].destructorFunction!==null&&(w+=ne+"_dtor("+ne+"); // "+r[p].name+`
`,Y.push(ne+"_dtor"),Q.push(r[p].destructorFunction))}return _&&(w+=`var ret = retType.fromWireType(rv);
return ret;
`),w+=`}
`,Y.push(w),vt(Function,Y).apply(null,Q)}function Pn(e,r,t,n,o,a){var f=pt(r,t);o=je(n,o),Ye([],[e],function(u){u=u[0];var v=`constructor ${u.name}`;if(u.registeredClass.constructor_body===void 0&&(u.registeredClass.constructor_body=[]),u.registeredClass.constructor_body[r-1]!==void 0)throw new ze(`Cannot register multiple constructors with identical number of parameters (${r-1}) for class '${u.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return u.registeredClass.constructor_body[r-1]=()=>{Fr(`Cannot construct ${u.name} due to unbound types`,f)},Ye([],f,function(p){return p.splice(1,0,null),u.registeredClass.constructor_body[r-1]=mt(v,p,null,o,a),[]}),[]})}function gt(e,r,t,n,o,a,f,u,v){var p=pt(t,n);r=de(r),a=je(o,a),Ye([],[e],function(_){_=_[0];var P=`${_.name}.${r}`;r.startsWith("@@")&&(r=Symbol[r.substring(2)]),u&&_.registeredClass.pureVirtualFunctions.push(r);function b(){Fr(`Cannot call ${P} due to unbound types`,p)}var w=_.registeredClass.instancePrototype,A=w[r];return A===void 0||A.overloadTable===void 0&&A.className!==_.name&&A.argCount===t-2?(b.argCount=t-2,b.className=_.name,w[r]=b):(Me(w,r,P),w[r].overloadTable[t-2]=b),Ye([],p,function(Y){var Q=mt(P,Y,_,a,f,v);return w[r].overloadTable===void 0?(Q.argCount=t-2,w[r]=Q):w[r].overloadTable[t-2]=Q,[]}),[]})}function Cn(){Object.assign(yt.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var r=this.freelist.pop()||this.allocated.length;return this.allocated[r]=e,r},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function yt(){this.allocated=[void 0],this.freelist=[]}var me=new yt;function wt(e){e>=me.reserved&&--me.get(e).refcount===0&&me.free(e)}function Ut(){for(var e=0,r=me.reserved;r<me.allocated.length;++r)me.allocated[r]!==void 0&&++e;return e}function Tn(){me.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),me.reserved=me.allocated.length,s.count_emval_handles=Ut}var vr={toValue:e=>(e||L("Cannot use deleted val. handle = "+e),me.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return me.allocate({refcount:1,value:e})}}};function Mt(e,r){r=de(r),ye(e,{name:r,fromWireType:function(t){var n=vr.toValue(t);return wt(t),n},toWireType:function(t,n){return vr.toHandle(n)},argPackAdvance:8,readValueFromPointer:pr,destructorFunction:null})}function Rr(e){if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e}function $n(e,r){switch(r){case 2:return function(t){return this.fromWireType(Wr[t>>2])};case 3:return function(t){return this.fromWireType(zr[t>>3])};default:throw new TypeError("Unknown float type: "+e)}}function kn(e,r,t){var n=kr(t);r=de(r),ye(e,{name:r,fromWireType:function(o){return o},toWireType:function(o,a){return a},argPackAdvance:8,readValueFromPointer:$n(r,n),destructorFunction:null})}function Sn(e,r,t){switch(r){case 0:return t?function(o){return J[o]}:function(o){return X[o]};case 1:return t?function(o){return Pe[o>>1]}:function(o){return er[o>>1]};case 2:return t?function(o){return H[o>>2]}:function(o){return x[o>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function An(e,r,t,n,o){r=de(r);var a=kr(t),f=P=>P;if(n===0){var u=32-8*t;f=P=>P<<u>>>u}var v=r.includes("unsigned"),p=(P,b)=>{},_;v?_=function(P,b){return p(b,this.name),b>>>0}:_=function(P,b){return p(b,this.name),b},ye(e,{name:r,fromWireType:f,toWireType:_,argPackAdvance:8,readValueFromPointer:Sn(r,a,n!==0),destructorFunction:null})}function Dn(e,r,t){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],o=n[r];function a(f){f=f>>2;var u=x,v=u[f],p=u[f+1];return new o(u.buffer,p,v)}t=de(t),ye(e,{name:t,fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{ignoreDuplicateRegistrations:!0})}var Fn=(e,r,t)=>Cr(e,X,r,t);function Ze(e,r){r=de(r);var t=r==="std::string";ye(e,{name:r,fromWireType:function(n){var o=x[n>>2],a=n+4,f;if(t)for(var u=a,v=0;v<=o;++v){var p=a+v;if(v==o||X[p]==0){var _=p-u,P=ur(u,_);f===void 0?f=P:(f+=String.fromCharCode(0),f+=P),u=p+1}}else{for(var b=new Array(o),v=0;v<o;++v)b[v]=String.fromCharCode(X[a+v]);f=b.join("")}return Se(n),f},toWireType:function(n,o){o instanceof ArrayBuffer&&(o=new Uint8Array(o));var a,f=typeof o=="string";f||o instanceof Uint8Array||o instanceof Uint8ClampedArray||o instanceof Int8Array||L("Cannot pass non-string to std::string"),t&&f?a=Pr(o):a=o.length;var u=bt(4+a+1),v=u+4;if(x[u>>2]=a,t&&f)Fn(o,v,a+1);else if(f)for(var p=0;p<a;++p){var _=o.charCodeAt(p);_>255&&(Se(v),L("String has UTF-16 code units that do not fit in 8 bits")),X[v+p]=_}else for(var p=0;p<a;++p)X[v+p]=o[p];return n!==null&&n.push(Se,u),u},argPackAdvance:8,readValueFromPointer:pr,destructorFunction:function(n){Se(n)}})}var Or=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,jt=(e,r)=>{for(var t=e,n=t>>1,o=n+r/2;!(n>=o)&&er[n];)++n;if(t=n<<1,t-e>32&&Or)return Or.decode(X.subarray(e,t));for(var a="",f=0;!(f>=r/2);++f){var u=Pe[e+f*2>>1];if(u==0)break;a+=String.fromCharCode(u)}return a},It=(e,r,t)=>{if(t===void 0&&(t=2147483647),t<2)return 0;t-=2;for(var n=r,o=t<e.length*2?t/2:e.length,a=0;a<o;++a){var f=e.charCodeAt(a);Pe[r>>1]=f,r+=2}return Pe[r>>1]=0,r-n},Jr=e=>e.length*2,Ht=(e,r)=>{for(var t=0,n="";!(t>=r/4);){var o=H[e+t*4>>2];if(o==0)break;if(++t,o>=65536){var a=o-65536;n+=String.fromCharCode(55296|a>>10,56320|a&1023)}else n+=String.fromCharCode(o)}return n},c=(e,r,t)=>{if(t===void 0&&(t=2147483647),t<4)return 0;for(var n=r,o=n+t-4,a=0;a<e.length;++a){var f=e.charCodeAt(a);if(f>=55296&&f<=57343){var u=e.charCodeAt(++a);f=65536+((f&1023)<<10)|u&1023}if(H[r>>2]=f,r+=4,r+4>o)break}return H[r>>2]=0,r-n},l=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n>=55296&&n<=57343&&++t,r+=4}return r},h=function(e,r,t){t=de(t);var n,o,a,f,u;r===2?(n=jt,o=It,f=Jr,a=()=>er,u=1):r===4&&(n=Ht,o=c,f=l,a=()=>x,u=2),ye(e,{name:t,fromWireType:function(v){for(var p=x[v>>2],_=a(),P,b=v+4,w=0;w<=p;++w){var A=v+4+w*r;if(w==p||_[A>>u]==0){var Y=A-b,Q=n(b,Y);P===void 0?P=Q:(P+=String.fromCharCode(0),P+=Q),b=A+r}}return Se(v),P},toWireType:function(v,p){typeof p!="string"&&L(`Cannot pass non-string to C++ string type ${t}`);var _=f(p),P=bt(4+_+r);return x[P>>2]=_>>u,o(p,P+4,_+r),v!==null&&v.push(Se,P),P},argPackAdvance:8,readValueFromPointer:pr,destructorFunction:function(v){Se(v)}})};function g(e,r){r=de(r),ye(e,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:function(){},toWireType:function(t,n){}})}var C={};function S(e){var r=C[e];return r===void 0?de(e):r}var D=[];function T(e,r,t,n){e=D[e],r=vr.toValue(r),t=S(t),e(r,t,null,n)}function W(e){var r=D.length;return D.push(e),r}function F(e,r){var t=Ue[e];return t===void 0&&L(r+" has unknown type "+ht(e)),t}function ee(e,r){for(var t=new Array(e),n=0;n<e;++n)t[n]=F(x[r+n*4>>2],"parameter "+n);return t}var te=[];function fe(e,r){var t=ee(e,r),n=t[0],o=n.name+"_$"+t.slice(1).map(function(A){return A.name}).join("_")+"$",a=te[o];if(a!==void 0)return a;for(var f=["retType"],u=[n],v="",p=0;p<e-1;++p)v+=(p!==0?", ":"")+"arg"+p,f.push("argType"+p),u.push(t[1+p]);for(var _=hr("methodCaller_"+o),P="return function "+_+`(handle, name, destructors, args) {
`,b=0,p=0;p<e-1;++p)P+="    var arg"+p+" = argType"+p+".readValueFromPointer(args"+(b?"+"+b:"")+`);
`,b+=t[p+1].argPackAdvance;P+="    var rv = handle[name]("+v+`);
`;for(var p=0;p<e-1;++p)t[p+1].deleteObject&&(P+="    argType"+p+".deleteObject(arg"+p+`);
`);n.isVoid||(P+=`    return retType.toWireType(destructors, rv);
`),P+=`};
`,f.push(P);var w=vt(Function,f).apply(null,u);return a=W(w),te[o]=a,a}function he(e,r){return r+2097152>>>0<4194305-!!e?(e>>>0)+r*4294967296:NaN}var Ee=()=>{Fe("")};function Ie(){return Date.now()}var De=()=>X.length,ir=()=>De(),_t=(e,r,t)=>X.copyWithin(e,r,r+t),Ne=e=>{Fe("OOM")},Rn=e=>{X.length,Ne()},_r={},Lt=()=>R||"./this.program",Ge=()=>{if(!Ge.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Lt()};for(var t in _r)_r[t]===void 0?delete r[t]:r[t]=_r[t];var n=[];for(var t in r)n.push(`${t}=${r[t]}`);Ge.strings=n}return Ge.strings},Zn=(e,r)=>{for(var t=0;t<e.length;++t)J[r++>>0]=e.charCodeAt(t);J[r>>0]=0},ei=(e,r)=>{var t=0;return Ge().forEach(function(n,o){var a=r+t;x[e+o*4>>2]=a,Zn(n,a),t+=n.length+1}),0},ri=(e,r)=>{var t=Ge();x[e>>2]=t.length;var n=0;return t.forEach(function(o){n+=o.length+1}),x[r>>2]=n,0};function ti(e){try{var r=ue.getStreamFromFD(e);return i.close(r),0}catch(t){if(typeof i>"u"||t.name!=="ErrnoError")throw t;return t.errno}}function ni(e,r){try{var t=0,n=0,o=0,a=ue.getStreamFromFD(e),f=a.tty?2:i.isDir(a.mode)?3:i.isLink(a.mode)?7:4;return J[r>>0]=f,Pe[r+2>>1]=o,K=[t>>>0,(k=t,+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[r+8>>2]=K[0],H[r+12>>2]=K[1],K=[n>>>0,(k=n,+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[r+16>>2]=K[0],H[r+20>>2]=K[1],0}catch(u){if(typeof i>"u"||u.name!=="ErrnoError")throw u;return u.errno}}var ii=(e,r,t,n)=>{for(var o=0,a=0;a<t;a++){var f=x[r>>2],u=x[r+4>>2];r+=8;var v=i.read(e,J,f,u,n);if(v<0)return-1;if(o+=v,v<u)break;typeof n<"u"&&(n+=v)}return o};function oi(e,r,t,n){try{var o=ue.getStreamFromFD(e),a=ii(o,r,t);return x[n>>2]=a,0}catch(f){if(typeof i>"u"||f.name!=="ErrnoError")throw f;return f.errno}}function si(e,r,t,n,o){var a=he(r,t);try{if(isNaN(a))return 61;var f=ue.getStreamFromFD(e);return i.llseek(f,a,n),K=[f.position>>>0,(k=f.position,+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[o>>2]=K[0],H[o+4>>2]=K[1],f.getdents&&a===0&&n===0&&(f.getdents=null),0}catch(u){if(typeof i>"u"||u.name!=="ErrnoError")throw u;return u.errno}}var ai=(e,r,t,n)=>{for(var o=0,a=0;a<t;a++){var f=x[r>>2],u=x[r+4>>2];r+=8;var v=i.write(e,J,f,u,n);if(v<0)return-1;o+=v,typeof n<"u"&&(n+=v)}return o};function ui(e,r,t,n){try{var o=ue.getStreamFromFD(e),a=ai(o,r,t);return x[n>>2]=a,0}catch(f){if(typeof i>"u"||f.name!=="ErrnoError")throw f;return f.errno}}var On=function(e,r,t,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=i.nextInode++,this.name=r,this.mode=t,this.node_ops={},this.stream_ops={},this.rdev=n},Ur=365,Mr=146;Object.defineProperties(On.prototype,{read:{get:function(){return(this.mode&Ur)===Ur},set:function(e){e?this.mode|=Ur:this.mode&=~Ur}},write:{get:function(){return(this.mode&Mr)===Mr},set:function(e){e?this.mode|=Mr:this.mode&=~Mr}},isFolder:{get:function(){return i.isDir(this.mode)}},isDevice:{get:function(){return i.isChrdev(this.mode)}}}),i.FSNode=On,i.createPreloadedFile=Kt,i.staticInit(),qr(),ze=s.BindingError=class extends Error{constructor(r){super(r),this.name="BindingError"}},Ve=s.InternalError=class extends Error{constructor(r){super(r),this.name="InternalError"}},Rt(),At(),vn(),dt=s.UnboundTypeError=_n(Error,"UnboundTypeError"),Cn(),Tn();var fi={p:sr,C:Jt,w:$r,t:Qt,n:St,r:bn,q:Pn,d:gt,D:Mt,k:kn,c:An,b:Dn,j:Ze,f:h,o:g,g:T,m:wt,l:fe,a:Ee,e:Ie,v:ir,A:_t,u:Rn,y:ei,z:ri,i:ti,x:ni,B:oi,s:si,h:ui};Xt();var bt=e=>(bt=N.G)(e),Se=e=>(Se=N.I)(e),Un=()=>(Un=N.J)(),Mn=e=>(Mn=N.K)(e);s.__embind_initialize_bindings=()=>(s.__embind_initialize_bindings=N.L)();var jn=e=>(jn=N.M)(e);s.dynCall_jiji=(e,r,t,n,o)=>(s.dynCall_jiji=N.N)(e,r,t,n,o),s._ff_h264_cabac_tables=67061;var jr;Xe=function e(){jr||In(),jr||(Xe=e)};function In(){if(Ce>0||(Nt(),Ce>0))return;function e(){jr||(jr=!0,s.calledRun=!0,!re&&(xt(),m(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),or()))}s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),e()},1)):e()}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();return In(),d.ready}})();(()=>{var $=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(d={}){var s=d,m,y;s.ready=new Promise((c,l)=>{m=c,y=l});var O=Object.assign({},s),R=typeof window=="object",q=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var j="";function E(c){return s.locateFile?s.locateFile(c,j):j+c}var M;(R||q)&&(q?j=self.location.href:typeof document<"u"&&document.currentScript&&(j=document.currentScript.src),$&&(j=$),j.indexOf("blob:")!==0?j=j.substr(0,j.replace(/[?#].*/,"").lastIndexOf("/")+1):j="",q&&(M=c=>{var l=new XMLHttpRequest;return l.open("GET",c,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}));var I=s.print||console.log.bind(console),se=s.printErr||console.error.bind(console);Object.assign(s,O),O=null,s.arguments&&s.arguments,s.thisProgram&&s.thisProgram,s.quit&&s.quit;var ae;s.wasmBinary&&(ae=s.wasmBinary),s.noExitRuntime,typeof WebAssembly!="object"&&Ce("no native wasm support detected");var oe,B,V=!1,G,N,re,we,J,X,Pe,er;function H(){var c=oe.buffer;s.HEAP8=G=new Int8Array(c),s.HEAP16=re=new Int16Array(c),s.HEAP32=J=new Int32Array(c),s.HEAPU8=N=new Uint8Array(c),s.HEAPU16=we=new Uint16Array(c),s.HEAPU32=X=new Uint32Array(c),s.HEAPF32=Pe=new Float32Array(c),s.HEAPF64=er=new Float64Array(c)}var x,Wr=[],zr=[],Pt=[];function et(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)nt(s.preRun.shift());Er(Wr)}function rt(){Er(zr)}function tt(){if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)xt(s.postRun.shift());Er(Pt)}function nt(c){Wr.unshift(c)}function Nt(c){zr.unshift(c)}function xt(c){Pt.unshift(c)}var or=0,br=null;function Bt(c){or++,s.monitorRunDependencies&&s.monitorRunDependencies(or)}function Vt(c){if(or--,s.monitorRunDependencies&&s.monitorRunDependencies(or),or==0&&br){var l=br;br=null,l()}}function Ce(c){s.onAbort&&s.onAbort(c),c="Aborted("+c+")",se(c),V=!0,c+=". Build with -sASSERTIONS for more info.";var l=new WebAssembly.RuntimeError(c);throw y(l),l}var Xe="data:application/octet-stream;base64,";function Yn(c){return c.startsWith(Xe)}var Be;Be="videodec_simd.wasm",Yn(Be)||(Be=E(Be));function rr(c){if(c==Be&&ae)return new Uint8Array(ae);if(M)return M(c);throw"both async and sync fetching of the wasm failed"}function Fe(c){return!ae&&(R||q)&&typeof fetch=="function"?fetch(c,{credentials:"same-origin"}).then(l=>{if(!l.ok)throw"failed to load wasm binary file at '"+c+"'";return l.arrayBuffer()}).catch(()=>rr(c)):Promise.resolve().then(()=>rr(c))}function Ct(c,l,h){return Fe(c).then(g=>WebAssembly.instantiate(g,l)).then(g=>g).then(h,g=>{se("failed to asynchronously prepare wasm: "+g),Ce(g)})}function it(c,l,h,g){return!c&&typeof WebAssembly.instantiateStreaming=="function"&&!Yn(l)&&typeof fetch=="function"?fetch(l,{credentials:"same-origin"}).then(C=>{var S=WebAssembly.instantiateStreaming(C,h);return S.then(g,function(D){return se("wasm streaming compile failed: "+D),se("falling back to ArrayBuffer instantiation"),Ct(l,h,g)})}):Ct(l,h,g)}function He(){var c={a:Fn};function l(g,C){var S=g.exports;return B=S,oe=B.v,H(),x=B.z,Nt(B.w),Vt(),S}Bt();function h(g){l(g.instance)}if(s.instantiateWasm)try{return s.instantiateWasm(c,l)}catch(g){se("Module.instantiateWasm callback failed with error: "+g),y(g)}return it(ae,Be,c,h).catch(y),{}}var Er=c=>{for(;c.length>0;)c.shift()(s)};function qt(c){this.excPtr=c,this.ptr=c-24,this.set_type=function(l){X[this.ptr+4>>2]=l},this.get_type=function(){return X[this.ptr+4>>2]},this.set_destructor=function(l){X[this.ptr+8>>2]=l},this.get_destructor=function(){return X[this.ptr+8>>2]},this.set_caught=function(l){l=l?1:0,G[this.ptr+12>>0]=l},this.get_caught=function(){return G[this.ptr+12>>0]!=0},this.set_rethrown=function(l){l=l?1:0,G[this.ptr+13>>0]=l},this.get_rethrown=function(){return G[this.ptr+13>>0]!=0},this.init=function(l,h){this.set_adjusted_ptr(0),this.set_type(l),this.set_destructor(h)},this.set_adjusted_ptr=function(l){X[this.ptr+16>>2]=l},this.get_adjusted_ptr=function(){return X[this.ptr+16>>2]},this.get_exception_ptr=function(){var l=It(this.get_type());if(l)return X[this.excPtr>>2];var h=this.get_adjusted_ptr();return h!==0?h:this.excPtr}}var Nr=0;function Gt(c,l,h){var g=new qt(c);throw g.init(l,h),Nr=c,Nr}function Xt(c,l,h,g,C){}function k(c){switch(c){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${c}`)}}function K(){for(var c=new Array(256),l=0;l<256;++l)c[l]=String.fromCharCode(l);mr=c}var mr=void 0;function Re(c){for(var l="",h=c;N[h];)l+=mr[N[h++]];return l}var tr={},sr={},xr={},z=void 0;function ce(c){throw new z(c)}var Br=void 0;function ge(c){throw new Br(c)}function ar(c,l,h){c.forEach(function(T){xr[T]=l});function g(T){var W=h(T);W.length!==c.length&&ge("Mismatched type converter count");for(var F=0;F<c.length;++F)Oe(c[F],W[F])}var C=new Array(l.length),S=[],D=0;l.forEach((T,W)=>{sr.hasOwnProperty(T)?C[W]=sr[T]:(S.push(T),tr.hasOwnProperty(T)||(tr[T]=[]),tr[T].push(()=>{C[W]=sr[T],++D,D===S.length&&g(C)}))}),S.length===0&&g(C)}function Le(c,l,h={}){var g=l.name;if(c||ce(`type "${g}" must have a positive integer typeid pointer`),sr.hasOwnProperty(c)){if(h.ignoreDuplicateRegistrations)return;ce(`Cannot register type '${g}' twice`)}if(sr[c]=l,delete xr[c],tr.hasOwnProperty(c)){var C=tr[c];delete tr[c],C.forEach(S=>S())}}function Oe(c,l,h={}){if(!("argPackAdvance"in l))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Le(c,l,h)}function Pr(c,l,h,g,C){var S=k(h);l=Re(l),Oe(c,{name:l,fromWireType:function(D){return!!D},toWireType:function(D,T){return T?g:C},argPackAdvance:8,readValueFromPointer:function(D){var T;if(h===1)T=G;else if(h===2)T=re;else if(h===4)T=J;else throw new TypeError("Unknown boolean type size: "+l);return this.fromWireType(T[D>>S])},destructorFunction:null})}function Cr(c){if(!(this instanceof Ve)||!(c instanceof Ve))return!1;for(var l=this.$$.ptrType.registeredClass,h=this.$$.ptr,g=c.$$.ptrType.registeredClass,C=c.$$.ptr;l.baseClass;)h=l.upcast(h),l=l.baseClass;for(;g.baseClass;)C=g.upcast(C),g=g.baseClass;return l===g&&h===C}function Tr(c){return{count:c.count,deleteScheduled:c.deleteScheduled,preservePointerOnDelete:c.preservePointerOnDelete,ptr:c.ptr,ptrType:c.ptrType,smartPtr:c.smartPtr,smartPtrType:c.smartPtrType}}function ot(c){function l(h){return h.$$.ptrType.registeredClass.name}ce(l(c)+" instance already deleted")}var ke=!1;function Vr(c){}function U(c){c.smartPtr?c.smartPtrType.rawDestructor(c.smartPtr):c.ptrType.registeredClass.rawDestructor(c.ptr)}function Tt(c){c.count.value-=1;var l=c.count.value===0;l&&U(c)}function $t(c,l,h){if(l===h)return c;if(h.baseClass===void 0)return null;var g=$t(c,l,h.baseClass);return g===null?null:h.downcast(g)}var kt={};function Kt(){return Object.keys($r).length}function Yt(){var c=[];for(var l in $r)$r.hasOwnProperty(l)&&c.push($r[l]);return c}var Ke=[];function i(){for(;Ke.length;){var c=Ke.pop();c.$$.deleteScheduled=!1,c.delete()}}var ur=void 0;function ue(c){ur=c,Ke.length&&ur&&ur(i)}function Jt(){s.getInheritedInstanceCount=Kt,s.getLiveInheritedInstances=Yt,s.flushPendingDeletes=i,s.setDelayFunction=ue}var $r={};function Qt(c,l){for(l===void 0&&ce("ptr should not be undefined");c.baseClass;)l=c.upcast(l),c=c.baseClass;return l}function kr(c,l){return l=Qt(c,l),$r[l]}function qr(c,l){(!l.ptrType||!l.ptr)&&ge("makeClassHandle requires ptr and ptrType");var h=!!l.smartPtrType,g=!!l.smartPtr;return h!==g&&ge("Both smartPtrType and smartPtr must be specified"),l.count={value:1},de(Object.create(c,{$$:{value:l}}))}function st(c){var l=this.getPointee(c);if(!l)return this.destructor(c),null;var h=kr(this.registeredClass,l);if(h!==void 0){if(h.$$.count.value===0)return h.$$.ptr=l,h.$$.smartPtr=c,h.clone();var g=h.clone();return this.destructor(c),g}function C(){return this.isSmartPointer?qr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:l,smartPtrType:this,smartPtr:c}):qr(this.registeredClass.instancePrototype,{ptrType:this,ptr:c})}var S=this.registeredClass.getActualType(l),D=kt[S];if(!D)return C.call(this);var T;this.isConst?T=D.constPointerType:T=D.pointerType;var W=$t(l,this.registeredClass,T.registeredClass);return W===null?C.call(this):this.isSmartPointer?qr(T.registeredClass.instancePrototype,{ptrType:T,ptr:W,smartPtrType:this,smartPtr:c}):qr(T.registeredClass.instancePrototype,{ptrType:T,ptr:W})}var de=function(c){return typeof FinalizationRegistry>"u"?(de=l=>l,c):(ke=new FinalizationRegistry(l=>{Tt(l.$$)}),de=l=>{var h=l.$$,g=!!h.smartPtr;if(g){var C={$$:h};ke.register(l,C,l)}return l},Vr=l=>ke.unregister(l),de(c))};function We(){if(this.$$.ptr||ot(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var c=de(Object.create(Object.getPrototypeOf(this),{$$:{value:Tr(this.$$)}}));return c.$$.count.value+=1,c.$$.deleteScheduled=!1,c}function Ue(){this.$$.ptr||ot(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ce("Object already scheduled for deletion"),Vr(this),Tt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function fr(){return!this.$$.ptr}function ze(){return this.$$.ptr||ot(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ce("Object already scheduled for deletion"),Ke.push(this),Ke.length===1&&ur&&ur(i),this.$$.deleteScheduled=!0,this}function L(){Ve.prototype.isAliasOf=Cr,Ve.prototype.clone=We,Ve.prototype.delete=Ue,Ve.prototype.isDeleted=fr,Ve.prototype.deleteLater=ze}function Ve(){}var cr=48,Ye=57;function Gr(c){if(c===void 0)return"_unknown";c=c.replace(/[^a-zA-Z0-9_]/g,"$");var l=c.charCodeAt(0);return l>=cr&&l<=Ye?`_${c}`:c}function ye(c,l){return c=Gr(c),{[c]:function(){return l.apply(this,arguments)}}[c]}function St(c,l,h){if(c[l].overloadTable===void 0){var g=c[l];c[l]=function(){return c[l].overloadTable.hasOwnProperty(arguments.length)||ce(`Function '${h}' called with an invalid number of arguments (${arguments.length}) - expects one of (${c[l].overloadTable})!`),c[l].overloadTable[arguments.length].apply(this,arguments)},c[l].overloadTable=[],c[l].overloadTable[g.argCount]=g}}function Zt(c,l,h){s.hasOwnProperty(c)?((h===void 0||s[c].overloadTable!==void 0&&s[c].overloadTable[h]!==void 0)&&ce(`Cannot register public name '${c}' twice`),St(s,c,c),s.hasOwnProperty(h)&&ce(`Cannot register multiple overloads of a function with the same number of arguments (${h})!`),s[c].overloadTable[h]=l):(s[c]=l,h!==void 0&&(s[c].numArguments=h))}function en(c,l,h,g,C,S,D,T){this.name=c,this.constructor=l,this.instancePrototype=h,this.rawDestructor=g,this.baseClass=C,this.getActualType=S,this.upcast=D,this.downcast=T,this.pureVirtualFunctions=[]}function lr(c,l,h){for(;l!==h;)l.upcast||ce(`Expected null or instance of ${h.name}, got an instance of ${l.name}`),c=l.upcast(c),l=l.baseClass;return c}function Sr(c,l){if(l===null)return this.isReference&&ce(`null is not a valid ${this.name}`),0;l.$$||ce(`Cannot pass "${lt(l)}" as a ${this.name}`),l.$$.ptr||ce(`Cannot pass deleted object as a pointer of type ${this.name}`);var h=l.$$.ptrType.registeredClass,g=lr(l.$$.ptr,h,this.registeredClass);return g}function at(c,l){var h;if(l===null)return this.isReference&&ce(`null is not a valid ${this.name}`),this.isSmartPointer?(h=this.rawConstructor(),c!==null&&c.push(this.rawDestructor,h),h):0;l.$$||ce(`Cannot pass "${lt(l)}" as a ${this.name}`),l.$$.ptr||ce(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&l.$$.ptrType.isConst&&ce(`Cannot convert argument of type ${l.$$.smartPtrType?l.$$.smartPtrType.name:l.$$.ptrType.name} to parameter type ${this.name}`);var g=l.$$.ptrType.registeredClass;if(h=lr(l.$$.ptr,g,this.registeredClass),this.isSmartPointer)switch(l.$$.smartPtr===void 0&&ce("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:l.$$.smartPtrType===this?h=l.$$.smartPtr:ce(`Cannot convert argument of type ${l.$$.smartPtrType?l.$$.smartPtrType.name:l.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:h=l.$$.smartPtr;break;case 2:if(l.$$.smartPtrType===this)h=l.$$.smartPtr;else{var C=l.clone();h=this.rawShare(h,Kr.toHandle(function(){C.delete()})),c!==null&&c.push(this.rawDestructor,h)}break;default:ce("Unsupporting sharing policy")}return h}function rn(c,l){if(l===null)return this.isReference&&ce(`null is not a valid ${this.name}`),0;l.$$||ce(`Cannot pass "${lt(l)}" as a ${this.name}`),l.$$.ptr||ce(`Cannot pass deleted object as a pointer of type ${this.name}`),l.$$.ptrType.isConst&&ce(`Cannot convert argument of type ${l.$$.ptrType.name} to parameter type ${this.name}`);var h=l.$$.ptrType.registeredClass,g=lr(l.$$.ptr,h,this.registeredClass);return g}function gr(c){return this.fromWireType(J[c>>2])}function ut(c){return this.rawGetPointee&&(c=this.rawGetPointee(c)),c}function ft(c){this.rawDestructor&&this.rawDestructor(c)}function tn(c){c!==null&&c.delete()}function nn(){_e.prototype.getPointee=ut,_e.prototype.destructor=ft,_e.prototype.argPackAdvance=8,_e.prototype.readValueFromPointer=gr,_e.prototype.deleteObject=tn,_e.prototype.fromWireType=st}function _e(c,l,h,g,C,S,D,T,W,F,ee){this.name=c,this.registeredClass=l,this.isReference=h,this.isConst=g,this.isSmartPointer=C,this.pointeeType=S,this.sharingPolicy=D,this.rawGetPointee=T,this.rawConstructor=W,this.rawShare=F,this.rawDestructor=ee,!C&&l.baseClass===void 0?g?(this.toWireType=Sr,this.destructorFunction=null):(this.toWireType=rn,this.destructorFunction=null):this.toWireType=at}function Ar(c,l,h){s.hasOwnProperty(c)||ge("Replacing nonexistant public symbol"),s[c].overloadTable!==void 0&&h!==void 0?s[c].overloadTable[h]=l:(s[c]=l,s[c].argCount=h)}var Je=(c,l,h)=>{var g=s["dynCall_"+c];return h&&h.length?g.apply(null,[l].concat(h)):g.call(null,l)},Xr=[],At=c=>{var l=Xr[c];return l||(c>=Xr.length&&(Xr.length=c+1),Xr[c]=l=x.get(c)),l},Qe=(c,l,h)=>{if(c.includes("j"))return Je(c,l,h);var g=At(l).apply(null,h);return g},on=(c,l)=>{var h=[];return function(){return h.length=0,Object.assign(h,arguments),Qe(c,l,h)}};function yr(c,l){c=Re(c);function h(){return c.includes("j")?on(c,l):At(l)}var g=h();return typeof g!="function"&&ce(`unknown function pointer with signature ${c}: ${l}`),g}function dr(c,l){var h=ye(l,function(g){this.name=l,this.message=g;var C=new Error(g).stack;C!==void 0&&(this.stack=this.toString()+`
`+C.replace(/^Error(:[^\n]*)?\n/,""))});return h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},h}var Dt=void 0;function qe(c){var l=jt(c),h=Re(l);return Ze(l),h}function ct(c,l){var h=[],g={};function C(S){if(!g[S]&&!sr[S]){if(xr[S]){xr[S].forEach(C);return}h.push(S),g[S]=!0}}throw l.forEach(C),new Dt(`${c}: `+h.map(qe).join([", "]))}function sn(c,l,h,g,C,S,D,T,W,F,ee,te,fe){ee=Re(ee),S=yr(C,S),T&&(T=yr(D,T)),F&&(F=yr(W,F)),fe=yr(te,fe);var he=Gr(ee);Zt(he,function(){ct(`Cannot construct ${ee} due to unbound types`,[g])}),ar([c,l,h],g?[g]:[],function(Ee){Ee=Ee[0];var Ie,De;g?(Ie=Ee.registeredClass,De=Ie.instancePrototype):De=Ve.prototype;var ir=ye(he,function(){if(Object.getPrototypeOf(this)!==_t)throw new z("Use 'new' to construct "+ee);if(Ne.constructor_body===void 0)throw new z(ee+" has no accessible constructor");var Ge=Ne.constructor_body[arguments.length];if(Ge===void 0)throw new z(`Tried to invoke ctor of ${ee} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(Ne.constructor_body).toString()}) parameters instead!`);return Ge.apply(this,arguments)}),_t=Object.create(De,{constructor:{value:ir}});ir.prototype=_t;var Ne=new en(ee,ir,_t,fe,Ie,S,T,F);Ne.baseClass&&(Ne.baseClass.__derivedClasses===void 0&&(Ne.baseClass.__derivedClasses=[]),Ne.baseClass.__derivedClasses.push(Ne));var Rn=new _e(ee,Ne,!0,!1,!1),_r=new _e(ee+"*",Ne,!1,!1,!1),Lt=new _e(ee+" const*",Ne,!1,!0,!1);return kt[c]={pointerType:_r,constPointerType:Lt},Ar(he,ir),[Rn,_r,Lt]})}function Ft(c,l){for(var h=[],g=0;g<c;g++)h.push(X[l+g*4>>2]);return h}function an(c){for(;c.length;){var l=c.pop(),h=c.pop();h(l)}}function Rt(c,l){if(!(c instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof c} which is not a function`);var h=ye(c.name||"unknownFunctionName",function(){});h.prototype=c.prototype;var g=new h,C=c.apply(g,l);return C instanceof Object?C:g}function Te(c,l,h,g,C,S){var D=l.length;D<2&&ce("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var T=l[1]!==null&&h!==null,W=!1,F=1;F<l.length;++F)if(l[F]!==null&&l[F].destructorFunction===void 0){W=!0;break}for(var ee=l[0].name!=="void",te="",fe="",F=0;F<D-2;++F)te+=(F!==0?", ":"")+"arg"+F,fe+=(F!==0?", ":"")+"arg"+F+"Wired";var he=`
        return function ${Gr(c)}(${te}) {
        if (arguments.length !== ${D-2}) {
          throwBindingError('function ${c} called with ${arguments.length} arguments, expected ${D-2} args!');
        }`;W&&(he+=`var destructors = [];
`);var Ee=W?"destructors":"null",Ie=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],De=[ce,g,C,an,l[0],l[1]];T&&(he+="var thisWired = classParam.toWireType("+Ee+`, this);
`);for(var F=0;F<D-2;++F)he+="var arg"+F+"Wired = argType"+F+".toWireType("+Ee+", arg"+F+"); // "+l[F+2].name+`
`,Ie.push("argType"+F),De.push(l[F+2]);if(T&&(fe="thisWired"+(fe.length>0?", ":"")+fe),he+=(ee||S?"var rv = ":"")+"invoker(fn"+(fe.length>0?", ":"")+fe+`);
`,W)he+=`runDestructors(destructors);
`;else for(var F=T?1:2;F<l.length;++F){var ir=F===1?"thisWired":"arg"+(F-2)+"Wired";l[F].destructorFunction!==null&&(he+=ir+"_dtor("+ir+"); // "+l[F].name+`
`,Ie.push(ir+"_dtor"),De.push(l[F].destructorFunction))}return ee&&(he+=`var ret = retType.fromWireType(rv);
return ret;
`),he+=`}
`,Ie.push(he),Rt(Function,Ie).apply(null,De)}function un(c,l,h,g,C,S){var D=Ft(l,h);C=yr(g,C),ar([],[c],function(T){T=T[0];var W=`constructor ${T.name}`;if(T.registeredClass.constructor_body===void 0&&(T.registeredClass.constructor_body=[]),T.registeredClass.constructor_body[l-1]!==void 0)throw new z(`Cannot register multiple constructors with identical number of parameters (${l-1}) for class '${T.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return T.registeredClass.constructor_body[l-1]=()=>{ct(`Cannot construct ${T.name} due to unbound types`,D)},ar([],D,function(F){return F.splice(1,0,null),T.registeredClass.constructor_body[l-1]=Te(W,F,null,C,S),[]}),[]})}function fn(c,l,h,g,C,S,D,T,W){var F=Ft(h,g);l=Re(l),S=yr(C,S),ar([],[c],function(ee){ee=ee[0];var te=`${ee.name}.${l}`;l.startsWith("@@")&&(l=Symbol[l.substring(2)]),T&&ee.registeredClass.pureVirtualFunctions.push(l);function fe(){ct(`Cannot call ${te} due to unbound types`,F)}var he=ee.registeredClass.instancePrototype,Ee=he[l];return Ee===void 0||Ee.overloadTable===void 0&&Ee.className!==ee.name&&Ee.argCount===h-2?(fe.argCount=h-2,fe.className=ee.name,he[l]=fe):(St(he,l,te),he[l].overloadTable[h-2]=fe),ar([],F,function(Ie){var De=Te(te,Ie,ee,S,D,W);return he[l].overloadTable===void 0?(De.argCount=h-2,he[l]=De):he[l].overloadTable[h-2]=De,[]}),[]})}function hr(){Object.assign(wr.prototype,{get(c){return this.allocated[c]},has(c){return this.allocated[c]!==void 0},allocate(c){var l=this.freelist.pop()||this.allocated.length;return this.allocated[l]=c,l},free(c){this.allocated[c]=void 0,this.freelist.push(c)}})}function wr(){this.allocated=[void 0],this.freelist=[]}var Me=new wr;function Ot(c){c>=Me.reserved&&--Me.get(c).refcount===0&&Me.free(c)}function cn(){for(var c=0,l=Me.reserved;l<Me.allocated.length;++l)Me.allocated[l]!==void 0&&++c;return c}function Dr(){Me.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),Me.reserved=Me.allocated.length,s.count_emval_handles=cn}var Kr={toValue:c=>(c||ce("Cannot use deleted val. handle = "+c),Me.get(c).value),toHandle:c=>{switch(c){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return Me.allocate({refcount:1,value:c})}}};function ln(c,l){l=Re(l),Oe(c,{name:l,fromWireType:function(h){var g=Kr.toValue(h);return Ot(h),g},toWireType:function(h,g){return Kr.toHandle(g)},argPackAdvance:8,readValueFromPointer:gr,destructorFunction:null})}function lt(c){if(c===null)return"null";var l=typeof c;return l==="object"||l==="array"||l==="function"?c.toString():""+c}function pr(c,l){switch(l){case 2:return function(h){return this.fromWireType(Pe[h>>2])};case 3:return function(h){return this.fromWireType(er[h>>3])};default:throw new TypeError("Unknown float type: "+c)}}function dn(c,l,h){var g=k(h);l=Re(l),Oe(c,{name:l,fromWireType:function(C){return C},toWireType:function(C,S){return S},argPackAdvance:8,readValueFromPointer:pr(l,g),destructorFunction:null})}function hn(c,l,h){switch(l){case 0:return h?function(C){return G[C]}:function(C){return N[C]};case 1:return h?function(C){return re[C>>1]}:function(C){return we[C>>1]};case 2:return h?function(C){return J[C>>2]}:function(C){return X[C>>2]};default:throw new TypeError("Unknown integer type: "+c)}}function pn(c,l,h,g,C){l=Re(l);var S=k(h),D=te=>te;if(g===0){var T=32-8*h;D=te=>te<<T>>>T}var W=l.includes("unsigned"),F=(te,fe)=>{},ee;W?ee=function(te,fe){return F(fe,this.name),fe>>>0}:ee=function(te,fe){return F(fe,this.name),fe},Oe(c,{name:l,fromWireType:D,toWireType:ee,argPackAdvance:8,readValueFromPointer:hn(l,S,g!==0),destructorFunction:null})}function vn(c,l,h){var g=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],C=g[l];function S(D){D=D>>2;var T=X,W=T[D],F=T[D+1];return new C(T.buffer,F,W)}h=Re(h),Oe(c,{name:h,fromWireType:S,argPackAdvance:8,readValueFromPointer:S},{ignoreDuplicateRegistrations:!0})}var be=(c,l,h,g)=>{if(!(g>0))return 0;for(var C=h,S=h+g-1,D=0;D<c.length;++D){var T=c.charCodeAt(D);if(T>=55296&&T<=57343){var W=c.charCodeAt(++D);T=65536+((T&1023)<<10)|W&1023}if(T<=127){if(h>=S)break;l[h++]=T}else if(T<=2047){if(h+1>=S)break;l[h++]=192|T>>6,l[h++]=128|T&63}else if(T<=65535){if(h+2>=S)break;l[h++]=224|T>>12,l[h++]=128|T>>6&63,l[h++]=128|T&63}else{if(h+3>=S)break;l[h++]=240|T>>18,l[h++]=128|T>>12&63,l[h++]=128|T>>6&63,l[h++]=128|T&63}}return l[h]=0,h-C},mn=(c,l,h)=>be(c,N,l,h),gn=c=>{for(var l=0,h=0;h<c.length;++h){var g=c.charCodeAt(h);g<=127?l++:g<=2047?l+=2:g>=55296&&g<=57343?(l+=4,++h):l+=3}return l},nr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Yr=(c,l,h)=>{for(var g=l+h,C=l;c[C]&&!(C>=g);)++C;if(C-l>16&&c.buffer&&nr)return nr.decode(c.subarray(l,C));for(var S="";l<C;){var D=c[l++];if(!(D&128)){S+=String.fromCharCode(D);continue}var T=c[l++]&63;if((D&224)==192){S+=String.fromCharCode((D&31)<<6|T);continue}var W=c[l++]&63;if((D&240)==224?D=(D&15)<<12|T<<6|W:D=(D&7)<<18|T<<12|W<<6|c[l++]&63,D<65536)S+=String.fromCharCode(D);else{var F=D-65536;S+=String.fromCharCode(55296|F>>10,56320|F&1023)}}return S},yn=(c,l)=>c?Yr(N,c,l):"";function wn(c,l){l=Re(l);var h=l==="std::string";Oe(c,{name:l,fromWireType:function(g){var C=X[g>>2],S=g+4,D;if(h)for(var T=S,W=0;W<=C;++W){var F=S+W;if(W==C||N[F]==0){var ee=F-T,te=yn(T,ee);D===void 0?D=te:(D+=String.fromCharCode(0),D+=te),T=F+1}}else{for(var fe=new Array(C),W=0;W<C;++W)fe[W]=String.fromCharCode(N[S+W]);D=fe.join("")}return Ze(g),D},toWireType:function(g,C){C instanceof ArrayBuffer&&(C=new Uint8Array(C));var S,D=typeof C=="string";D||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Int8Array||ce("Cannot pass non-string to std::string"),h&&D?S=gn(C):S=C.length;var T=Or(4+S+1),W=T+4;if(X[T>>2]=S,h&&D)mn(C,W,S+1);else if(D)for(var F=0;F<S;++F){var ee=C.charCodeAt(F);ee>255&&(Ze(W),ce("String has UTF-16 code units that do not fit in 8 bits")),N[W+F]=ee}else for(var F=0;F<S;++F)N[W+F]=C[F];return g!==null&&g.push(Ze,T),T},argPackAdvance:8,readValueFromPointer:gr,destructorFunction:function(g){Ze(g)}})}var je=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,_n=(c,l)=>{for(var h=c,g=h>>1,C=g+l/2;!(g>=C)&&we[g];)++g;if(h=g<<1,h-c>32&&je)return je.decode(N.subarray(c,h));for(var S="",D=0;!(D>=l/2);++D){var T=re[c+D*2>>1];if(T==0)break;S+=String.fromCharCode(T)}return S},dt=(c,l,h)=>{if(h===void 0&&(h=2147483647),h<2)return 0;h-=2;for(var g=l,C=h<c.length*2?h/2:c.length,S=0;S<C;++S){var D=c.charCodeAt(S);re[l>>1]=D,l+=2}return re[l>>1]=0,l-g},ht=c=>c.length*2,Fr=(c,l)=>{for(var h=0,g="";!(h>=l/4);){var C=J[c+h*4>>2];if(C==0)break;if(++h,C>=65536){var S=C-65536;g+=String.fromCharCode(55296|S>>10,56320|S&1023)}else g+=String.fromCharCode(C)}return g},bn=(c,l,h)=>{if(h===void 0&&(h=2147483647),h<4)return 0;for(var g=l,C=g+h-4,S=0;S<c.length;++S){var D=c.charCodeAt(S);if(D>=55296&&D<=57343){var T=c.charCodeAt(++S);D=65536+((D&1023)<<10)|T&1023}if(J[l>>2]=D,l+=4,l+4>C)break}return J[l>>2]=0,l-g},pt=c=>{for(var l=0,h=0;h<c.length;++h){var g=c.charCodeAt(h);g>=55296&&g<=57343&&++h,l+=4}return l},En=function(c,l,h){h=Re(h);var g,C,S,D,T;l===2?(g=_n,C=dt,D=ht,S=()=>we,T=1):l===4&&(g=Fr,C=bn,D=pt,S=()=>X,T=2),Oe(c,{name:h,fromWireType:function(W){for(var F=X[W>>2],ee=S(),te,fe=W+4,he=0;he<=F;++he){var Ee=W+4+he*l;if(he==F||ee[Ee>>T]==0){var Ie=Ee-fe,De=g(fe,Ie);te===void 0?te=De:(te+=String.fromCharCode(0),te+=De),fe=Ee+l}}return Ze(W),te},toWireType:function(W,F){typeof F!="string"&&ce(`Cannot pass non-string to C++ string type ${h}`);var ee=D(F),te=Or(4+ee+l);return X[te>>2]=ee>>T,C(F,te+4,ee+l),W!==null&&W.push(Ze,te),te},argPackAdvance:8,readValueFromPointer:gr,destructorFunction:function(W){Ze(W)}})};function vt(c,l){l=Re(l),Oe(c,{isVoid:!0,name:l,argPackAdvance:0,fromWireType:function(){},toWireType:function(h,g){}})}var mt={};function Pn(c){var l=mt[c];return l===void 0?Re(c):l}var gt=[];function Cn(c,l,h,g){c=gt[c],l=Kr.toValue(l),h=Pn(h),c(l,h,null,g)}function yt(c){var l=gt.length;return gt.push(c),l}function me(c,l){var h=sr[c];return h===void 0&&ce(l+" has unknown type "+qe(c)),h}function wt(c,l){for(var h=new Array(c),g=0;g<c;++g)h[g]=me(X[l+g*4>>2],"parameter "+g);return h}var Ut=[];function Tn(c,l){var h=wt(c,l),g=h[0],C=g.name+"_$"+h.slice(1).map(function(Ee){return Ee.name}).join("_")+"$",S=Ut[C];if(S!==void 0)return S;for(var D=["retType"],T=[g],W="",F=0;F<c-1;++F)W+=(F!==0?", ":"")+"arg"+F,D.push("argType"+F),T.push(h[1+F]);for(var ee=Gr("methodCaller_"+C),te="return function "+ee+`(handle, name, destructors, args) {
`,fe=0,F=0;F<c-1;++F)te+="    var arg"+F+" = argType"+F+".readValueFromPointer(args"+(fe?"+"+fe:"")+`);
`,fe+=h[F+1].argPackAdvance;te+="    var rv = handle[name]("+W+`);
`;for(var F=0;F<c-1;++F)h[F+1].deleteObject&&(te+="    argType"+F+".deleteObject(arg"+F+`);
`);g.isVoid||(te+=`    return retType.toWireType(destructors, rv);
`),te+=`};
`,D.push(te);var he=Rt(Function,D).apply(null,T);return S=yt(he),Ut[C]=S,S}var vr=()=>{Ce("")},Mt;Mt=()=>performance.now();var Rr=(c,l,h)=>N.copyWithin(c,l,l+h),$n=c=>{Ce("OOM")},kn=c=>{N.length,$n()},Sn=[null,[],[]],An=(c,l)=>{var h=Sn[c];l===0||l===10?((c===1?I:se)(Yr(h,0)),h.length=0):h.push(l)},Dn=(c,l,h,g)=>{for(var C=0,S=0;S<h;S++){var D=X[l>>2],T=X[l+4>>2];l+=8;for(var W=0;W<T;W++)An(c,N[D+W]);C+=T}return X[g>>2]=C,0};K(),z=s.BindingError=class extends Error{constructor(l){super(l),this.name="BindingError"}},Br=s.InternalError=class extends Error{constructor(l){super(l),this.name="InternalError"}},L(),Jt(),nn(),Dt=s.UnboundTypeError=dr(Error,"UnboundTypeError"),hr(),Dr();var Fn={o:Gt,r:Xt,m:Pr,q:sn,p:un,d:fn,u:ln,k:dn,b:pn,a:vn,j:wn,g:En,n:vt,e:Cn,l:Ot,h:Tn,f:vr,c:Mt,t:Rr,s:kn,i:Dn};He();var Ze=c=>(Ze=B.x)(c),Or=c=>(Or=B.y)(c),jt=c=>(jt=B.A)(c);s.__embind_initialize_bindings=()=>(s.__embind_initialize_bindings=B.B)();var It=c=>(It=B.C)(c);s.dynCall_jiji=(c,l,h,g,C)=>(s.dynCall_jiji=B.D)(c,l,h,g,C);var Jr;br=function c(){Jr||Ht(),Jr||(br=c)};function Ht(){if(or>0||(et(),or>0))return;function c(){Jr||(Jr=!0,s.calledRun=!0,!V&&(rt(),m(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),tt()))}s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),c()},1)):c()}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();return Ht(),d.ready}})();var so=Object.defineProperty,ao=Object.getOwnPropertyDescriptor,qn=($,d,s,m)=>{for(var y=m>1?void 0:m?ao(d,s):d,O=$.length-1,R;O>=0;O--)(R=$[O])&&(y=(m?R(d,s,y):R(y))||y);return m&&y&&so(d,s,y),y};class Wt extends le{async initialize(){this.decoder=new VideoDecoder({output:d=>{this.emit(Ir.VideoFrame,d)},error:d=>{this.close(),this.emit(Ir.Error,d)}})}configure(d){this.config=d,this.decoder.configure({...d,codec:this.getCodec(d)})}getCodec(d){switch(d.codec){case"hevc":return"hvc1.1.6.L0.12.34.56.78.9A.BC";case"av1":return"av01.0.05M.08";case"avc":return"avc1.420028";default:return d.codec}}decode(d){this.decoder.state==="configured"&&this.decoder.decode(new EncodedVideoChunk(d))}flush(){this.decoder.flush()}reset(){this.decoder.reset()}close(){this.decoder.state!=="closed"&&this.decoder.close()}}qn([$e([le.INIT,"closed"],"initialized")],Wt.prototype,"initialize",1);qn([$e("initialized","configured")],Wt.prototype,"configure",1);qn([zn("configured")],Wt.prototype,"decode",1);qn([$e([],le.INIT)],Wt.prototype,"reset",1);qn([$e([],"closed",{ignoreError:!0})],Wt.prototype,"close",1);var uo=(()=>{var $=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(d={}){var s=d,m,y;s.ready=new Promise((e,r)=>{m=e,y=r});var O=Object.assign({},s),R="./this.program",q=typeof window=="object",j=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var E="";function M(e){return s.locateFile?s.locateFile(e,E):E+e}var I,se,ae;(q||j)&&(j?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),$&&(E=$),E.indexOf("blob:")!==0?E=E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1):E="",I=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},j&&(ae=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),se=(e,r,t)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{if(n.status==200||n.status==0&&n.response){r(n.response);return}t()},n.onerror=t,n.send(null)});var oe=s.print||console.log.bind(console),B=s.printErr||console.error.bind(console);Object.assign(s,O),O=null,s.arguments&&s.arguments,s.thisProgram&&(R=s.thisProgram),s.quit&&s.quit;var V;s.wasmBinary&&(V=s.wasmBinary),s.noExitRuntime,typeof WebAssembly!="object"&&Fe("no native wasm support detected");var G,N,re=!1;function we(e,r){e||Fe(r)}var J,X,Pe,er,H,x,Wr,zr;function Pt(){var e=G.buffer;s.HEAP8=J=new Int8Array(e),s.HEAP16=Pe=new Int16Array(e),s.HEAP32=H=new Int32Array(e),s.HEAPU8=X=new Uint8Array(e),s.HEAPU16=er=new Uint16Array(e),s.HEAPU32=x=new Uint32Array(e),s.HEAPF32=Wr=new Float32Array(e),s.HEAPF64=zr=new Float64Array(e)}var et,rt=[],tt=[],nt=[];function Nt(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)br(s.preRun.shift());mr(rt)}function xt(){!s.noFSInit&&!i.init.initialized&&i.init(),i.ignorePermissions=!1,mr(tt)}function or(){if(s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)Vt(s.postRun.shift());mr(nt)}function br(e){rt.unshift(e)}function Bt(e){tt.unshift(e)}function Vt(e){nt.unshift(e)}var Ce=0,Xe=null;function Yn(e){return e}function Be(e){Ce++,s.monitorRunDependencies&&s.monitorRunDependencies(Ce)}function rr(e){if(Ce--,s.monitorRunDependencies&&s.monitorRunDependencies(Ce),Ce==0&&Xe){var r=Xe;Xe=null,r()}}function Fe(e){s.onAbort&&s.onAbort(e),e="Aborted("+e+")",B(e),re=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw y(r),r}var Ct="data:application/octet-stream;base64,";function it(e){return e.startsWith(Ct)}var He;He="audiodec.wasm",it(He)||(He=M(He));function Er(e){if(e==He&&V)return new Uint8Array(V);if(ae)return ae(e);throw"both async and sync fetching of the wasm failed"}function qt(e){return!V&&(q||j)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at '"+e+"'";return r.arrayBuffer()}).catch(()=>Er(e)):Promise.resolve().then(()=>Er(e))}function Nr(e,r,t){return qt(e).then(n=>WebAssembly.instantiate(n,r)).then(n=>n).then(t,n=>{B("failed to asynchronously prepare wasm: "+n),Fe(n)})}function Gt(e,r,t,n){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!it(r)&&typeof fetch=="function"?fetch(r,{credentials:"same-origin"}).then(o=>{var a=WebAssembly.instantiateStreaming(o,t);return a.then(n,function(f){return B("wasm streaming compile failed: "+f),B("falling back to ArrayBuffer instantiation"),Nr(r,t,n)})}):Nr(r,t,n)}function Xt(){var e={a:fi};function r(n,o){var a=n.exports;return N=a,G=N.E,Pt(),et=N.H,Bt(N.F),rr(),a}Be();function t(n){r(n.instance)}if(s.instantiateWasm)try{return s.instantiateWasm(e,r)}catch(n){B("Module.instantiateWasm callback failed with error: "+n),y(n)}return Gt(V,He,e,t).catch(y),{}}var k,K,mr=e=>{for(;e.length>0;)e.shift()(s)};function Re(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(r){x[this.ptr+4>>2]=r},this.get_type=function(){return x[this.ptr+4>>2]},this.set_destructor=function(r){x[this.ptr+8>>2]=r},this.get_destructor=function(){return x[this.ptr+8>>2]},this.set_caught=function(r){r=r?1:0,J[this.ptr+12>>0]=r},this.get_caught=function(){return J[this.ptr+12>>0]!=0},this.set_rethrown=function(r){r=r?1:0,J[this.ptr+13>>0]=r},this.get_rethrown=function(){return J[this.ptr+13>>0]!=0},this.init=function(r,t){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(t)},this.set_adjusted_ptr=function(r){x[this.ptr+16>>2]=r},this.get_adjusted_ptr=function(){return x[this.ptr+16>>2]},this.get_exception_ptr=function(){var r=jn(this.get_type());if(r)return x[this.excPtr>>2];var t=this.get_adjusted_ptr();return t!==0?t:this.excPtr}}var tr=0;function sr(e,r,t){var n=new Re(e);throw n.init(r,t),tr=e,tr}var xr=e=>(H[Un()>>2]=e,e),z={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return r.exec(e).slice(1)},normalizeArray:(e,r)=>{for(var t=0,n=e.length-1;n>=0;n--){var o=e[n];o==="."?e.splice(n,1):o===".."?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(r)for(;t;t--)e.unshift("..");return e},normalize:e=>{var r=z.isAbs(e),t=e.substr(-1)==="/";return e=z.normalizeArray(e.split("/").filter(n=>!!n),!r).join("/"),!e&&!r&&(e="."),e&&t&&(e+="/"),(r?"/":"")+e},dirname:e=>{var r=z.splitPath(e),t=r[0],n=r[1];return!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)},basename:e=>{if(e==="/")return"/";e=z.normalize(e),e=e.replace(/\/$/,"");var r=e.lastIndexOf("/");return r===-1?e:e.substr(r+1)},join:function(){var e=Array.prototype.slice.call(arguments);return z.normalize(e.join("/"))},join2:(e,r)=>z.normalize(e+"/"+r)},ce=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);Fe("initRandomDevice")},Br=e=>(Br=ce())(e),ge={resolve:function(){for(var e="",r=!1,t=arguments.length-1;t>=-1&&!r;t--){var n=t>=0?arguments[t]:i.cwd();if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,r=z.isAbs(n)}return e=z.normalizeArray(e.split("/").filter(o=>!!o),!r).join("/"),(r?"/":"")+e||"."},relative:(e,r)=>{e=ge.resolve(e).substr(1),r=ge.resolve(r).substr(1);function t(p){for(var _=0;_<p.length&&p[_]==="";_++);for(var P=p.length-1;P>=0&&p[P]==="";P--);return _>P?[]:p.slice(_,P-_+1)}for(var n=t(e.split("/")),o=t(r.split("/")),a=Math.min(n.length,o.length),f=a,u=0;u<a;u++)if(n[u]!==o[u]){f=u;break}for(var v=[],u=f;u<n.length;u++)v.push("..");return v=v.concat(o.slice(f)),v.join("/")}},ar=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Le=(e,r,t)=>{for(var n=r+t,o=r;e[o]&&!(o>=n);)++o;if(o-r>16&&e.buffer&&ar)return ar.decode(e.subarray(r,o));for(var a="";r<o;){var f=e[r++];if(!(f&128)){a+=String.fromCharCode(f);continue}var u=e[r++]&63;if((f&224)==192){a+=String.fromCharCode((f&31)<<6|u);continue}var v=e[r++]&63;if((f&240)==224?f=(f&15)<<12|u<<6|v:f=(f&7)<<18|u<<12|v<<6|e[r++]&63,f<65536)a+=String.fromCharCode(f);else{var p=f-65536;a+=String.fromCharCode(55296|p>>10,56320|p&1023)}}return a},Oe=[],Pr=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n<=127?r++:n<=2047?r+=2:n>=55296&&n<=57343?(r+=4,++t):r+=3}return r},Cr=(e,r,t,n)=>{if(!(n>0))return 0;for(var o=t,a=t+n-1,f=0;f<e.length;++f){var u=e.charCodeAt(f);if(u>=55296&&u<=57343){var v=e.charCodeAt(++f);u=65536+((u&1023)<<10)|v&1023}if(u<=127){if(t>=a)break;r[t++]=u}else if(u<=2047){if(t+1>=a)break;r[t++]=192|u>>6,r[t++]=128|u&63}else if(u<=65535){if(t+2>=a)break;r[t++]=224|u>>12,r[t++]=128|u>>6&63,r[t++]=128|u&63}else{if(t+3>=a)break;r[t++]=240|u>>18,r[t++]=128|u>>12&63,r[t++]=128|u>>6&63,r[t++]=128|u&63}}return r[t]=0,t-o};function Tr(e,r,t){var n=t>0?t:Pr(e)+1,o=new Array(n),a=Cr(e,o,0,o.length);return r&&(o.length=a),o}var ot=()=>{if(!Oe.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e)return null;Oe=Tr(e,!0)}return Oe.shift()},ke={ttys:[],init:function(){},shutdown:function(){},register:function(e,r){ke.ttys[e]={input:[],output:[],ops:r},i.registerDevice(e,ke.stream_ops)},stream_ops:{open:function(e){var r=ke.ttys[e.node.rdev];if(!r)throw new i.ErrnoError(43);e.tty=r,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,r,t,n,o){if(!e.tty||!e.tty.ops.get_char)throw new i.ErrnoError(60);for(var a=0,f=0;f<n;f++){var u;try{u=e.tty.ops.get_char(e.tty)}catch{throw new i.ErrnoError(29)}if(u===void 0&&a===0)throw new i.ErrnoError(6);if(u==null)break;a++,r[t+f]=u}return a&&(e.node.timestamp=Date.now()),a},write:function(e,r,t,n,o){if(!e.tty||!e.tty.ops.put_char)throw new i.ErrnoError(60);try{for(var a=0;a<n;a++)e.tty.ops.put_char(e.tty,r[t+a])}catch{throw new i.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){return ot()},put_char:function(e,r){r===null||r===10?(oe(Le(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},fsync:function(e){e.output&&e.output.length>0&&(oe(Le(e.output,0)),e.output=[])},ioctl_tcgets:function(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets:function(e,r,t){return 0},ioctl_tiocgwinsz:function(e){return[24,80]}},default_tty1_ops:{put_char:function(e,r){r===null||r===10?(B(Le(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},fsync:function(e){e.output&&e.output.length>0&&(B(Le(e.output,0)),e.output=[])}}},Vr=e=>{Fe()},U={ops_table:null,mount(e){return U.createNode(null,"/",16895,0)},createNode(e,r,t,n){if(i.isBlkdev(t)||i.isFIFO(t))throw new i.ErrnoError(63);U.ops_table||(U.ops_table={dir:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr,lookup:U.node_ops.lookup,mknod:U.node_ops.mknod,rename:U.node_ops.rename,unlink:U.node_ops.unlink,rmdir:U.node_ops.rmdir,readdir:U.node_ops.readdir,symlink:U.node_ops.symlink},stream:{llseek:U.stream_ops.llseek}},file:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr},stream:{llseek:U.stream_ops.llseek,read:U.stream_ops.read,write:U.stream_ops.write,allocate:U.stream_ops.allocate,mmap:U.stream_ops.mmap,msync:U.stream_ops.msync}},link:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr,readlink:U.node_ops.readlink},stream:{}},chrdev:{node:{getattr:U.node_ops.getattr,setattr:U.node_ops.setattr},stream:i.chrdev_stream_ops}});var o=i.createNode(e,r,t,n);return i.isDir(o.mode)?(o.node_ops=U.ops_table.dir.node,o.stream_ops=U.ops_table.dir.stream,o.contents={}):i.isFile(o.mode)?(o.node_ops=U.ops_table.file.node,o.stream_ops=U.ops_table.file.stream,o.usedBytes=0,o.contents=null):i.isLink(o.mode)?(o.node_ops=U.ops_table.link.node,o.stream_ops=U.ops_table.link.stream):i.isChrdev(o.mode)&&(o.node_ops=U.ops_table.chrdev.node,o.stream_ops=U.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[r]=o,e.timestamp=o.timestamp),o},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,r){var t=e.contents?e.contents.length:0;if(!(t>=r)){var n=1024*1024;r=Math.max(r,t*(t<n?2:1.125)>>>0),t!=0&&(r=Math.max(r,256));var o=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(o.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,r){if(e.usedBytes!=r)if(r==0)e.contents=null,e.usedBytes=0;else{var t=e.contents;e.contents=new Uint8Array(r),t&&e.contents.set(t.subarray(0,Math.min(r,e.usedBytes))),e.usedBytes=r}},node_ops:{getattr(e){var r={};return r.dev=i.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,i.isDir(e.mode)?r.size=4096:i.isFile(e.mode)?r.size=e.usedBytes:i.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.timestamp),r.mtime=new Date(e.timestamp),r.ctime=new Date(e.timestamp),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr(e,r){r.mode!==void 0&&(e.mode=r.mode),r.timestamp!==void 0&&(e.timestamp=r.timestamp),r.size!==void 0&&U.resizeFileStorage(e,r.size)},lookup(e,r){throw i.genericErrors[44]},mknod(e,r,t,n){return U.createNode(e,r,t,n)},rename(e,r,t){if(i.isDir(e.mode)){var n;try{n=i.lookupNode(r,t)}catch{}if(n)for(var o in n.contents)throw new i.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=t,r.contents[t]=e,r.timestamp=e.parent.timestamp,e.parent=r},unlink(e,r){delete e.contents[r],e.timestamp=Date.now()},rmdir(e,r){var t=i.lookupNode(e,r);for(var n in t.contents)throw new i.ErrnoError(55);delete e.contents[r],e.timestamp=Date.now()},readdir(e){var r=[".",".."];for(var t in e.contents)e.contents.hasOwnProperty(t)&&r.push(t);return r},symlink(e,r,t){var n=U.createNode(e,r,41471,0);return n.link=t,n},readlink(e){if(!i.isLink(e.mode))throw new i.ErrnoError(28);return e.link}},stream_ops:{read(e,r,t,n,o){var a=e.node.contents;if(o>=e.node.usedBytes)return 0;var f=Math.min(e.node.usedBytes-o,n);if(f>8&&a.subarray)r.set(a.subarray(o,o+f),t);else for(var u=0;u<f;u++)r[t+u]=a[o+u];return f},write(e,r,t,n,o,a){if(!n)return 0;var f=e.node;if(f.timestamp=Date.now(),r.subarray&&(!f.contents||f.contents.subarray)){if(a)return f.contents=r.subarray(t,t+n),f.usedBytes=n,n;if(f.usedBytes===0&&o===0)return f.contents=r.slice(t,t+n),f.usedBytes=n,n;if(o+n<=f.usedBytes)return f.contents.set(r.subarray(t,t+n),o),n}if(U.expandFileStorage(f,o+n),f.contents.subarray&&r.subarray)f.contents.set(r.subarray(t,t+n),o);else for(var u=0;u<n;u++)f.contents[o+u]=r[t+u];return f.usedBytes=Math.max(f.usedBytes,o+n),n},llseek(e,r,t){var n=r;if(t===1?n+=e.position:t===2&&i.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new i.ErrnoError(28);return n},allocate(e,r,t){U.expandFileStorage(e.node,r+t),e.node.usedBytes=Math.max(e.node.usedBytes,r+t)},mmap(e,r,t,n,o){if(!i.isFile(e.node.mode))throw new i.ErrnoError(43);var a,f,u=e.node.contents;if(!(o&2)&&u.buffer===J.buffer)f=!1,a=u.byteOffset;else{if((t>0||t+r<u.length)&&(u.subarray?u=u.subarray(t,t+r):u=Array.prototype.slice.call(u,t,t+r)),f=!0,a=Vr(),!a)throw new i.ErrnoError(48);J.set(u,a)}return{ptr:a,allocated:f}},msync(e,r,t,n,o){return U.stream_ops.write(e,r,0,n,t,!1),0}}},Tt=(e,r,t,n)=>{var o=n?"":`al ${e}`;se(e,a=>{we(a,`Loading data file "${e}" failed (no arrayBuffer).`),r(new Uint8Array(a)),o&&rr()},a=>{if(t)t();else throw`Loading data file "${e}" failed.`}),o&&Be()},$t=s.preloadPlugins||[];function kt(e,r,t,n){typeof Browser<"u"&&Browser.init();var o=!1;return $t.forEach(function(a){o||a.canHandle(r)&&(a.handle(e,r,t,n),o=!0)}),o}function Kt(e,r,t,n,o,a,f,u,v,p){var _=r?ge.resolve(z.join2(e,r)):e;function P(b){function w(A){p&&p(),u||i.createDataFile(e,r,A,n,o,v),a&&a(),rr()}kt(b,_,w,()=>{f&&f(),rr()})||w(b)}Be(),typeof t=="string"?Tt(t,b=>P(b),f):P(t)}function Yt(e){var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},t=r[e];if(typeof t>"u")throw new Error(`Unknown file open mode: ${e}`);return t}function Ke(e,r){var t=0;return e&&(t|=365),r&&(t|=146),t}var i={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,r={})=>{if(e=ge.resolve(e),!e)return{path:"",node:null};var t={follow_mount:!0,recurse_count:0};if(r=Object.assign(t,r),r.recurse_count>8)throw new i.ErrnoError(32);for(var n=e.split("/").filter(P=>!!P),o=i.root,a="/",f=0;f<n.length;f++){var u=f===n.length-1;if(u&&r.parent)break;if(o=i.lookupNode(o,n[f]),a=z.join2(a,n[f]),i.isMountpoint(o)&&(!u||u&&r.follow_mount)&&(o=o.mounted.root),!u||r.follow)for(var v=0;i.isLink(o.mode);){var p=i.readlink(a);a=ge.resolve(z.dirname(a),p);var _=i.lookupPath(a,{recurse_count:r.recurse_count+1});if(o=_.node,v++>40)throw new i.ErrnoError(32)}}return{path:a,node:o}},getPath:e=>{for(var r;;){if(i.isRoot(e)){var t=e.mount.mountpoint;return r?t[t.length-1]!=="/"?`${t}/${r}`:t+r:t}r=r?`${e.name}/${r}`:e.name,e=e.parent}},hashName:(e,r)=>{for(var t=0,n=0;n<r.length;n++)t=(t<<5)-t+r.charCodeAt(n)|0;return(e+t>>>0)%i.nameTable.length},hashAddNode:e=>{var r=i.hashName(e.parent.id,e.name);e.name_next=i.nameTable[r],i.nameTable[r]=e},hashRemoveNode:e=>{var r=i.hashName(e.parent.id,e.name);if(i.nameTable[r]===e)i.nameTable[r]=e.name_next;else for(var t=i.nameTable[r];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode:(e,r)=>{var t=i.mayLookup(e);if(t)throw new i.ErrnoError(t,e);for(var n=i.hashName(e.id,r),o=i.nameTable[n];o;o=o.name_next){var a=o.name;if(o.parent.id===e.id&&a===r)return o}return i.lookup(e,r)},createNode:(e,r,t,n)=>{var o=new i.FSNode(e,r,t,n);return i.hashAddNode(o),o},destroyNode:e=>{i.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>(e&61440)===32768,isDir:e=>(e&61440)===16384,isLink:e=>(e&61440)===40960,isChrdev:e=>(e&61440)===8192,isBlkdev:e=>(e&61440)===24576,isFIFO:e=>(e&61440)===4096,isSocket:e=>(e&49152)===49152,flagsToPermissionString:e=>{var r=["r","w","rw"][e&3];return e&512&&(r+="w"),r},nodePermissions:(e,r)=>i.ignorePermissions?0:r.includes("r")&&!(e.mode&292)||r.includes("w")&&!(e.mode&146)||r.includes("x")&&!(e.mode&73)?2:0,mayLookup:e=>{var r=i.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:2)},mayCreate:(e,r)=>{try{var t=i.lookupNode(e,r);return 20}catch{}return i.nodePermissions(e,"wx")},mayDelete:(e,r,t)=>{var n;try{n=i.lookupNode(e,r)}catch(a){return a.errno}var o=i.nodePermissions(e,"wx");if(o)return o;if(t){if(!i.isDir(n.mode))return 54;if(i.isRoot(n)||i.getPath(n)===i.cwd())return 10}else if(i.isDir(n.mode))return 31;return 0},mayOpen:(e,r)=>e?i.isLink(e.mode)?32:i.isDir(e.mode)&&(i.flagsToPermissionString(r)!=="r"||r&512)?31:i.nodePermissions(e,i.flagsToPermissionString(r)):44,MAX_OPEN_FDS:4096,nextfd:()=>{for(var e=0;e<=i.MAX_OPEN_FDS;e++)if(!i.streams[e])return e;throw new i.ErrnoError(33)},getStreamChecked:e=>{var r=i.getStream(e);if(!r)throw new i.ErrnoError(8);return r},getStream:e=>i.streams[e],createStream:(e,r=-1)=>(i.FSStream||(i.FSStream=function(){this.shared={}},i.FSStream.prototype={},Object.defineProperties(i.FSStream.prototype,{object:{get(){return this.node},set(t){this.node=t}},isRead:{get(){return(this.flags&2097155)!==1}},isWrite:{get(){return(this.flags&2097155)!==0}},isAppend:{get(){return this.flags&1024}},flags:{get(){return this.shared.flags},set(t){this.shared.flags=t}},position:{get(){return this.shared.position},set(t){this.shared.position=t}}})),e=Object.assign(new i.FSStream,e),r==-1&&(r=i.nextfd()),e.fd=r,i.streams[r]=e,e),closeStream:e=>{i.streams[e]=null},chrdev_stream_ops:{open:e=>{var r=i.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new i.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,r)=>e<<8|r,registerDevice:(e,r)=>{i.devices[e]={stream_ops:r}},getDevice:e=>i.devices[e],getMounts:e=>{for(var r=[],t=[e];t.length;){var n=t.pop();r.push(n),t.push.apply(t,n.mounts)}return r},syncfs:(e,r)=>{typeof e=="function"&&(r=e,e=!1),i.syncFSRequests++,i.syncFSRequests>1&&B(`warning: ${i.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var t=i.getMounts(i.root.mount),n=0;function o(f){return i.syncFSRequests--,r(f)}function a(f){if(f)return a.errored?void 0:(a.errored=!0,o(f));++n>=t.length&&o(null)}t.forEach(f=>{if(!f.type.syncfs)return a(null);f.type.syncfs(f,e,a)})},mount:(e,r,t)=>{var n=t==="/",o=!t,a;if(n&&i.root)throw new i.ErrnoError(10);if(!n&&!o){var f=i.lookupPath(t,{follow_mount:!1});if(t=f.path,a=f.node,i.isMountpoint(a))throw new i.ErrnoError(10);if(!i.isDir(a.mode))throw new i.ErrnoError(54)}var u={type:e,opts:r,mountpoint:t,mounts:[]},v=e.mount(u);return v.mount=u,u.root=v,n?i.root=v:a&&(a.mounted=u,a.mount&&a.mount.mounts.push(u)),v},unmount:e=>{var r=i.lookupPath(e,{follow_mount:!1});if(!i.isMountpoint(r.node))throw new i.ErrnoError(28);var t=r.node,n=t.mounted,o=i.getMounts(n);Object.keys(i.nameTable).forEach(f=>{for(var u=i.nameTable[f];u;){var v=u.name_next;o.includes(u.mount)&&i.destroyNode(u),u=v}}),t.mounted=null;var a=t.mount.mounts.indexOf(n);t.mount.mounts.splice(a,1)},lookup:(e,r)=>e.node_ops.lookup(e,r),mknod:(e,r,t)=>{var n=i.lookupPath(e,{parent:!0}),o=n.node,a=z.basename(e);if(!a||a==="."||a==="..")throw new i.ErrnoError(28);var f=i.mayCreate(o,a);if(f)throw new i.ErrnoError(f);if(!o.node_ops.mknod)throw new i.ErrnoError(63);return o.node_ops.mknod(o,a,r,t)},create:(e,r)=>(r=r!==void 0?r:438,r&=4095,r|=32768,i.mknod(e,r,0)),mkdir:(e,r)=>(r=r!==void 0?r:511,r&=1023,r|=16384,i.mknod(e,r,0)),mkdirTree:(e,r)=>{for(var t=e.split("/"),n="",o=0;o<t.length;++o)if(t[o]){n+="/"+t[o];try{i.mkdir(n,r)}catch(a){if(a.errno!=20)throw a}}},mkdev:(e,r,t)=>(typeof t>"u"&&(t=r,r=438),r|=8192,i.mknod(e,r,t)),symlink:(e,r)=>{if(!ge.resolve(e))throw new i.ErrnoError(44);var t=i.lookupPath(r,{parent:!0}),n=t.node;if(!n)throw new i.ErrnoError(44);var o=z.basename(r),a=i.mayCreate(n,o);if(a)throw new i.ErrnoError(a);if(!n.node_ops.symlink)throw new i.ErrnoError(63);return n.node_ops.symlink(n,o,e)},rename:(e,r)=>{var t=z.dirname(e),n=z.dirname(r),o=z.basename(e),a=z.basename(r),f,u,v;if(f=i.lookupPath(e,{parent:!0}),u=f.node,f=i.lookupPath(r,{parent:!0}),v=f.node,!u||!v)throw new i.ErrnoError(44);if(u.mount!==v.mount)throw new i.ErrnoError(75);var p=i.lookupNode(u,o),_=ge.relative(e,n);if(_.charAt(0)!==".")throw new i.ErrnoError(28);if(_=ge.relative(r,t),_.charAt(0)!==".")throw new i.ErrnoError(55);var P;try{P=i.lookupNode(v,a)}catch{}if(p!==P){var b=i.isDir(p.mode),w=i.mayDelete(u,o,b);if(w)throw new i.ErrnoError(w);if(w=P?i.mayDelete(v,a,b):i.mayCreate(v,a),w)throw new i.ErrnoError(w);if(!u.node_ops.rename)throw new i.ErrnoError(63);if(i.isMountpoint(p)||P&&i.isMountpoint(P))throw new i.ErrnoError(10);if(v!==u&&(w=i.nodePermissions(u,"w"),w))throw new i.ErrnoError(w);i.hashRemoveNode(p);try{u.node_ops.rename(p,v,a)}catch(A){throw A}finally{i.hashAddNode(p)}}},rmdir:e=>{var r=i.lookupPath(e,{parent:!0}),t=r.node,n=z.basename(e),o=i.lookupNode(t,n),a=i.mayDelete(t,n,!0);if(a)throw new i.ErrnoError(a);if(!t.node_ops.rmdir)throw new i.ErrnoError(63);if(i.isMountpoint(o))throw new i.ErrnoError(10);t.node_ops.rmdir(t,n),i.destroyNode(o)},readdir:e=>{var r=i.lookupPath(e,{follow:!0}),t=r.node;if(!t.node_ops.readdir)throw new i.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var r=i.lookupPath(e,{parent:!0}),t=r.node;if(!t)throw new i.ErrnoError(44);var n=z.basename(e),o=i.lookupNode(t,n),a=i.mayDelete(t,n,!1);if(a)throw new i.ErrnoError(a);if(!t.node_ops.unlink)throw new i.ErrnoError(63);if(i.isMountpoint(o))throw new i.ErrnoError(10);t.node_ops.unlink(t,n),i.destroyNode(o)},readlink:e=>{var r=i.lookupPath(e),t=r.node;if(!t)throw new i.ErrnoError(44);if(!t.node_ops.readlink)throw new i.ErrnoError(28);return ge.resolve(i.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,r)=>{var t=i.lookupPath(e,{follow:!r}),n=t.node;if(!n)throw new i.ErrnoError(44);if(!n.node_ops.getattr)throw new i.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>i.stat(e,!0),chmod:(e,r,t)=>{var n;if(typeof e=="string"){var o=i.lookupPath(e,{follow:!t});n=o.node}else n=e;if(!n.node_ops.setattr)throw new i.ErrnoError(63);n.node_ops.setattr(n,{mode:r&4095|n.mode&-4096,timestamp:Date.now()})},lchmod:(e,r)=>{i.chmod(e,r,!0)},fchmod:(e,r)=>{var t=i.getStreamChecked(e);i.chmod(t.node,r)},chown:(e,r,t,n)=>{var o;if(typeof e=="string"){var a=i.lookupPath(e,{follow:!n});o=a.node}else o=e;if(!o.node_ops.setattr)throw new i.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:(e,r,t)=>{i.chown(e,r,t,!0)},fchown:(e,r,t)=>{var n=i.getStreamChecked(e);i.chown(n.node,r,t)},truncate:(e,r)=>{if(r<0)throw new i.ErrnoError(28);var t;if(typeof e=="string"){var n=i.lookupPath(e,{follow:!0});t=n.node}else t=e;if(!t.node_ops.setattr)throw new i.ErrnoError(63);if(i.isDir(t.mode))throw new i.ErrnoError(31);if(!i.isFile(t.mode))throw new i.ErrnoError(28);var o=i.nodePermissions(t,"w");if(o)throw new i.ErrnoError(o);t.node_ops.setattr(t,{size:r,timestamp:Date.now()})},ftruncate:(e,r)=>{var t=i.getStreamChecked(e);if(!(t.flags&2097155))throw new i.ErrnoError(28);i.truncate(t.node,r)},utime:(e,r,t)=>{var n=i.lookupPath(e,{follow:!0}),o=n.node;o.node_ops.setattr(o,{timestamp:Math.max(r,t)})},open:(e,r,t)=>{if(e==="")throw new i.ErrnoError(44);r=typeof r=="string"?Yt(r):r,t=typeof t>"u"?438:t,r&64?t=t&4095|32768:t=0;var n;if(typeof e=="object")n=e;else{e=z.normalize(e);try{var o=i.lookupPath(e,{follow:!(r&131072)});n=o.node}catch{}}var a=!1;if(r&64)if(n){if(r&128)throw new i.ErrnoError(20)}else n=i.mknod(e,t,0),a=!0;if(!n)throw new i.ErrnoError(44);if(i.isChrdev(n.mode)&&(r&=-513),r&65536&&!i.isDir(n.mode))throw new i.ErrnoError(54);if(!a){var f=i.mayOpen(n,r);if(f)throw new i.ErrnoError(f)}r&512&&!a&&i.truncate(n,0),r&=-131713;var u=i.createStream({node:n,path:i.getPath(n),flags:r,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return u.stream_ops.open&&u.stream_ops.open(u),s.logReadFiles&&!(r&1)&&(i.readFiles||(i.readFiles={}),e in i.readFiles||(i.readFiles[e]=1)),u},close:e=>{if(i.isClosed(e))throw new i.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(r){throw r}finally{i.closeStream(e.fd)}e.fd=null},isClosed:e=>e.fd===null,llseek:(e,r,t)=>{if(i.isClosed(e))throw new i.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new i.ErrnoError(70);if(t!=0&&t!=1&&t!=2)throw new i.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,t),e.ungotten=[],e.position},read:(e,r,t,n,o)=>{if(n<0||o<0)throw new i.ErrnoError(28);if(i.isClosed(e))throw new i.ErrnoError(8);if((e.flags&2097155)===1)throw new i.ErrnoError(8);if(i.isDir(e.node.mode))throw new i.ErrnoError(31);if(!e.stream_ops.read)throw new i.ErrnoError(28);var a=typeof o<"u";if(!a)o=e.position;else if(!e.seekable)throw new i.ErrnoError(70);var f=e.stream_ops.read(e,r,t,n,o);return a||(e.position+=f),f},write:(e,r,t,n,o,a)=>{if(n<0||o<0)throw new i.ErrnoError(28);if(i.isClosed(e))throw new i.ErrnoError(8);if(!(e.flags&2097155))throw new i.ErrnoError(8);if(i.isDir(e.node.mode))throw new i.ErrnoError(31);if(!e.stream_ops.write)throw new i.ErrnoError(28);e.seekable&&e.flags&1024&&i.llseek(e,0,2);var f=typeof o<"u";if(!f)o=e.position;else if(!e.seekable)throw new i.ErrnoError(70);var u=e.stream_ops.write(e,r,t,n,o,a);return f||(e.position+=u),u},allocate:(e,r,t)=>{if(i.isClosed(e))throw new i.ErrnoError(8);if(r<0||t<=0)throw new i.ErrnoError(28);if(!(e.flags&2097155))throw new i.ErrnoError(8);if(!i.isFile(e.node.mode)&&!i.isDir(e.node.mode))throw new i.ErrnoError(43);if(!e.stream_ops.allocate)throw new i.ErrnoError(138);e.stream_ops.allocate(e,r,t)},mmap:(e,r,t,n,o)=>{if(n&2&&!(o&2)&&(e.flags&2097155)!==2)throw new i.ErrnoError(2);if((e.flags&2097155)===1)throw new i.ErrnoError(2);if(!e.stream_ops.mmap)throw new i.ErrnoError(43);return e.stream_ops.mmap(e,r,t,n,o)},msync:(e,r,t,n,o)=>e.stream_ops.msync?e.stream_ops.msync(e,r,t,n,o):0,munmap:e=>0,ioctl:(e,r,t)=>{if(!e.stream_ops.ioctl)throw new i.ErrnoError(59);return e.stream_ops.ioctl(e,r,t)},readFile:(e,r={})=>{if(r.flags=r.flags||0,r.encoding=r.encoding||"binary",r.encoding!=="utf8"&&r.encoding!=="binary")throw new Error(`Invalid encoding type "${r.encoding}"`);var t,n=i.open(e,r.flags),o=i.stat(e),a=o.size,f=new Uint8Array(a);return i.read(n,f,0,a,0),r.encoding==="utf8"?t=Le(f,0):r.encoding==="binary"&&(t=f),i.close(n),t},writeFile:(e,r,t={})=>{t.flags=t.flags||577;var n=i.open(e,t.flags,t.mode);if(typeof r=="string"){var o=new Uint8Array(Pr(r)+1),a=Cr(r,o,0,o.length);i.write(n,o,0,a,void 0,t.canOwn)}else if(ArrayBuffer.isView(r))i.write(n,r,0,r.byteLength,void 0,t.canOwn);else throw new Error("Unsupported data type");i.close(n)},cwd:()=>i.currentPath,chdir:e=>{var r=i.lookupPath(e,{follow:!0});if(r.node===null)throw new i.ErrnoError(44);if(!i.isDir(r.node.mode))throw new i.ErrnoError(54);var t=i.nodePermissions(r.node,"x");if(t)throw new i.ErrnoError(t);i.currentPath=r.path},createDefaultDirectories:()=>{i.mkdir("/tmp"),i.mkdir("/home"),i.mkdir("/home/web_user")},createDefaultDevices:()=>{i.mkdir("/dev"),i.registerDevice(i.makedev(1,3),{read:()=>0,write:(n,o,a,f,u)=>f}),i.mkdev("/dev/null",i.makedev(1,3)),ke.register(i.makedev(5,0),ke.default_tty_ops),ke.register(i.makedev(6,0),ke.default_tty1_ops),i.mkdev("/dev/tty",i.makedev(5,0)),i.mkdev("/dev/tty1",i.makedev(6,0));var e=new Uint8Array(1024),r=0,t=()=>(r===0&&(r=Br(e).byteLength),e[--r]);i.createDevice("/dev","random",t),i.createDevice("/dev","urandom",t),i.mkdir("/dev/shm"),i.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{i.mkdir("/proc");var e=i.mkdir("/proc/self");i.mkdir("/proc/self/fd"),i.mount({mount:()=>{var r=i.createNode(e,"fd",16895,73);return r.node_ops={lookup:(t,n)=>{var o=+n,a=i.getStreamChecked(o),f={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>a.path}};return f.parent=f,f}},r}},{},"/proc/self/fd")},createStandardStreams:()=>{s.stdin?i.createDevice("/dev","stdin",s.stdin):i.symlink("/dev/tty","/dev/stdin"),s.stdout?i.createDevice("/dev","stdout",null,s.stdout):i.symlink("/dev/tty","/dev/stdout"),s.stderr?i.createDevice("/dev","stderr",null,s.stderr):i.symlink("/dev/tty1","/dev/stderr"),i.open("/dev/stdin",0),i.open("/dev/stdout",1),i.open("/dev/stderr",1)},ensureErrnoError:()=>{i.ErrnoError||(i.ErrnoError=function(r,t){this.name="ErrnoError",this.node=t,this.setErrno=function(n){this.errno=n},this.setErrno(r),this.message="FS error"},i.ErrnoError.prototype=new Error,i.ErrnoError.prototype.constructor=i.ErrnoError,[44].forEach(e=>{i.genericErrors[e]=new i.ErrnoError(e),i.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:()=>{i.ensureErrnoError(),i.nameTable=new Array(4096),i.mount(U,{},"/"),i.createDefaultDirectories(),i.createDefaultDevices(),i.createSpecialDirectories(),i.filesystems={MEMFS:U}},init:(e,r,t)=>{i.init.initialized=!0,i.ensureErrnoError(),s.stdin=e||s.stdin,s.stdout=r||s.stdout,s.stderr=t||s.stderr,i.createStandardStreams()},quit:()=>{i.init.initialized=!1;for(var e=0;e<i.streams.length;e++){var r=i.streams[e];r&&i.close(r)}},findObject:(e,r)=>{var t=i.analyzePath(e,r);return t.exists?t.object:null},analyzePath:(e,r)=>{try{var t=i.lookupPath(e,{follow:!r});e=t.path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var t=i.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=t.path,n.parentObject=t.node,n.name=z.basename(e),t=i.lookupPath(e,{follow:!r}),n.exists=!0,n.path=t.path,n.object=t.node,n.name=t.node.name,n.isRoot=t.path==="/"}catch(o){n.error=o.errno}return n},createPath:(e,r,t,n)=>{e=typeof e=="string"?e:i.getPath(e);for(var o=r.split("/").reverse();o.length;){var a=o.pop();if(a){var f=z.join2(e,a);try{i.mkdir(f)}catch{}e=f}}return f},createFile:(e,r,t,n,o)=>{var a=z.join2(typeof e=="string"?e:i.getPath(e),r),f=Ke(n,o);return i.create(a,f)},createDataFile:(e,r,t,n,o,a)=>{var f=r;e&&(e=typeof e=="string"?e:i.getPath(e),f=r?z.join2(e,r):e);var u=Ke(n,o),v=i.create(f,u);if(t){if(typeof t=="string"){for(var p=new Array(t.length),_=0,P=t.length;_<P;++_)p[_]=t.charCodeAt(_);t=p}i.chmod(v,u|146);var b=i.open(v,577);i.write(b,t,0,t.length,0,a),i.close(b),i.chmod(v,u)}return v},createDevice:(e,r,t,n)=>{var o=z.join2(typeof e=="string"?e:i.getPath(e),r),a=Ke(!!t,!!n);i.createDevice.major||(i.createDevice.major=64);var f=i.makedev(i.createDevice.major++,0);return i.registerDevice(f,{open:u=>{u.seekable=!1},close:u=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(u,v,p,_,P)=>{for(var b=0,w=0;w<_;w++){var A;try{A=t()}catch{throw new i.ErrnoError(29)}if(A===void 0&&b===0)throw new i.ErrnoError(6);if(A==null)break;b++,v[p+w]=A}return b&&(u.node.timestamp=Date.now()),b},write:(u,v,p,_,P)=>{for(var b=0;b<_;b++)try{n(v[p+b])}catch{throw new i.ErrnoError(29)}return _&&(u.node.timestamp=Date.now()),b}}),i.mkdev(o,a,f)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(I)try{e.contents=Tr(I(e.url),!0),e.usedBytes=e.contents.length}catch{throw new i.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(e,r,t,n,o)=>{function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(w){if(!(w>this.length-1||w<0)){var A=w%this.chunkSize,Y=w/this.chunkSize|0;return this.getter(Y)[A]}},a.prototype.setDataGetter=function(w){this.getter=w},a.prototype.cacheLength=function(){var w=new XMLHttpRequest;if(w.open("HEAD",t,!1),w.send(null),!(w.status>=200&&w.status<300||w.status===304))throw new Error("Couldn't load "+t+". Status: "+w.status);var A=Number(w.getResponseHeader("Content-length")),Y,Q=(Y=w.getResponseHeader("Accept-Ranges"))&&Y==="bytes",ne=(Y=w.getResponseHeader("Content-Encoding"))&&Y==="gzip",pe=1024*1024;Q||(pe=A);var Z=(ve,Ae)=>{if(ve>Ae)throw new Error("invalid range ("+ve+", "+Ae+") or no bytes requested!");if(Ae>A-1)throw new Error("only "+A+" bytes available! programmer error!");var ie=new XMLHttpRequest;if(ie.open("GET",t,!1),A!==pe&&ie.setRequestHeader("Range","bytes="+ve+"-"+Ae),ie.responseType="arraybuffer",ie.overrideMimeType&&ie.overrideMimeType("text/plain; charset=x-user-defined"),ie.send(null),!(ie.status>=200&&ie.status<300||ie.status===304))throw new Error("Couldn't load "+t+". Status: "+ie.status);return ie.response!==void 0?new Uint8Array(ie.response||[]):Tr(ie.responseText||"",!0)},xe=this;xe.setDataGetter(ve=>{var Ae=ve*pe,ie=(ve+1)*pe-1;if(ie=Math.min(ie,A-1),typeof xe.chunks[ve]>"u"&&(xe.chunks[ve]=Z(Ae,ie)),typeof xe.chunks[ve]>"u")throw new Error("doXHR failed!");return xe.chunks[ve]}),(ne||!A)&&(pe=A=1,A=this.getter(0).length,pe=A,oe("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=A,this._chunkSize=pe,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!j)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var f=new a;Object.defineProperties(f,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var u={isDevice:!1,contents:f}}else var u={isDevice:!1,url:t};var v=i.createFile(e,r,u,n,o);u.contents?v.contents=u.contents:u.url&&(v.contents=null,v.url=u.url),Object.defineProperties(v,{usedBytes:{get:function(){return this.contents.length}}});var p={},_=Object.keys(v.stream_ops);_.forEach(b=>{var w=v.stream_ops[b];p[b]=function(){return i.forceLoadFile(v),w.apply(null,arguments)}});function P(b,w,A,Y,Q){var ne=b.node.contents;if(Q>=ne.length)return 0;var pe=Math.min(ne.length-Q,Y);if(ne.slice)for(var Z=0;Z<pe;Z++)w[A+Z]=ne[Q+Z];else for(var Z=0;Z<pe;Z++)w[A+Z]=ne.get(Q+Z);return pe}return p.read=(b,w,A,Y,Q)=>(i.forceLoadFile(v),P(b,w,A,Y,Q)),p.mmap=(b,w,A,Y,Q)=>{i.forceLoadFile(v);var ne=Vr();if(!ne)throw new i.ErrnoError(48);return P(b,J,ne,w,A),{ptr:ne,allocated:!0}},v.stream_ops=p,v}},ur=(e,r)=>e?Le(X,e,r):"",ue={DEFAULT_POLLMASK:5,calculateAt:function(e,r,t){if(z.isAbs(r))return r;var n;if(e===-100)n=i.cwd();else{var o=ue.getStreamFromFD(e);n=o.path}if(r.length==0){if(!t)throw new i.ErrnoError(44);return n}return z.join2(n,r)},doStat:function(e,r,t){try{var n=e(r)}catch(u){if(u&&u.node&&z.normalize(r)!==z.normalize(i.getPath(u.node)))return-54;throw u}H[t>>2]=n.dev,H[t+4>>2]=n.mode,x[t+8>>2]=n.nlink,H[t+12>>2]=n.uid,H[t+16>>2]=n.gid,H[t+20>>2]=n.rdev,K=[n.size>>>0,(k=n.size,+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[t+24>>2]=K[0],H[t+28>>2]=K[1],H[t+32>>2]=4096,H[t+36>>2]=n.blocks;var o=n.atime.getTime(),a=n.mtime.getTime(),f=n.ctime.getTime();return K=[Math.floor(o/1e3)>>>0,(k=Math.floor(o/1e3),+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[t+40>>2]=K[0],H[t+44>>2]=K[1],x[t+48>>2]=o%1e3*1e3,K=[Math.floor(a/1e3)>>>0,(k=Math.floor(a/1e3),+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[t+56>>2]=K[0],H[t+60>>2]=K[1],x[t+64>>2]=a%1e3*1e3,K=[Math.floor(f/1e3)>>>0,(k=Math.floor(f/1e3),+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[t+72>>2]=K[0],H[t+76>>2]=K[1],x[t+80>>2]=f%1e3*1e3,K=[n.ino>>>0,(k=n.ino,+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[t+88>>2]=K[0],H[t+92>>2]=K[1],0},doMsync:function(e,r,t,n,o){if(!i.isFile(r.node.mode))throw new i.ErrnoError(43);if(n&2)return 0;var a=X.slice(e,e+t);i.msync(r,a,o,t,n)},varargs:void 0,get(){ue.varargs+=4;var e=H[ue.varargs-4>>2];return e},getStr(e){var r=ur(e);return r},getStreamFromFD:function(e){var r=i.getStreamChecked(e);return r}};function Jt(e,r,t){ue.varargs=t;try{var n=ue.getStreamFromFD(e);switch(r){case 0:{var o=ue.get();if(o<0)return-28;var a;return a=i.createStream(n,o),a.fd}case 1:case 2:return 0;case 3:return n.flags;case 4:{var o=ue.get();return n.flags|=o,0}case 5:{var o=ue.get(),f=0;return Pe[o+f>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return xr(28),-1;default:return-28}}catch(u){if(typeof i>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}function $r(e,r,t,n){ue.varargs=n;try{r=ue.getStr(r),r=ue.calculateAt(e,r);var o=n?ue.get():0;return i.open(r,t,o).fd}catch(a){if(typeof i>"u"||a.name!=="ErrnoError")throw a;return-a.errno}}function Qt(e,r,t,n,o){}function kr(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function qr(){for(var e=new Array(256),r=0;r<256;++r)e[r]=String.fromCharCode(r);st=e}var st=void 0;function de(e){for(var r="",t=e;X[t];)r+=st[X[t++]];return r}var We={},Ue={},fr={},ze=void 0;function L(e){throw new ze(e)}var Ve=void 0;function cr(e){throw new Ve(e)}function Ye(e,r,t){e.forEach(function(u){fr[u]=r});function n(u){var v=t(u);v.length!==e.length&&cr("Mismatched type converter count");for(var p=0;p<e.length;++p)ye(e[p],v[p])}var o=new Array(r.length),a=[],f=0;r.forEach((u,v)=>{Ue.hasOwnProperty(u)?o[v]=Ue[u]:(a.push(u),We.hasOwnProperty(u)||(We[u]=[]),We[u].push(()=>{o[v]=Ue[u],++f,f===a.length&&n(o)}))}),a.length===0&&n(o)}function Gr(e,r,t={}){var n=r.name;if(e||L(`type "${n}" must have a positive integer typeid pointer`),Ue.hasOwnProperty(e)){if(t.ignoreDuplicateRegistrations)return;L(`Cannot register type '${n}' twice`)}if(Ue[e]=r,delete fr[e],We.hasOwnProperty(e)){var o=We[e];delete We[e],o.forEach(a=>a())}}function ye(e,r,t={}){if(!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Gr(e,r,t)}function St(e,r,t,n,o){var a=kr(t);r=de(r),ye(e,{name:r,fromWireType:function(f){return!!f},toWireType:function(f,u){return u?n:o},argPackAdvance:8,readValueFromPointer:function(f){var u;if(t===1)u=J;else if(t===2)u=Pe;else if(t===4)u=H;else throw new TypeError("Unknown boolean type size: "+r);return this.fromWireType(u[f>>a])},destructorFunction:null})}function Zt(e){if(!(this instanceof Te)||!(e instanceof Te))return!1;for(var r=this.$$.ptrType.registeredClass,t=this.$$.ptr,n=e.$$.ptrType.registeredClass,o=e.$$.ptr;r.baseClass;)t=r.upcast(t),r=r.baseClass;for(;n.baseClass;)o=n.upcast(o),n=n.baseClass;return r===n&&t===o}function en(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function lr(e){function r(t){return t.$$.ptrType.registeredClass.name}L(r(e)+" instance already deleted")}var Sr=!1;function at(e){}function rn(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function gr(e){e.count.value-=1;var r=e.count.value===0;r&&rn(e)}function ut(e,r,t){if(r===t)return e;if(t.baseClass===void 0)return null;var n=ut(e,r,t.baseClass);return n===null?null:t.downcast(n)}var ft={};function tn(){return Object.keys(Qe).length}function nn(){var e=[];for(var r in Qe)Qe.hasOwnProperty(r)&&e.push(Qe[r]);return e}var _e=[];function Ar(){for(;_e.length;){var e=_e.pop();e.$$.deleteScheduled=!1,e.delete()}}var Je=void 0;function Xr(e){Je=e,_e.length&&Je&&Je(Ar)}function At(){s.getInheritedInstanceCount=tn,s.getLiveInheritedInstances=nn,s.flushPendingDeletes=Ar,s.setDelayFunction=Xr}var Qe={};function on(e,r){for(r===void 0&&L("ptr should not be undefined");e.baseClass;)r=e.upcast(r),e=e.baseClass;return r}function yr(e,r){return r=on(e,r),Qe[r]}function dr(e,r){(!r.ptrType||!r.ptr)&&cr("makeClassHandle requires ptr and ptrType");var t=!!r.smartPtrType,n=!!r.smartPtr;return t!==n&&cr("Both smartPtrType and smartPtr must be specified"),r.count={value:1},qe(Object.create(e,{$$:{value:r}}))}function Dt(e){var r=this.getPointee(e);if(!r)return this.destructor(e),null;var t=yr(this.registeredClass,r);if(t!==void 0){if(t.$$.count.value===0)return t.$$.ptr=r,t.$$.smartPtr=e,t.clone();var n=t.clone();return this.destructor(e),n}function o(){return this.isSmartPointer?dr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:e}):dr(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var a=this.registeredClass.getActualType(r),f=ft[a];if(!f)return o.call(this);var u;this.isConst?u=f.constPointerType:u=f.pointerType;var v=ut(r,this.registeredClass,u.registeredClass);return v===null?o.call(this):this.isSmartPointer?dr(u.registeredClass.instancePrototype,{ptrType:u,ptr:v,smartPtrType:this,smartPtr:e}):dr(u.registeredClass.instancePrototype,{ptrType:u,ptr:v})}var qe=function(e){return typeof FinalizationRegistry>"u"?(qe=r=>r,e):(Sr=new FinalizationRegistry(r=>{gr(r.$$)}),qe=r=>{var t=r.$$,n=!!t.smartPtr;if(n){var o={$$:t};Sr.register(r,o,r)}return r},at=r=>Sr.unregister(r),qe(e))};function ct(){if(this.$$.ptr||lr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=qe(Object.create(Object.getPrototypeOf(this),{$$:{value:en(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function sn(){this.$$.ptr||lr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&L("Object already scheduled for deletion"),at(this),gr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Ft(){return!this.$$.ptr}function an(){return this.$$.ptr||lr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&L("Object already scheduled for deletion"),_e.push(this),_e.length===1&&Je&&Je(Ar),this.$$.deleteScheduled=!0,this}function Rt(){Te.prototype.isAliasOf=Zt,Te.prototype.clone=ct,Te.prototype.delete=sn,Te.prototype.isDeleted=Ft,Te.prototype.deleteLater=an}function Te(){}var un=48,fn=57;function hr(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return r>=un&&r<=fn?`_${e}`:e}function wr(e,r){return e=hr(e),{[e]:function(){return r.apply(this,arguments)}}[e]}function Me(e,r,t){if(e[r].overloadTable===void 0){var n=e[r];e[r]=function(){return e[r].overloadTable.hasOwnProperty(arguments.length)||L(`Function '${t}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[r].overloadTable})!`),e[r].overloadTable[arguments.length].apply(this,arguments)},e[r].overloadTable=[],e[r].overloadTable[n.argCount]=n}}function Ot(e,r,t){s.hasOwnProperty(e)?((t===void 0||s[e].overloadTable!==void 0&&s[e].overloadTable[t]!==void 0)&&L(`Cannot register public name '${e}' twice`),Me(s,e,e),s.hasOwnProperty(t)&&L(`Cannot register multiple overloads of a function with the same number of arguments (${t})!`),s[e].overloadTable[t]=r):(s[e]=r,t!==void 0&&(s[e].numArguments=t))}function cn(e,r,t,n,o,a,f,u){this.name=e,this.constructor=r,this.instancePrototype=t,this.rawDestructor=n,this.baseClass=o,this.getActualType=a,this.upcast=f,this.downcast=u,this.pureVirtualFunctions=[]}function Dr(e,r,t){for(;r!==t;)r.upcast||L(`Expected null or instance of ${t.name}, got an instance of ${r.name}`),e=r.upcast(e),r=r.baseClass;return e}function Kr(e,r){if(r===null)return this.isReference&&L(`null is not a valid ${this.name}`),0;r.$$||L(`Cannot pass "${Rr(r)}" as a ${this.name}`),r.$$.ptr||L(`Cannot pass deleted object as a pointer of type ${this.name}`);var t=r.$$.ptrType.registeredClass,n=Dr(r.$$.ptr,t,this.registeredClass);return n}function ln(e,r){var t;if(r===null)return this.isReference&&L(`null is not a valid ${this.name}`),this.isSmartPointer?(t=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,t),t):0;r.$$||L(`Cannot pass "${Rr(r)}" as a ${this.name}`),r.$$.ptr||L(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&L(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var n=r.$$.ptrType.registeredClass;if(t=Dr(r.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&L("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?t=r.$$.smartPtr:L(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:t=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)t=r.$$.smartPtr;else{var o=r.clone();t=this.rawShare(t,vr.toHandle(function(){o.delete()})),e!==null&&e.push(this.rawDestructor,t)}break;default:L("Unsupporting sharing policy")}return t}function lt(e,r){if(r===null)return this.isReference&&L(`null is not a valid ${this.name}`),0;r.$$||L(`Cannot pass "${Rr(r)}" as a ${this.name}`),r.$$.ptr||L(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&L(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var t=r.$$.ptrType.registeredClass,n=Dr(r.$$.ptr,t,this.registeredClass);return n}function pr(e){return this.fromWireType(H[e>>2])}function dn(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function hn(e){this.rawDestructor&&this.rawDestructor(e)}function pn(e){e!==null&&e.delete()}function vn(){be.prototype.getPointee=dn,be.prototype.destructor=hn,be.prototype.argPackAdvance=8,be.prototype.readValueFromPointer=pr,be.prototype.deleteObject=pn,be.prototype.fromWireType=Dt}function be(e,r,t,n,o,a,f,u,v,p,_){this.name=e,this.registeredClass=r,this.isReference=t,this.isConst=n,this.isSmartPointer=o,this.pointeeType=a,this.sharingPolicy=f,this.rawGetPointee=u,this.rawConstructor=v,this.rawShare=p,this.rawDestructor=_,!o&&r.baseClass===void 0?n?(this.toWireType=Kr,this.destructorFunction=null):(this.toWireType=lt,this.destructorFunction=null):this.toWireType=ln}function mn(e,r,t){s.hasOwnProperty(e)||cr("Replacing nonexistant public symbol"),s[e].overloadTable!==void 0&&t!==void 0?s[e].overloadTable[t]=r:(s[e]=r,s[e].argCount=t)}var gn=(e,r,t)=>{var n=s["dynCall_"+e];return t&&t.length?n.apply(null,[r].concat(t)):n.call(null,r)},nr=[],Yr=e=>{var r=nr[e];return r||(e>=nr.length&&(nr.length=e+1),nr[e]=r=et.get(e)),r},yn=(e,r,t)=>{if(e.includes("j"))return gn(e,r,t);var n=Yr(r).apply(null,t);return n},wn=(e,r)=>{var t=[];return function(){return t.length=0,Object.assign(t,arguments),yn(e,r,t)}};function je(e,r){e=de(e);function t(){return e.includes("j")?wn(e,r):Yr(r)}var n=t();return typeof n!="function"&&L(`unknown function pointer with signature ${e}: ${r}`),n}function _n(e,r){var t=wr(r,function(n){this.name=r,this.message=n;var o=new Error(n).stack;o!==void 0&&(this.stack=this.toString()+`
`+o.replace(/^Error(:[^\n]*)?\n/,""))});return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},t}var dt=void 0;function ht(e){var r=Mn(e),t=de(r);return Se(r),t}function Fr(e,r){var t=[],n={};function o(a){if(!n[a]&&!Ue[a]){if(fr[a]){fr[a].forEach(o);return}t.push(a),n[a]=!0}}throw r.forEach(o),new dt(`${e}: `+t.map(ht).join([", "]))}function bn(e,r,t,n,o,a,f,u,v,p,_,P,b){_=de(_),a=je(o,a),u&&(u=je(f,u)),p&&(p=je(v,p)),b=je(P,b);var w=hr(_);Ot(w,function(){Fr(`Cannot construct ${_} due to unbound types`,[n])}),Ye([e,r,t],n?[n]:[],function(A){A=A[0];var Y,Q;n?(Y=A.registeredClass,Q=Y.instancePrototype):Q=Te.prototype;var ne=wr(w,function(){if(Object.getPrototypeOf(this)!==pe)throw new ze("Use 'new' to construct "+_);if(Z.constructor_body===void 0)throw new ze(_+" has no accessible constructor");var ie=Z.constructor_body[arguments.length];if(ie===void 0)throw new ze(`Tried to invoke ctor of ${_} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(Z.constructor_body).toString()}) parameters instead!`);return ie.apply(this,arguments)}),pe=Object.create(Q,{constructor:{value:ne}});ne.prototype=pe;var Z=new cn(_,ne,pe,b,Y,a,u,p);Z.baseClass&&(Z.baseClass.__derivedClasses===void 0&&(Z.baseClass.__derivedClasses=[]),Z.baseClass.__derivedClasses.push(Z));var xe=new be(_,Z,!0,!1,!1),ve=new be(_+"*",Z,!1,!1,!1),Ae=new be(_+" const*",Z,!1,!0,!1);return ft[e]={pointerType:ve,constPointerType:Ae},mn(w,ne),[xe,ve,Ae]})}function pt(e,r){for(var t=[],n=0;n<e;n++)t.push(x[r+n*4>>2]);return t}function En(e){for(;e.length;){var r=e.pop(),t=e.pop();t(r)}}function vt(e,r){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var t=wr(e.name||"unknownFunctionName",function(){});t.prototype=e.prototype;var n=new t,o=e.apply(n,r);return o instanceof Object?o:n}function mt(e,r,t,n,o,a){var f=r.length;f<2&&L("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var u=r[1]!==null&&t!==null,v=!1,p=1;p<r.length;++p)if(r[p]!==null&&r[p].destructorFunction===void 0){v=!0;break}for(var _=r[0].name!=="void",P="",b="",p=0;p<f-2;++p)P+=(p!==0?", ":"")+"arg"+p,b+=(p!==0?", ":"")+"arg"+p+"Wired";var w=`
        return function ${hr(e)}(${P}) {
        if (arguments.length !== ${f-2}) {
          throwBindingError('function ${e} called with ${arguments.length} arguments, expected ${f-2} args!');
        }`;v&&(w+=`var destructors = [];
`);var A=v?"destructors":"null",Y=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Q=[L,n,o,En,r[0],r[1]];u&&(w+="var thisWired = classParam.toWireType("+A+`, this);
`);for(var p=0;p<f-2;++p)w+="var arg"+p+"Wired = argType"+p+".toWireType("+A+", arg"+p+"); // "+r[p+2].name+`
`,Y.push("argType"+p),Q.push(r[p+2]);if(u&&(b="thisWired"+(b.length>0?", ":"")+b),w+=(_||a?"var rv = ":"")+"invoker(fn"+(b.length>0?", ":"")+b+`);
`,v)w+=`runDestructors(destructors);
`;else for(var p=u?1:2;p<r.length;++p){var ne=p===1?"thisWired":"arg"+(p-2)+"Wired";r[p].destructorFunction!==null&&(w+=ne+"_dtor("+ne+"); // "+r[p].name+`
`,Y.push(ne+"_dtor"),Q.push(r[p].destructorFunction))}return _&&(w+=`var ret = retType.fromWireType(rv);
return ret;
`),w+=`}
`,Y.push(w),vt(Function,Y).apply(null,Q)}function Pn(e,r,t,n,o,a){var f=pt(r,t);o=je(n,o),Ye([],[e],function(u){u=u[0];var v=`constructor ${u.name}`;if(u.registeredClass.constructor_body===void 0&&(u.registeredClass.constructor_body=[]),u.registeredClass.constructor_body[r-1]!==void 0)throw new ze(`Cannot register multiple constructors with identical number of parameters (${r-1}) for class '${u.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return u.registeredClass.constructor_body[r-1]=()=>{Fr(`Cannot construct ${u.name} due to unbound types`,f)},Ye([],f,function(p){return p.splice(1,0,null),u.registeredClass.constructor_body[r-1]=mt(v,p,null,o,a),[]}),[]})}function gt(e,r,t,n,o,a,f,u,v){var p=pt(t,n);r=de(r),a=je(o,a),Ye([],[e],function(_){_=_[0];var P=`${_.name}.${r}`;r.startsWith("@@")&&(r=Symbol[r.substring(2)]),u&&_.registeredClass.pureVirtualFunctions.push(r);function b(){Fr(`Cannot call ${P} due to unbound types`,p)}var w=_.registeredClass.instancePrototype,A=w[r];return A===void 0||A.overloadTable===void 0&&A.className!==_.name&&A.argCount===t-2?(b.argCount=t-2,b.className=_.name,w[r]=b):(Me(w,r,P),w[r].overloadTable[t-2]=b),Ye([],p,function(Y){var Q=mt(P,Y,_,a,f,v);return w[r].overloadTable===void 0?(Q.argCount=t-2,w[r]=Q):w[r].overloadTable[t-2]=Q,[]}),[]})}function Cn(){Object.assign(yt.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var r=this.freelist.pop()||this.allocated.length;return this.allocated[r]=e,r},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function yt(){this.allocated=[void 0],this.freelist=[]}var me=new yt;function wt(e){e>=me.reserved&&--me.get(e).refcount===0&&me.free(e)}function Ut(){for(var e=0,r=me.reserved;r<me.allocated.length;++r)me.allocated[r]!==void 0&&++e;return e}function Tn(){me.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),me.reserved=me.allocated.length,s.count_emval_handles=Ut}var vr={toValue:e=>(e||L("Cannot use deleted val. handle = "+e),me.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return me.allocate({refcount:1,value:e})}}};function Mt(e,r){r=de(r),ye(e,{name:r,fromWireType:function(t){var n=vr.toValue(t);return wt(t),n},toWireType:function(t,n){return vr.toHandle(n)},argPackAdvance:8,readValueFromPointer:pr,destructorFunction:null})}function Rr(e){if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e}function $n(e,r){switch(r){case 2:return function(t){return this.fromWireType(Wr[t>>2])};case 3:return function(t){return this.fromWireType(zr[t>>3])};default:throw new TypeError("Unknown float type: "+e)}}function kn(e,r,t){var n=kr(t);r=de(r),ye(e,{name:r,fromWireType:function(o){return o},toWireType:function(o,a){return a},argPackAdvance:8,readValueFromPointer:$n(r,n),destructorFunction:null})}function Sn(e,r,t){switch(r){case 0:return t?function(o){return J[o]}:function(o){return X[o]};case 1:return t?function(o){return Pe[o>>1]}:function(o){return er[o>>1]};case 2:return t?function(o){return H[o>>2]}:function(o){return x[o>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function An(e,r,t,n,o){r=de(r);var a=kr(t),f=P=>P;if(n===0){var u=32-8*t;f=P=>P<<u>>>u}var v=r.includes("unsigned"),p=(P,b)=>{},_;v?_=function(P,b){return p(b,this.name),b>>>0}:_=function(P,b){return p(b,this.name),b},ye(e,{name:r,fromWireType:f,toWireType:_,argPackAdvance:8,readValueFromPointer:Sn(r,a,n!==0),destructorFunction:null})}function Dn(e,r,t){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],o=n[r];function a(f){f=f>>2;var u=x,v=u[f],p=u[f+1];return new o(u.buffer,p,v)}t=de(t),ye(e,{name:t,fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{ignoreDuplicateRegistrations:!0})}var Fn=(e,r,t)=>Cr(e,X,r,t);function Ze(e,r){r=de(r);var t=r==="std::string";ye(e,{name:r,fromWireType:function(n){var o=x[n>>2],a=n+4,f;if(t)for(var u=a,v=0;v<=o;++v){var p=a+v;if(v==o||X[p]==0){var _=p-u,P=ur(u,_);f===void 0?f=P:(f+=String.fromCharCode(0),f+=P),u=p+1}}else{for(var b=new Array(o),v=0;v<o;++v)b[v]=String.fromCharCode(X[a+v]);f=b.join("")}return Se(n),f},toWireType:function(n,o){o instanceof ArrayBuffer&&(o=new Uint8Array(o));var a,f=typeof o=="string";f||o instanceof Uint8Array||o instanceof Uint8ClampedArray||o instanceof Int8Array||L("Cannot pass non-string to std::string"),t&&f?a=Pr(o):a=o.length;var u=bt(4+a+1),v=u+4;if(x[u>>2]=a,t&&f)Fn(o,v,a+1);else if(f)for(var p=0;p<a;++p){var _=o.charCodeAt(p);_>255&&(Se(v),L("String has UTF-16 code units that do not fit in 8 bits")),X[v+p]=_}else for(var p=0;p<a;++p)X[v+p]=o[p];return n!==null&&n.push(Se,u),u},argPackAdvance:8,readValueFromPointer:pr,destructorFunction:function(n){Se(n)}})}var Or=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,jt=(e,r)=>{for(var t=e,n=t>>1,o=n+r/2;!(n>=o)&&er[n];)++n;if(t=n<<1,t-e>32&&Or)return Or.decode(X.subarray(e,t));for(var a="",f=0;!(f>=r/2);++f){var u=Pe[e+f*2>>1];if(u==0)break;a+=String.fromCharCode(u)}return a},It=(e,r,t)=>{if(t===void 0&&(t=2147483647),t<2)return 0;t-=2;for(var n=r,o=t<e.length*2?t/2:e.length,a=0;a<o;++a){var f=e.charCodeAt(a);Pe[r>>1]=f,r+=2}return Pe[r>>1]=0,r-n},Jr=e=>e.length*2,Ht=(e,r)=>{for(var t=0,n="";!(t>=r/4);){var o=H[e+t*4>>2];if(o==0)break;if(++t,o>=65536){var a=o-65536;n+=String.fromCharCode(55296|a>>10,56320|a&1023)}else n+=String.fromCharCode(o)}return n},c=(e,r,t)=>{if(t===void 0&&(t=2147483647),t<4)return 0;for(var n=r,o=n+t-4,a=0;a<e.length;++a){var f=e.charCodeAt(a);if(f>=55296&&f<=57343){var u=e.charCodeAt(++a);f=65536+((f&1023)<<10)|u&1023}if(H[r>>2]=f,r+=4,r+4>o)break}return H[r>>2]=0,r-n},l=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n>=55296&&n<=57343&&++t,r+=4}return r},h=function(e,r,t){t=de(t);var n,o,a,f,u;r===2?(n=jt,o=It,f=Jr,a=()=>er,u=1):r===4&&(n=Ht,o=c,f=l,a=()=>x,u=2),ye(e,{name:t,fromWireType:function(v){for(var p=x[v>>2],_=a(),P,b=v+4,w=0;w<=p;++w){var A=v+4+w*r;if(w==p||_[A>>u]==0){var Y=A-b,Q=n(b,Y);P===void 0?P=Q:(P+=String.fromCharCode(0),P+=Q),b=A+r}}return Se(v),P},toWireType:function(v,p){typeof p!="string"&&L(`Cannot pass non-string to C++ string type ${t}`);var _=f(p),P=bt(4+_+r);return x[P>>2]=_>>u,o(p,P+4,_+r),v!==null&&v.push(Se,P),P},argPackAdvance:8,readValueFromPointer:pr,destructorFunction:function(v){Se(v)}})};function g(e,r){r=de(r),ye(e,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:function(){},toWireType:function(t,n){}})}var C={};function S(e){var r=C[e];return r===void 0?de(e):r}var D=[];function T(e,r,t,n){e=D[e],r=vr.toValue(r),t=S(t),e(r,t,null,n)}function W(e){var r=D.length;return D.push(e),r}function F(e,r){var t=Ue[e];return t===void 0&&L(r+" has unknown type "+ht(e)),t}function ee(e,r){for(var t=new Array(e),n=0;n<e;++n)t[n]=F(x[r+n*4>>2],"parameter "+n);return t}var te=[];function fe(e,r){var t=ee(e,r),n=t[0],o=n.name+"_$"+t.slice(1).map(function(A){return A.name}).join("_")+"$",a=te[o];if(a!==void 0)return a;for(var f=["retType"],u=[n],v="",p=0;p<e-1;++p)v+=(p!==0?", ":"")+"arg"+p,f.push("argType"+p),u.push(t[1+p]);for(var _=hr("methodCaller_"+o),P="return function "+_+`(handle, name, destructors, args) {
`,b=0,p=0;p<e-1;++p)P+="    var arg"+p+" = argType"+p+".readValueFromPointer(args"+(b?"+"+b:"")+`);
`,b+=t[p+1].argPackAdvance;P+="    var rv = handle[name]("+v+`);
`;for(var p=0;p<e-1;++p)t[p+1].deleteObject&&(P+="    argType"+p+".deleteObject(arg"+p+`);
`);n.isVoid||(P+=`    return retType.toWireType(destructors, rv);
`),P+=`};
`,f.push(P);var w=vt(Function,f).apply(null,u);return a=W(w),te[o]=a,a}function he(e,r){return r+2097152>>>0<4194305-!!e?(e>>>0)+r*4294967296:NaN}var Ee=()=>{Fe("")};function Ie(){return Date.now()}var De=()=>X.length,ir=()=>De(),_t=(e,r,t)=>X.copyWithin(e,r,r+t),Ne=e=>{Fe("OOM")},Rn=e=>{X.length,Ne()},_r={},Lt=()=>R||"./this.program",Ge=()=>{if(!Ge.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Lt()};for(var t in _r)_r[t]===void 0?delete r[t]:r[t]=_r[t];var n=[];for(var t in r)n.push(`${t}=${r[t]}`);Ge.strings=n}return Ge.strings},Zn=(e,r)=>{for(var t=0;t<e.length;++t)J[r++>>0]=e.charCodeAt(t);J[r>>0]=0},ei=(e,r)=>{var t=0;return Ge().forEach(function(n,o){var a=r+t;x[e+o*4>>2]=a,Zn(n,a),t+=n.length+1}),0},ri=(e,r)=>{var t=Ge();x[e>>2]=t.length;var n=0;return t.forEach(function(o){n+=o.length+1}),x[r>>2]=n,0};function ti(e){try{var r=ue.getStreamFromFD(e);return i.close(r),0}catch(t){if(typeof i>"u"||t.name!=="ErrnoError")throw t;return t.errno}}function ni(e,r){try{var t=0,n=0,o=0,a=ue.getStreamFromFD(e),f=a.tty?2:i.isDir(a.mode)?3:i.isLink(a.mode)?7:4;return J[r>>0]=f,Pe[r+2>>1]=o,K=[t>>>0,(k=t,+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[r+8>>2]=K[0],H[r+12>>2]=K[1],K=[n>>>0,(k=n,+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[r+16>>2]=K[0],H[r+20>>2]=K[1],0}catch(u){if(typeof i>"u"||u.name!=="ErrnoError")throw u;return u.errno}}var ii=(e,r,t,n)=>{for(var o=0,a=0;a<t;a++){var f=x[r>>2],u=x[r+4>>2];r+=8;var v=i.read(e,J,f,u,n);if(v<0)return-1;if(o+=v,v<u)break;typeof n<"u"&&(n+=v)}return o};function oi(e,r,t,n){try{var o=ue.getStreamFromFD(e),a=ii(o,r,t);return x[n>>2]=a,0}catch(f){if(typeof i>"u"||f.name!=="ErrnoError")throw f;return f.errno}}function si(e,r,t,n,o){var a=he(r,t);try{if(isNaN(a))return 61;var f=ue.getStreamFromFD(e);return i.llseek(f,a,n),K=[f.position>>>0,(k=f.position,+Math.abs(k)>=1?k>0?+Math.floor(k/4294967296)>>>0:~~+Math.ceil((k-+(~~k>>>0))/4294967296)>>>0:0)],H[o>>2]=K[0],H[o+4>>2]=K[1],f.getdents&&a===0&&n===0&&(f.getdents=null),0}catch(u){if(typeof i>"u"||u.name!=="ErrnoError")throw u;return u.errno}}var ai=(e,r,t,n)=>{for(var o=0,a=0;a<t;a++){var f=x[r>>2],u=x[r+4>>2];r+=8;var v=i.write(e,J,f,u,n);if(v<0)return-1;o+=v,typeof n<"u"&&(n+=v)}return o};function ui(e,r,t,n){try{var o=ue.getStreamFromFD(e),a=ai(o,r,t);return x[n>>2]=a,0}catch(f){if(typeof i>"u"||f.name!=="ErrnoError")throw f;return f.errno}}var On=function(e,r,t,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=i.nextInode++,this.name=r,this.mode=t,this.node_ops={},this.stream_ops={},this.rdev=n},Ur=365,Mr=146;Object.defineProperties(On.prototype,{read:{get:function(){return(this.mode&Ur)===Ur},set:function(e){e?this.mode|=Ur:this.mode&=~Ur}},write:{get:function(){return(this.mode&Mr)===Mr},set:function(e){e?this.mode|=Mr:this.mode&=~Mr}},isFolder:{get:function(){return i.isDir(this.mode)}},isDevice:{get:function(){return i.isChrdev(this.mode)}}}),i.FSNode=On,i.createPreloadedFile=Kt,i.staticInit(),qr(),ze=s.BindingError=class extends Error{constructor(r){super(r),this.name="BindingError"}},Ve=s.InternalError=class extends Error{constructor(r){super(r),this.name="InternalError"}},Rt(),At(),vn(),dt=s.UnboundTypeError=_n(Error,"UnboundTypeError"),Cn(),Tn();var fi={p:sr,C:Jt,w:$r,t:Qt,n:St,r:bn,q:Pn,d:gt,D:Mt,k:kn,c:An,b:Dn,j:Ze,f:h,o:g,g:T,m:wt,l:fe,a:Ee,e:Ie,v:ir,A:_t,u:Rn,y:ei,z:ri,i:ti,x:ni,B:oi,s:si,h:ui};Xt();var bt=e=>(bt=N.G)(e),Se=e=>(Se=N.I)(e),Un=()=>(Un=N.J)(),Mn=e=>(Mn=N.K)(e);s.__embind_initialize_bindings=()=>(s.__embind_initialize_bindings=N.L)();var jn=e=>(jn=N.M)(e);s.dynCall_viiijj=(e,r,t,n,o,a,f,u)=>(s.dynCall_viiijj=N.N)(e,r,t,n,o,a,f,u),s.dynCall_jij=(e,r,t,n)=>(s.dynCall_jij=N.O)(e,r,t,n),s.dynCall_jii=(e,r,t)=>(s.dynCall_jii=N.P)(e,r,t),s.dynCall_jiji=(e,r,t,n,o)=>(s.dynCall_jiji=N.Q)(e,r,t,n,o);var jr;Xe=function e(){jr||In(),jr||(Xe=e)};function In(){if(Ce>0||(Nt(),Ce>0))return;function e(){jr||(jr=!0,s.calledRun=!0,!re&&(xt(),m(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),or()))}s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),e()},1)):e()}if(s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();return In(),d.ready}})(),fo=Object.defineProperty,co=Object.getOwnPropertyDescriptor,Gn=($,d,s,m)=>{for(var y=m>1?void 0:m?co(d,s):d,O=$.length-1,R;O>=0;O--)(R=$[O])&&(y=(m?R(d,s,y):R(y))||y);return m&&y&&fo(d,s,y),y};class Xn extends le{constructor(){super(...arguments),this.sampleRate=0,this.channels=0}initialize(){return new Promise(d=>{const s={};s.print=m=>console.log(m),s.printErr=m=>console.log(`[JS] ERROR: ${m}`),s.onAbort=()=>console.log("[JS] FATAL: WASM ABORTED"),s.postRun=m=>{this.module=m,this.decoder=new this.module.AudioDecoder(this),d()},uo(s)})}configure(d){this.config=d,this.decoder.setCodec(this.config.codec,this.config.description??"")}decode(d){this.decoder.decode(d.data,d.timestamp)}flush(){}reset(){this.config=void 0,this.decoder&&this.decoder.clear()}close(){this.removeAllListeners(),this.decoder&&(this.decoder.clear(),this.decoder.delete())}audioInfo(d,s){this.sampleRate=d,this.channels=s;let m={sampleRate:d,channels:s,depth:16};this.emit(Et.AudioCodecInfo,m)}pcmData(d,s,m){if(!this.module)return;let y=[],O=0,R=0;for(let j=0;j<this.channels;j++){let E=this.module.HEAPU32[(d>>2)+j]>>2;const M=this.module.HEAPF32.subarray(E,E+s);y.push(M),O+=M.length}const q=new Float32Array(O);this.emit(Et.AudioFrame,new AudioData({format:"f32-planar",sampleRate:this.sampleRate,numberOfChannels:this.channels,timestamp:m,numberOfFrames:s,data:y.reduce((j,E)=>(j.subarray(R).set(E),R+=E.length,j),q)}))}errorInfo(d){let s={errMsg:d};this.emit(Et.Error,s)}}Gn([$e(le.INIT,"initialized")],Xn.prototype,"initialize",1);Gn([$e("initialized","configured")],Xn.prototype,"configure",1);Gn([zn("configured")],Xn.prototype,"decode",1);Gn([$e("configured","initialized")],Xn.prototype,"reset",1);Gn([$e([],"closed")],Xn.prototype,"close",1);var lo=Object.defineProperty,ho=Object.getOwnPropertyDescriptor,Kn=($,d,s,m)=>{for(var y=m>1?void 0:m?ho(d,s):d,O=$.length-1,R;O>=0;O--)(R=$[O])&&(y=(m?R(d,s,y):R(y))||y);return m&&y&&lo(d,s,y),y};class zt extends le{async initialize(){this.decoder=new AudioDecoder({output:d=>{this.emit(Et.AudioFrame,d)},error:d=>{this.emit(Et.Error,d),this.close()}})}configure(d){this.config=d,this.decoder.configure({codec:{aac:"mp4a.40.2",pcma:"alaw",pcmu:"ulaw"}[d.codec],description:d.description,sampleRate:d.sampleRate,numberOfChannels:d.numberOfChannels})}decode(d){this.decoder.state==="configured"&&this.decoder.decode(new EncodedAudioChunk(d))}flush(){this.decoder.flush()}reset(){this.decoder.reset()}close(){this.decoder.close()}}Kn([$e([le.INIT,"closed"],"initialized")],zt.prototype,"initialize",1);Kn([$e("initialized","configured")],zt.prototype,"configure",1);Kn([zn("configured")],zt.prototype,"decode",1);Kn([$e([],le.INIT)],zt.prototype,"reset",1);Kn([$e([],"closed",{ignoreError:!0})],zt.prototype,"close",1);var Hr=($=>($.AUDIO_ENCODER_CONFIG_CHANGED="audio-encoder-config-changed",$.VIDEO_ENCODER_CONFIG_CHANGED="video-encoder-config-changed",$))(Hr||{}),Qr=($=>($[$.PULL=0]="PULL",$[$.PUSH=1]="PUSH",$))(Qr||{});class Si extends Wn.EventEmitter{constructor(d,s=0){super(),this.source=d,this.mode=s,Object.getPrototypeOf(this).constructor.name,d&&(s==0?this.startPull(d):d.oput=new Nn(this.demux()))}startPull(d){this.mode=0,this.source=d,this.audioReadable=new ReadableStream({pull:async s=>s.enqueue(await this.pullAudio())}),this.videoReadable=new ReadableStream({pull:async s=>s.enqueue(await this.pullVideo())})}pullAudio(){return new Promise((d,s)=>{this.gotAudio=d,this.gotVideo&&this.pull().catch(s)})}pullVideo(){return new Promise((d,s)=>{this.gotVideo=d,this.gotAudio&&this.pull().catch(s)})}}const Ai=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,-1,-1,-1];function po($){const d=(($[2]&192)>>>6)+1,s=($[2]&60)>>>2,m=($[2]&1)<<2|($[3]&192)>>>6,y=new Uint8Array([(d&3)<<3|(s&14)>>1,(s&1)<<7|(m&15)<<3]);return{profile:d,sampleRate:Ai[s],channel:m,audioSpecificConfig:y}}class pi extends Si{constructor(){super(...arguments),this.tmp8=new Uint8Array(4),this.dv=new DataView(this.tmp8.buffer)}async pullTag(){const d=new Uint8Array(15);return this.pullTag=async()=>{await this.source.read(d);const s=d[4],m=this.readLength(d.subarray(5,8)),y=this.readTimestamp(d.subarray(8,11)),O=await this.source.read(m);return{type:s,data:O.slice(),timestamp:y}},console.time("flv"),await this.source.read(9).then(s=>{if(this.header=s,s[0]!="F".charCodeAt(0)||s[1]!="L".charCodeAt(0)||s[2]!="V".charCodeAt(0))throw new Error("not flv");console.timeEnd("flv")}),this.pullTag()}readTag(d){const s=d[0],m=this.readLength(d.subarray(1,4)),y=this.readTimestamp(d.subarray(4,8));this.gotTag(s,d.subarray(11,11+m),y)}gotTag(d,s,m){var y,O;switch(d){case 8:return this.audioDecoderConfig||(this.audioDecoderConfig={codec:{10:"aac",7:"pcma",8:"pcmu"}[s[0]>>4]||"unknown",numberOfChannels:1,sampleRate:8e3},this.audioDecoderConfig.codec=="aac"?(this.audioDecoderConfig.numberOfChannels=s[3]>>3&15,this.audioDecoderConfig.sampleRate=Ai[(s[2]&7)<<1|s[3]>>7]):this.emit(Hr.AUDIO_ENCODER_CONFIG_CHANGED,this.audioDecoderConfig)),this.audioDecoderConfig.codec=="aac"&&s[1]==0?(this.audioDecoderConfig.description=s.subarray(2),this.emit(Hr.AUDIO_ENCODER_CONFIG_CHANGED,this.audioDecoderConfig),this.mode==Qr.PULL?this.pull():void 0):(y=this.gotAudio)==null?void 0:y.call(this,{type:"key",data:this.audioDecoderConfig.codec=="aac"?s.subarray(2):s.subarray(1),timestamp:m,duration:0});case 9:return this.videoDecoderConfig||(this.videoDecoderConfig={codec:{7:"avc",12:"hevc"}[s[0]&15]||"unknown",description:s.subarray(5)}),s[1]==0?(this.emit(Hr.VIDEO_ENCODER_CONFIG_CHANGED,this.videoDecoderConfig),this.mode==Qr.PULL?this.pull():void 0):(O=this.gotVideo)==null?void 0:O.call(this,{type:s[0]>>4==1?"key":"delta",data:s.subarray(5),timestamp:m,duration:0});default:if(this.mode==Qr.PULL)return this.pull()}}async pull(){const d=await this.pullTag();if(d)return this.gotTag(d.type,d.data,d.timestamp)}readLength(d){return this.tmp8[0]=0,this.tmp8.set(d,1),this.dv.getUint32(0)}readTimestamp(d){this.tmp8.set(d.subarray(0,3),1);let s=this.dv.getUint32(0);return s===16777215&&(this.tmp8[0]=d[3],s=this.dv.getUint32(0)),s}readHead(d){if(console.time("flv"),this.header=d,d[0]!="F".charCodeAt(0)||d[1]!="L".charCodeAt(0)||d[2]!="V".charCodeAt(0))throw new Error("not flv");console.timeEnd("flv")}*demux(){for(this.readHead(yield 13);;){let d=yield 11;const s=d[0],m=this.readLength(d.subarray(1,4)),y=this.readTimestamp(d.subarray(4,8));d=yield m,this.gotTag(s,d.slice(),y),yield 4}}}const Ei=442,Pi=444,Ci=480,Ti=448,$i=441,vo=27,mo=36,go=15,yo=144,wo=145;class _o extends Si{constructor(){super(...arguments),this.videoStreamType=0,this.audioStreamType=0,this.pts=0,this.dts=0,this.tmp8=new Uint8Array(4),this.dv=new DataView(this.tmp8.buffer),this.videoBuffer=[],this.videoBufferSize=0,this.currentPTS=0,this.startTime=0}async pull(){const d=this.tmp8,s=this.dv,m=this.source;switch(await m.read(d),s.getUint32(0)){case Ei:await m.read(9),await m.read(d.subarray(0,1));const O=s.getUint8(0)&7;await m.read(O);break;case Pi:await m.read(d.subarray(0,2)),this.decProgramStreamMap(await m.read(s.getUint16(0)));break;case Ci:if(await m.read(d.subarray(0,2)),this.demuxVideo(await m.read(s.getUint16(0))))return;break;case Ti:if(await m.read(d.subarray(0,2)),this.demuxAudio(await m.read(s.getUint16(0))))return;break;case $i:return;default:await m.read(d.subarray(0,2));const R=s.getUint16(0);await m.read(R)}return this.pull()}*demux(){const d=this.tmp8,s=this.dv;for(;;){yield d;const m=s.getUint32(0);switch(m.toString(16),m){case Ei:yield 9,yield d.subarray(0,1),yield s.getUint8(0)&7;break;case Pi:yield d.subarray(0,2);const R=yield s.getUint16(0);this.decProgramStreamMap(R);break;case Ci:yield d.subarray(0,2),this.demuxVideo(yield s.getUint16(0));break;case Ti:yield d.subarray(0,2),this.demuxAudio(yield s.getUint16(0));break;case $i:return;default:yield d.subarray(0,2),yield s.getUint16(0);break}}}demuxVideo(d){var y,O,R;const s=this.parsePESPacket(d),m=this.videoBuffer;if(!this.startTime)if(((y=this.videoDecoderConfig)==null?void 0:y.codec)=="hevc")if((s[4]&126)>>1===32)this.startTime=Date.now(),this.currentPTS=this.pts;else return!1;else if((s[4]&15)==7)this.startTime=Date.now(),this.currentPTS=this.pts;else return!1;if(this.currentPTS==this.pts)return s[4]&15,this.videoBufferSize+=s.length,m.push(s.slice()),!1;if(m.length&&this.currentPTS!=this.pts){let q=0,j="key";return((O=this.videoDecoderConfig)==null?void 0:O.codec)=="hevc"?(m[0][4]&126)>>1!=32&&(j="delta"):(m[0][4]&15)==1&&(j="delta"),(R=this.gotVideo)==null||R.call(this,{type:j,data:m.length==1?m[0]:m.reduce((E,M)=>(E.subarray(q).set(M),q+=M.length,E),new Uint8Array(this.videoBufferSize)),timestamp:(Date.now()-this.startTime)*1e3}),m.length=0,!0}return this.videoBufferSize+=s.length,m.push(s.slice()),this.currentPTS=this.pts,!1}demuxAudio(d){var m,y,O,R;const s=this.parsePESPacket(d);if(((m=this.audioDecoderConfig)==null?void 0:m.codec)=="aac"&&!((y=this.audioDecoderConfig)!=null&&y.description)){const q=po(s.subarray(7));this.audioDecoderConfig={codec:"aac",description:q.audioSpecificConfig,sampleRate:q.sampleRate,numberOfChannels:q.channel},this.emit(Hr.AUDIO_ENCODER_CONFIG_CHANGED,this.audioDecoderConfig)}return(R=this.gotAudio)==null||R.call(this,{type:"key",data:((O=this.audioDecoderConfig)==null?void 0:O.codec)=="aac"?s.subarray(7):s,timestamp:this.dts,duration:0}),!0}parsePESPacket(d){if(d.length<4)throw new Error("Short buffer");const s=d[1],m=s>>7==1,y=(s&64)>>6==1,O=d[2];if(d.length<O+3)throw new Error("Short buffer");const R=d.subarray(3,3+O);return m&&R.length>4&&(this.pts=(R[0]&14)<<29|R[1]<<22|(R[2]&254)<<14|R[3]<<7|R[4]>>1,y&&R.length>9?this.dts=(R[5]&14)<<29|R[6]<<22|(R[7]&254)<<14|R[8]<<7|R[9]>>1:this.dts=this.pts),d.subarray(3+O)}decProgramStreamMap(d){const s=new DataView(d.buffer,d.byteOffset,d.byteLength),m=d.length;let y=2;const O=s.getUint16(y);y+=2,y+=O;let R=s.getUint16(y);for(y+=2;R>0&&!(m<=y+1);){const q=d[y];y++;const j=d[y];if(y++,j>=224&&j<=239?(this.videoStreamType=q,this.videoDecoderConfig={codec:{[vo]:"avc",[mo]:"hevc"}[q]||"unknown"},this.emit(Hr.VIDEO_ENCODER_CONFIG_CHANGED,this.videoDecoderConfig)):j>=192&&j<=223&&(this.audioStreamType=q,this.audioDecoderConfig={codec:{[go]:"aac",[yo]:"pcma",[wo]:"pcmu"}[q]||"unknown",numberOfChannels:1,sampleRate:8e3},this.audioDecoderConfig.codec!="aac"&&this.emit(Hr.AUDIO_ENCODER_CONFIG_CHANGED,this.audioDecoderConfig)),m<=y+1)break;const E=s.getUint16(y);y+=2,y+=E,R-=4+E}}}const bo={class:"video-container"},Eo=["srcObject"],Po=Di({__name:"jb4",props:{videoShadow:null,streamPath:null,format:null,webrtcStream:null,speed:null,pause:{type:Boolean},startTime:null,endTime:null},emits:["postion"],setup($,{emit:d}){const s=$;let m,y=0,O=0;const R=ci();let q,j;const E=ci(),M=new Wt,I=new zt,se=Fi(new to(""));M.on(Ir.VideoCodecInfo,G=>{`${G.width}${G.height}`}),M.on(Ir.VideoFrame,G=>{j.write(G)}),I.on(Et.AudioFrame,G=>{q.write(G)}),M.on(Ir.Error,G=>{console.error(G),M.initialize()});function ae(){var G;R.value&&((G=s.webrtcStream)!=null&&G.mediaStream)&&(E.value=s.webrtcStream.mediaStream)}Ri(()=>{var G;(G=s.webrtcStream)==null||G.off("change",ae)}),yi(()=>{se.mediaStream&&(E.value=se.mediaStream),s.webrtcStream&&(ae(),s.webrtcStream.on("change",ae))}),li(()=>s.startTime,(G,N)=>{if(G&&N&&(O=y,s.format==="ws-flv")){const re=G-N;m.send(new Uint8Array([...oe,3,re>>24,re>>16,re>>8,re]))}}),yi(async()=>{if(s.streamPath&&s.format){m&&(M.close(),I.close(),await m.close()),await M.initialize(),await I.initialize();const G=s.startTime?`vod/${s.streamPath}?start=${s.startTime/1e3>>0}&end=${s.endTime?s.endTime/1e3>>0:""}`:s.streamPath;switch(s.format){case"ps":m=new bi(`${Jn("ps","","ws")}/${G}`),B(new _o(m,Qr.PUSH));break;case"http-flv":m=new eo(`${Jn("flv","")}/${G}`),B(new pi(m,Qr.PUSH));break;case"ws-flv":m=new bi(`${Jn("flv","","ws")}/${G}`),B(new pi(m,Qr.PUSH));break;case"webrtc":const N=new no(`${Jn("webrtc","/play")}/${G}`);m=N;const re=N.webrtc;se.id=G,N.addStream(se),re.ondatachannel=we=>{const J=we.channel,X=new ro(J);B(new pi(X,Qr.PUSH)),X.connect()};break}await m.connect()}});const oe="cmd".split("").map(G=>G.charCodeAt(0));li(()=>s.speed,G=>{if(s.format==="ws-flv"){const N=(G||1)*100;m.send(new Uint8Array([...oe,4,N>>24,N>>16,N>>8,N]))}}),li(()=>s.pause,G=>{s.format==="ws-flv"&&m.send(new Uint8Array([...oe,G?1:2]))});function B(G){const N=new MediaStreamTrackGenerator({kind:"audio"});q=N.writable.getWriter();const re=new MediaStreamTrackGenerator({kind:"video"});j=re.writable.getWriter(),E.value=new MediaStream([N,re]),G.on(Hr.VIDEO_ENCODER_CONFIG_CHANGED,we=>{M.configure(we)}),G.on(Hr.AUDIO_ENCODER_CONFIG_CHANGED,we=>{I.configure(we)}),G.gotVideo=we=>{try{M.decode(we),y=we.timestamp,s.startTime&&d("postion",y-O+s.startTime)}catch(J){console.error(J,we)}},G.gotAudio=we=>I.decode(we)}const V=ci(!0);return Oi(()=>{Bi(R.value,"canplay",()=>{V.value=!1})}),Ui(()=>m==null?void 0:m.close()),(G,N)=>(Mi(),ji("div",bo,[Ii(Li(Wi(Vi),{class:"loading",size:"large"},null,512),[[Hi,V.value]]),zi("video",{ref_key:"videoEle",ref:R,class:Ni(["video",{videoShadow:$.videoShadow}]),srcObject:E.value,autoplay:""},null,10,Eo),xi(G.$slots,"default",{},void 0,!0)]))}});const Oo=qi(Po,[["__scopeId","data-v-2bec8560"]]);export{zt as A,ro as D,pi as F,Oo as V,to as W,no as a,Qr as b,Wt as c,Hr as d,Ir as e,Et as f};
