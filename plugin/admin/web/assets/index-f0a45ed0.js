import{d as h,f as e,e as T,k as v,w as V,U as y,_ as x,$ as s,a8 as k,u as a,E as g,V as P,F as O,a7 as E,a4 as L,a3 as F}from"./vue-14860272.js";import{g as R,a as $,u as z}from"./global-1c872f23.js";import{u as q}from"./formily-20213809.js";import"./dayjs-4778c158.js";import{u as G,d as S,a as w,P as M,M as J,X as N,I as j,a9 as A,J as B,ae as U,af as X}from"./index-6c19eff1.js";import{C as p}from"./Card-2e616ea4.js";import{A as H}from"./index-6af92a66.js";import"./index-1874b7a6.js";import"./LeftOutlined-42ce2cd6.js";import"./isNumeric-3f69e2aa.js";import"./index-7743fdb9.js";import"./index-76e38462.js";import"./eagerComputed-49254c56.js";import"./index-99ad184c.js";import"./index-d5a0e3f9.js";import"./Group-8793f768.js";import"./RadioButton-fd725ab6.js";import"./useFlexGapSupport-6710d548.js";import"./index-f566a6ba.js";import"./index-b4a1a918.js";import"./index-e5fa243b.js";import"./scrollTo-62e90131.js";import"./mockjs-890b569b.js";var Q=function(){return{prefixCls:String,title:M.any,description:M.any,avatar:M.any}};const D=h({compatConfig:{MODE:3},name:"ACardMeta",props:Q(),slots:["title","description","avatar"],setup:function(l,m){var n=m.slots,f=G("card",l),r=f.prefixCls;return function(){var c=S({},"".concat(r.value,"-meta"),!0),o=w(n,l,"avatar"),_=w(n,l,"title"),b=w(n,l,"description"),i=o?e("div",{class:"".concat(r.value,"-meta-avatar")},[o]):null,d=_?e("div",{class:"".concat(r.value,"-meta-title")},[_]):null,t=b?e("div",{class:"".concat(r.value,"-meta-description")},[b]):null,C=d||t?e("div",{class:"".concat(r.value,"-meta-detail")},[d,t]):null;return e("div",{class:c},[i,C])}}});var W=function(){return{prefixCls:String,hoverable:{type:Boolean,default:!0}}};const I=h({compatConfig:{MODE:3},name:"ACardGrid",__ANT_CARD_GRID:!0,props:W(),setup:function(l,m){var n=m.slots,f=G("card",l),r=f.prefixCls,c=T(function(){var o;return o={},S(o,"".concat(r.value,"-grid"),!0),S(o,"".concat(r.value,"-grid-hoverable"),l.hoverable),o});return function(){var o;return e("div",{class:c.value},[(o=n.default)===null||o===void 0?void 0:o.call(n)])}}});p.Meta=D;p.Grid=I;p.install=function(u){return u.component(p.name,p),u.component(D.name,D),u.component(I.name,I),u};const Y={class:"flex h-full"},Z={class:"w-700px"},ee={class:"flex justify-between p-4px",style:{background:"var(--layout-background)"}},te={key:1,class:"absolute top-40% left-50%"},ae=h({name:"Config"}),Se=h({...ae,setup(u){const l=v([]);R().then(i=>{Object.keys(i).length&&(l.value=Object.entries(i).map(([d,t])=>({name:t.Name,version:`版本: ${t.Version}`,disabled:t.Disabled})))});const m=v(null),n=v(),f=v(!1),r=v(["global-sub","plugin-sub"]),c=v(["global"]);V(c,i=>{const d={name:i[0]==="global"?"":i[0],formily:"1"};f.value=!0,$(d).then(t=>{const{FormilyForm:C,form:K}=q({schema:t});m.value=C,n.value=K}).finally(()=>{f.value=!1})},{immediate:!0});const o=async()=>{if(!n.value.modified)return X.warning("您尚未修改过任何配置，无需保存！");const i=await n.value.submit();z({name:c.value[0]},i)},_=()=>document.querySelector(".plugin-list"),b=()=>{window.open("https://monibuca.com/docs/guide/plugins/"+c.value[0].toLowerCase()+".html","_blank")};return(i,d)=>(y(),x(a(p),{class:"flex-center h-100% overflow-hidden",bodyStyle:{height:"100%"}},{default:s(()=>[k("div",Y,[e(a(J),{selectedKeys:c.value,openKeys:r.value,mode:"inline",inlineCollapsed:!1,onSelect:d[0]||(d[0]=({key:t})=>c.value=[t]),class:"w-180px h-100% overflow-y-auto overflow-x-hidden"},{default:s(()=>[e(a(N),{key:"global-sub"},{title:s(()=>[g("全局配置")]),default:s(()=>[e(a(j),{key:"global"},{default:s(()=>[g(" global ")]),_:1})]),_:1}),e(a(N),{key:"plugin-sub"},{title:s(()=>[g("插件配置")]),default:s(()=>[(y(!0),P(O,null,E(l.value,t=>(y(),x(a(j),{key:t.name,disabled:t.disabled},{default:s(()=>[g(L(t.name),1)]),_:2},1032,["disabled"]))),128))]),_:1})]),_:1},8,["selectedKeys","openKeys"]),e(a(p),{bordered:!1,bodyStyle:{paddingTop:0},class:"plugin-list h-full overflow-y-auto overflow-x-hidden relative"},{default:s(()=>[k("div",Z,[e(a(H),{offsetTop:0,target:_,class:"mb-10px"},{default:s(()=>[k("div",ee,[e(a(A),{type:"link",onClick:o},{default:s(()=>[e(a(B),{icon:"tabler:hand-click",class:"v-text-bottom"}),g(" 点我保存配置 ")]),_:1}),e(a(A),{type:"link",onClick:b},{default:s(()=>[g(" 配置文档 "),e(a(B),{icon:"fluent:window-new-16-filled",class:"v-text-bottom"})]),_:1})])]),_:1}),m.value?(y(),x(a(m),{key:0})):F("",!0),f.value?(y(),P("div",te,[e(a(U),{class:"zIndex-100",size:"large"})])):F("",!0)])]),_:1})])]),_:1}))}});export{Se as default};
